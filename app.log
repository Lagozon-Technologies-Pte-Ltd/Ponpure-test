{"timestamp": "2025-07-02 15:17:47,913", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-02 15:27:21,630", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-02 15:27:22,211", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:27:28,012", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:27:28,815", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:27:36,154", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 15:27:36,158", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 15:27:36,159", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 15:27:37,033", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 15:27:37,034", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 15:27:37,441", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 15:29:59,056", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-02 15:30:03,704", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:30:05,759", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:30:10,230", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 15:30:10,233", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 15:30:10,237", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 15:30:11,008", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 15:30:11,009", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 15:30:11,580", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 15:31:35,332", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:31:36,645", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:31:39,972", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 15:31:39,976", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 15:31:39,976", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 15:31:40,770", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 15:31:40,771", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 15:31:41,172", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 15:33:04,973", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:33:06,998", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:33:11,260", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 15:33:11,263", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 15:33:11,263", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 15:33:12,013", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 15:33:12,013", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 15:33:12,668", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 15:50:22,348", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:50:28,600", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:50:33,540", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 15:50:33,540", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 15:50:33,540", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 15:50:34,394", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 15:50:34,395", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 15:50:34,769", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 15:50:58,615", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:51:00,763", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:51:04,790", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 15:51:04,792", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 15:51:04,793", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 15:51:05,628", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 15:51:05,629", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 15:51:06,315", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 15:52:57,098", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:52:58,398", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 15:53:02,473", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 15:53:02,474", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 15:53:02,476", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 15:53:03,308", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 15:53:03,310", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 15:53:03,728", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 16:43:49,494", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 16:43:54,129", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 16:44:02,052", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 16:44:02,057", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 16:44:02,057", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 16:44:02,864", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 16:44:02,864", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 16:44:03,306", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 16:50:29,217", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-02 16:50:40,401", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 16:50:50,706", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 16:50:54,991", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 16:50:54,991", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 16:50:54,991", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 16:50:55,847", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 16:50:55,848", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 16:50:56,205", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 17:03:02,957", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-02 17:03:30,890", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 17:03:34,508", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 17:04:00,619", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 17:04:00,624", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 17:04:00,624", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 17:04:01,428", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 17:04:01,428", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 17:04:01,825", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 17:22:40,046", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-02 17:23:41,690", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 17:23:45,188", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 17:23:49,606", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 17:23:49,606", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 17:23:49,606", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 17:23:50,381", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 17:23:50,381", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 17:23:50,780", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 17:28:08,406", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-02 17:28:28,255", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 17:28:36,673", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 17:28:37,154", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 17:28:42,143", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 17:28:42,146", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 17:28:42,146", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 17:28:42,933", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 17:28:42,933", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 17:28:43,272", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-02 17:40:42,451", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 17:40:44,028", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-02 17:40:49,066", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-02 17:40:49,070", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-02 17:40:49,071", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-02 17:40:49,925", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-02 17:40:49,926", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-02 17:40:50,311", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 10:00:49,711", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-03 10:00:50,556", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 10:00:54,280", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 10:00:54,816", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 10:02:16,292", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed  OEM labour under repair from 01-Jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 10:02:16,295", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 10:02:16,297", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 10:02:17,205", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM labour items under repair between 01-Jan-2024 and 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 10:02:17,205", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM labour items under repair between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-03 10:02:17,575", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 10:02:37,352", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 854, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-03 10:02:47,570", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 10:02:49,623", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 10:03:27,200", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of top 10 consumed OEM labour under Repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 10:03:27,202", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 10:03:27,202", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 10:03:27,992", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM labour entries under Repair for the period from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 10:03:27,992", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM labour entries under Repair for the period from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 10:03:28,341", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 10:04:39,678", "logger": "app", "level": "INFO", "message": "Received /submit request with query: provide the list of top 10 consumed local labour under repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 10:04:39,682", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 10:04:39,682", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 10:04:40,480", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 10:04:40,480", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 10:04:40,833", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 10:55:49,223", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 10:55:52,279", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 10:56:06,619", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of top 10 consumed OEM labour under Repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 10:56:06,622", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 10:56:06,623", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 10:56:07,392", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM labour entries under Repair for the period from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 10:56:07,392", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM labour entries under Repair for the period from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 10:56:07,807", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 10:56:18,348", "logger": "app", "level": "INFO", "message": "Received /submit request with query: provide the list of top 10 consumed local labour under repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 10:56:18,356", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 10:56:18,357", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 10:56:19,089", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 10:56:19,091", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 10:56:19,430", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 10:56:36,418", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 10:56:37,800", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 10:56:45,024", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of top 10 consumed OEM labour under Repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 10:56:45,024", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 10:56:45,028", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 10:56:46,169", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM labour entries under Repair for the period from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 10:56:46,170", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM labour entries under Repair for the period from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 10:56:46,505", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 10:56:57,686", "logger": "app", "level": "INFO", "message": "Received /submit request with query: provide the list of top 10 consumed local labour under repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 10:56:57,686", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 10:56:57,686", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 10:56:58,456", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 10:56:58,456", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 10:56:58,799", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 11:16:55,987", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:16:58,380", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:17:04,902", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of top 10 consumed OEM labour under Repair from 01-jan-2024 to 31-jan-2024 LLM Interpretation: Retrieve the top 10 consumed OEM labour entries under Repair for the period from 01-jan-2024 to 31-jan-2024.  provide the list of top 10 consumed local labour under repair from 01-jan-2024 to 31-jan-2024 LLM Interpretation: Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024., section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 11:17:04,904", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 11:17:04,904", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 11:17:05,872", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM labour and the top 10 consumed local labour under Repair from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 11:17:05,872", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM labour and the top 10 consumed local labour under Repair from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 11:17:06,201", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 11:17:11,701", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 854, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-03 11:17:11,824", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:19:06,170", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:19:27,585", "logger": "app", "level": "INFO", "message": "Received /submit request with query: provide the list of top 10 consumed local labour under repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 11:19:27,589", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 11:19:27,589", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 11:19:28,507", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 11:19:28,509", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 11:19:28,860", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 11:19:36,812", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:20:00,255", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of top 10 consumed OEM labour under Repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 11:20:00,257", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 11:20:00,257", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 11:20:01,181", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the top 10 consumed OEM labour entries under Repair from January 1, 2024 to January 31, 2024"}
{"timestamp": "2025-07-03 11:20:01,585", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 11:20:06,777", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:20:08,626", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:20:58,121", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under  Repair  from 01-Jan-2024 to 31-dec-2024 order by quantity, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 11:20:58,126", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 11:20:58,126", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 11:20:58,892", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 local parts consumed under Repair from 01-Jan-2024 to 31-Dec-2024 ordered by quantity in descending order.'}"}
{"timestamp": "2025-07-03 11:20:58,892", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 local parts consumed under Repair from 01-Jan-2024 to 31-Dec-2024 ordered by quantity in descending order."}
{"timestamp": "2025-07-03 11:20:59,313", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 11:21:15,464", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:21:17,167", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:41:19,251", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:41:21,829", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:41:32,340", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of top 10 consumed OEM labour under Repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 11:41:32,344", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 11:41:32,344", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 11:41:33,128", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM labour entries under Repair from January 1, 2024, to January 31, 2024.'}"}
{"timestamp": "2025-07-03 11:41:33,128", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM labour entries under Repair from January 1, 2024, to January 31, 2024."}
{"timestamp": "2025-07-03 11:41:33,567", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 11:41:53,165", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 854, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-03 11:41:57,301", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:41:59,142", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 11:42:08,715", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of top 10 consumed OEM labour under Repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 11:42:08,715", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 11:42:08,715", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 11:42:09,506", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM labour entries under Repair for the period from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 11:42:09,507", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM labour entries under Repair for the period from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 11:42:09,857", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 11:42:39,334", "logger": "app", "level": "INFO", "message": "Received /submit request with query: provide the list of top 10 consumed local labour under repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 11:42:39,337", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 11:42:39,338", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 11:42:40,113", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024.'}"}
{"timestamp": "2025-07-03 11:42:40,113", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local labour entries under repair from 01-jan-2024 to 31-jan-2024."}
{"timestamp": "2025-07-03 11:42:40,499", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:15:09,281", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-03 12:15:14,020", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:15:16,190", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:15:38,863", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of top 10 consumed OEM labour under Repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:15:38,866", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:15:38,866", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:15:39,702", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 OEM labour items consumed under Repair between 01-jan-2024 and 31-jan-2024.'}"}
{"timestamp": "2025-07-03 12:15:39,702", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM labour items consumed under Repair between 01-jan-2024 and 31-jan-2024."}
{"timestamp": "2025-07-03 12:15:40,211", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:16:00,416", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 854, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-03 12:16:04,351", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:16:06,820", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:16:12,023", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of top 10 consumed OEM labour under Repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:16:12,023", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:16:12,023", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:16:12,847", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 OEM labour items consumed under Repair between 01-jan-2024 and 31-jan-2024.'}"}
{"timestamp": "2025-07-03 12:16:12,847", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM labour items consumed under Repair between 01-jan-2024 and 31-jan-2024."}
{"timestamp": "2025-07-03 12:16:13,403", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:16:42,428", "logger": "app", "level": "INFO", "message": "Received /submit request with query: provide the list of top 10 consumed local labour under repair from 01-jan-2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:16:42,429", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:16:42,429", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:16:43,633", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 local labour items consumed under repair between 01-jan-2024 and 31-jan-2024, ordered by consumption quantity in descending order.'}"}
{"timestamp": "2025-07-03 12:16:43,634", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 local labour items consumed under repair between 01-jan-2024 and 31-jan-2024, ordered by consumption quantity in descending order."}
{"timestamp": "2025-07-03 12:16:44,204", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:40:25,135", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:47:54,939", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:47:58,759", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:47:58,760", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:47:58,761", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:47:59,486", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair category between 01-Jan-2024 and 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 12:47:59,488", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair category between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-03 12:47:59,876", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:48:56,591", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:48:57,835", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:49:00,748", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under repair from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:49:00,748", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:49:00,748", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:49:01,509", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under repair between 01-Jan-2024 and 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 12:49:01,510", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under repair between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-03 12:49:01,852", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:49:19,918", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:49:21,385", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:49:26,755", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Paid SERvice from 3rd Jan 2024 to 4th Jan 2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:49:26,758", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:49:26,758", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:49:27,586", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Paid Service between 3rd January 2024 and 4th January 2024.'}"}
{"timestamp": "2025-07-03 12:49:27,586", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Paid Service between 3rd January 2024 and 4th January 2024."}
{"timestamp": "2025-07-03 12:49:27,948", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:49:43,965", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:49:45,875", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:49:48,379", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:49:48,381", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:49:48,381", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:49:51,068", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 12:49:51,068", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 12:49:51,400", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:50:26,157", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:50:33,501", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:50:35,892", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  En-Route  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:50:35,897", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:50:35,897", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:50:36,698", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the En-Route category between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 12:50:36,699", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the En-Route category between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 12:50:37,037", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:55:13,626", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:55:16,262", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:55:20,788", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local Labour under Repair from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:55:20,790", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:55:20,790", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:55:21,533", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 Local Labour consumption under Repair from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 12:55:21,534", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 Local Labour consumption under Repair from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 12:55:21,948", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:55:39,440", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:55:40,654", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 12:55:44,912", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local Labour under Repair from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:55:44,914", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:55:44,914", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:55:46,134", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 Local Labour consumed under Repair from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 12:55:46,135", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 Local Labour consumed under Repair from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 12:55:46,990", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 12:59:40,649", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM Labour under Repair from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 12:59:40,649", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 12:59:40,649", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 12:59:41,423", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 OEM Labour items consumed under Repair between 01-Jan-2024 and 31-Jan-2024, ordered by consumption quantity descending.'}"}
{"timestamp": "2025-07-03 12:59:41,423", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM Labour items consumed under Repair between 01-Jan-2024 and 31-Jan-2024, ordered by consumption quantity descending."}
{"timestamp": "2025-07-03 12:59:41,817", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 13:01:58,688", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 13:02:04,150", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 13:02:08,949", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 13:02:08,952", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 13:02:08,952", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 13:02:09,866", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 OEM parts consumed under Repair between 01-Jan-2024 and 31-Jan-2024, ordered by consumption quantity.'}"}
{"timestamp": "2025-07-03 13:02:09,866", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM parts consumed under Repair between 01-Jan-2024 and 31-Jan-2024, ordered by consumption quantity."}
{"timestamp": "2025-07-03 13:02:10,278", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 13:04:48,494", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 13:04:50,496", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 13:04:53,525", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 13:04:53,528", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 13:04:53,529", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 13:04:54,322", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 13:04:54,322", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 13:04:54,803", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 13:07:06,360", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 13:07:08,059", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 13:07:12,997", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  En-Route  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 13:07:12,998", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 13:07:12,998", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 13:07:13,824", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under En-Route status between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 13:07:13,825", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under En-Route status between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 13:07:14,223", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 14:42:51,172", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 14:42:51,917", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 14:42:56,181", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 14:42:56,185", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 14:42:56,185", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 14:42:57,025", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 consumed OEM parts under Repair from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 14:42:57,025", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed OEM parts under Repair from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 14:42:57,398", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 14:43:18,136", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 854, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-03 14:43:38,568", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 14:43:39,714", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 14:43:46,010", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 14:43:46,012", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 14:43:46,013", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 14:43:46,788", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 OEM parts consumed under Repair from 01-Jan-2024 to 31-Jan-2024 based on quantity or usage.'}"}
{"timestamp": "2025-07-03 14:43:46,789", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM parts consumed under Repair from 01-Jan-2024 to 31-Jan-2024 based on quantity or usage."}
{"timestamp": "2025-07-03 14:43:47,163", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:25:33,414", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:25:50,169", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:25:53,766", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:25:53,775", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:25:53,775", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:25:54,888", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 15:25:54,888", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 15:25:55,292", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:26:13,396", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 854, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-03 15:26:18,178", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:26:19,384", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:26:25,404", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:26:25,411", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:26:25,413", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:26:26,201", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 15:26:26,203", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 15:26:26,585", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:28:16,090", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:28:17,006", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:28:21,996", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  En-Route  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:28:21,999", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:28:22,001", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:28:22,815", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the En-Route category between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 15:28:22,817", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the En-Route category between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 15:28:23,253", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:30:34,127", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:30:35,191", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:30:38,792", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Accessories"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:30:38,796", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:30:38,796", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:30:39,653", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Retrieve the top 10 consumed OEM parts under the Product category 'Accessories' for the period from 01-Jan-2024 to 31-Dec-2024."}"}
{"timestamp": "2025-07-03 15:30:39,653", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Product category 'Accessories' for the period from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-03 15:30:40,092", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:34:28,941", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:34:29,813", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:34:33,093", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under "Bodyshop"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:34:33,100", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:34:33,102", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:34:33,936", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Retrieve the top 10 consumed OEM parts under the 'Bodyshop' category between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 15:34:33,936", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the 'Bodyshop' category between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 15:34:34,366", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:36:17,826", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:36:19,108", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:36:23,058", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under "Paid Service"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:36:23,063", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:36:23,063", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:36:23,843", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Select the top 10 OEM parts by consumption quantity under 'Paid Service' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 15:36:23,843", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM parts by consumption quantity under 'Paid Service' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 15:36:24,303", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:39:21,633", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:39:23,010", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:39:27,560", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under  Charging  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:39:27,566", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:39:27,568", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:39:28,482", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed local parts under Charging from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 15:39:28,484", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local parts under Charging from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-03 15:39:28,919", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:45:55,722", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:46:00,526", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:46:03,737", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under  En-Route  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:46:03,740", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:46:03,740", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:46:04,590", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 consumed local parts under En-Route status between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 15:46:04,590", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed local parts under En-Route status between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 15:46:05,054", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:50:38,074", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:51:17,099", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under Accessories"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:51:17,104", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:51:17,104", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:51:17,995", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the Top 10 consumed local parts under Accessories from 01-Jan-2024 to 31-Dec-2024"}
{"timestamp": "2025-07-03 15:51:18,470", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:51:23,155", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:51:26,874", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under Accessories"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:51:26,876", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:51:26,876", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:51:27,703", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Select the top 10 consumed local parts under the product category 'Accessories' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 15:51:27,703", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed local parts under the product category 'Accessories' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 15:51:28,125", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:53:04,687", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:53:38,359", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under "Bodyshop"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:53:38,362", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:53:38,364", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:53:39,388", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the Top 10 consumed local parts under Bodyshop from 01-Jan-2024 to 31-Dec-2024"}
{"timestamp": "2025-07-03 15:53:39,767", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:53:59,562", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:54:00,631", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:54:08,307", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under "Bodyshop"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:54:08,314", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:54:08,314", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:54:09,084", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Select the top 10 consumed local parts under the 'Bodyshop' category from 01-Jan-2024 to 31-Dec-2024."}"}
{"timestamp": "2025-07-03 15:54:09,084", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed local parts under the 'Bodyshop' category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-03 15:54:09,531", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 15:55:12,809", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:57:47,746", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:57:50,315", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:57:52,913", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 15:57:56,892", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under "Paid Service"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 15:57:56,894", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 15:57:56,894", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 15:57:57,871", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Retrieve the top 10 consumed local parts under 'Paid Service' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 15:57:57,871", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local parts under 'Paid Service' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 15:57:58,285", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:00:21,838", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:00:23,704", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:00:31,052", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under "Free Service"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:00:31,055", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:00:31,055", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:00:31,838", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Retrieve the top 10 consumed local parts under 'Free Service' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 16:00:31,838", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local parts under 'Free Service' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:00:32,239", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:02:57,290", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:02:58,158", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:03:12,020", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM Labour under  Repair  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:03:12,025", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:03:12,025", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:03:12,876", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM Labour items under Repair for the period from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 16:03:12,876", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM Labour items under Repair for the period from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 16:03:13,331", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:03:57,152", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:05:05,620", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:05:09,216", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM Labour under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:05:09,223", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:05:09,226", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:05:09,989", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 consumed OEM Labour items under Charging from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 16:05:09,989", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed OEM Labour items under Charging from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 16:05:10,466", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:07:37,310", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:07:39,507", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:07:43,657", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Dealer Labour under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:07:43,664", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:07:43,665", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:07:44,425", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 Dealer Labour consumption under Repair for the period from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:07:44,425", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 Dealer Labour consumption under Repair for the period from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-03 16:07:44,832", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:09:51,210", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:09:52,467", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:09:55,347", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM Labour consumption under    Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:09:55,353", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:09:55,354", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:09:56,101", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the Top 10 Dealers with the highest OEM Labour consumption for Repair orders between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:09:56,105", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM Labour consumption for Repair orders between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:09:56,530", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:10:33,960", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:12:02,064", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:12:03,356", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:12:06,467", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 5 Dealer Zone & Area Office (Dealer Area Office) with highest  OEM Labour consumption under    Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:12:06,473", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:12:06,475", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:12:07,261", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 5 Dealer Zones and Dealer Area Offices with the highest OEM Labour consumption under Repair between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:12:07,262", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 Dealer Zones and Dealer Area Offices with the highest OEM Labour consumption under Repair between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:12:07,685", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:14:37,925", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:14:39,745", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:14:42,628", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 5 Dealer Zone & Area Office (Dealer Area Office) with highest  Dealer Labour consumption under    Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:14:42,634", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:14:42,635", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:14:43,509", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the Top 5 Dealer Zone and Dealer Area Office with the highest Dealer Labour consumption under Repair from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:14:43,510", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the Top 5 Dealer Zone and Dealer Area Office with the highest Dealer Labour consumption under Repair from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-03 16:14:44,518", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:15:22,062", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:16:41,940", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:16:44,964", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Top 10 OEM Labour which has been replaced (Consumed) in XX (MODEL_GROP) & (FAMLY_DESC   from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:16:44,970", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:16:44,972", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:16:45,991", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Retrieve the top 10 OEM Labour items replaced (consumed) for MODEL_GROP = 'XX' and FAMLY_DESC = 'XX' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 16:16:45,991", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 OEM Labour items replaced (consumed) for MODEL_GROP = 'XX' and FAMLY_DESC = 'XX' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:16:46,451", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:30:08,250", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:30:10,485", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:30:14,163", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:30:14,163", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:30:14,163", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:30:14,996", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 16:30:14,996", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-03 16:30:15,780", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:31:29,411", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:31:30,379", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:31:32,828", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024., section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:31:32,835", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:31:32,835", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:31:33,641", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 consumed OEM parts in the Charging category between 01-Jan-2024 and 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 16:31:33,645", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed OEM parts in the Charging category between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-03 16:31:34,108", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:34:39,719", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:34:42,457", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:34:45,355", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Retrieve the top 10 consumed OEM parts under the En-Route category between 01-Jan-2024 and 31-Dec-2024., section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:34:45,362", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:34:45,362", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:34:46,295", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 consumed OEM parts in the En-Route category with consumption dates between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:34:46,295", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed OEM parts in the En-Route category with consumption dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:34:46,807", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:35:26,995", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:35:29,594", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Retrieve the top 10 consumed OEM parts under the Product category 'Accessories' for the period from 01-Jan-2024 to 31-Dec-2024., section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:35:29,600", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:35:29,600", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:35:30,625", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Product category 'Accessories' for the period from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-03 16:35:31,073", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:36:04,500", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:36:06,078", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:36:08,795", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Accessories" from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:36:08,805", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:36:08,809", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:36:09,742", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Select the top 10 consumed OEM parts under the Product category 'Accessories' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 16:36:09,744", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed OEM parts under the Product category 'Accessories' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:36:10,158", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:36:31,229", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:36:32,493", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:36:35,507", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Retrieve the top 10 consumed OEM parts under the 'Bodyshop' category between 01-Jan-2024 and 31-Dec-2024., section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:36:35,514", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:36:35,517", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:36:36,312", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Select the top 10 consumed OEM parts in the 'Bodyshop' category for the period from 01-Jan-2024 to 31-Dec-2024."}"}
{"timestamp": "2025-07-03 16:36:36,312", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed OEM parts in the 'Bodyshop' category for the period from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-03 16:36:36,776", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:37:35,743", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:37:37,081", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:37:39,673", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under "Paid Service"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:37:39,683", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:37:39,684", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:37:40,513", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Select the top 10 OEM parts by consumption quantity under 'Paid Service' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 16:37:40,514", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM parts by consumption quantity under 'Paid Service' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:37:40,987", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:38:19,523", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:38:20,335", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:38:23,586", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under Charging from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:38:23,588", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:38:23,588", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:38:24,511", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 Local parts consumed under Charging between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:38:24,512", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 Local parts consumed under Charging between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:38:24,964", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:38:44,524", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:38:45,376", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:38:47,953", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under En-Route from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:38:47,959", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:38:47,959", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:38:48,812", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 consumed local parts under En-Route status between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:38:48,812", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed local parts under En-Route status between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:38:49,342", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:39:10,377", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:39:11,832", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:39:15,373", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under Accessories" from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:39:15,380", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:39:15,380", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:39:16,441", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed local parts under the Accessories product category between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:39:16,442", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local parts under the Accessories product category between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:39:16,909", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:41:02,169", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:41:02,896", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:41:06,485", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under "Bodyshop" from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:41:06,489", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:41:06,493", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:41:07,484", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Retrieve the top 10 consumed local parts under the 'Bodyshop' category between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 16:41:07,486", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local parts under the 'Bodyshop' category between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:41:07,976", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:41:39,893", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:41:40,746", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:41:43,144", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under "Paid Service"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:41:43,148", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:41:43,148", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:41:43,896", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Retrieve the top 10 consumed local parts under 'Paid Service' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 16:41:43,897", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local parts under 'Paid Service' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:41:44,337", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:42:53,324", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:42:54,913", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:42:59,639", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Local part under "Free Service"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:42:59,647", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:42:59,647", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:43:00,459", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Retrieve the top 10 consumed local parts under 'Free Service' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 16:43:00,460", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local parts under 'Free Service' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:43:00,968", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:43:24,745", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:43:27,045", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:43:33,974", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM Labour under Repair from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:43:33,981", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:43:33,983", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:43:34,847", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 OEM Labour items consumed under Repair between 01-Jan-2024 and 31-Jan-2024, ordered by consumption quantity descending.'}"}
{"timestamp": "2025-07-03 16:43:34,854", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM Labour items consumed under Repair between 01-Jan-2024 and 31-Jan-2024, ordered by consumption quantity descending."}
{"timestamp": "2025-07-03 16:43:35,258", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:44:28,498", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:44:29,853", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:44:32,625", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM Labour under Charging from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:44:32,632", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:44:32,632", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:44:33,619", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 OEM Labour items by consumption under Charging between 01-Jan-2024 and 31-Jan-2024.'}"}
{"timestamp": "2025-07-03 16:44:33,620", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM Labour items by consumption under Charging between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-03 16:44:34,183", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:44:53,184", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:44:55,507", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:44:58,364", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Dealer Labour under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:44:58,370", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:44:58,370", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:44:59,108", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 Dealer Labour consumption under Repair from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:44:59,108", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 Dealer Labour consumption under Repair from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-03 16:44:59,565", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:45:36,007", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:45:39,945", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:45:42,929", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM Labour consumption under    Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:45:42,936", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:45:42,938", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:45:43,726", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the Top 10 Dealers with the highest OEM Labour consumption for Repair orders between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:45:43,727", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM Labour consumption for Repair orders between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:45:44,153", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:46:26,471", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:46:27,811", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:46:33,471", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 5 Dealer Zone & Area Office (Dealer Area Office) with highest  OEM Labour consumption under    Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:46:33,481", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:46:33,481", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:46:34,258", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 5 Dealer Zones and Dealer Area Offices with the highest OEM Labour consumption under Repair between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:46:34,258", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 Dealer Zones and Dealer Area Offices with the highest OEM Labour consumption under Repair between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:46:34,720", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:47:12,909", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:47:13,988", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:47:16,945", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 5 Dealer Zone & Area Office (Dealer Area Office) with highest  Dealer Labour consumption under    Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:47:16,953", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:47:16,953", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:47:17,785", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 5 Dealer Zones and their corresponding Dealer Area Offices with the highest Dealer Labour consumption under Repair between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-03 16:47:17,785", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 Dealer Zones and their corresponding Dealer Area Offices with the highest Dealer Labour consumption under Repair between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:47:18,220", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:47:45,829", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:47:47,826", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:47:53,798", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Top 10 OEM Labour which has been replaced (Consumed) in XX (MODEL_GROP) & (FAMLY_DESC from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:47:53,805", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:47:53,805", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:47:54,717", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Retrieve the top 10 OEM Labour items that have been replaced (consumed) for MODEL_GROP = 'XX' and FAMLY_DESC = 'XX' between 01-Jan-2024 and 31-Dec-2024."}"}
{"timestamp": "2025-07-03 16:47:54,717", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 OEM Labour items that have been replaced (consumed) for MODEL_GROP = 'XX' and FAMLY_DESC = 'XX' between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-03 16:47:55,170", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:49:39,482", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:49:40,835", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:50:18,318", "logger": "app", "level": "INFO", "message": "Received /submit request with query: provide the list of top 10 consumed OEM Labour under repair from 01-jan -2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:50:18,322", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:50:18,322", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:50:20,321", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 OEM Labour items consumed under repair orders between 01-jan-2024 and 31-jan-2024, ranked by quantity or cost.'}"}
{"timestamp": "2025-07-03 16:50:20,322", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM Labour items consumed under repair orders between 01-jan-2024 and 31-jan-2024, ranked by quantity or cost."}
{"timestamp": "2025-07-03 16:50:20,846", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:50:43,477", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:50:45,776", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-03 16:51:22,474", "logger": "app", "level": "INFO", "message": "Received /submit request with query: provide the list of top 10 consumed local part under charging from 01-jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:51:22,480", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:51:22,480", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:51:23,387", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed local parts under charging between 01-jan-2024 and 31-dec-2024.'}"}
{"timestamp": "2025-07-03 16:51:23,387", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed local parts under charging between 01-jan-2024 and 31-dec-2024."}
{"timestamp": "2025-07-03 16:51:23,839", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-03 16:51:32,062", "logger": "app", "level": "INFO", "message": "Received /submit request with query: provide the list of top 10 consumed OEM Labour under repair from 01-jan -2024 to 31-jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-03 16:51:32,070", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-03 16:51:32,071", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-03 16:51:32,842", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 OEM Labour items consumed under repair between 01-jan-2024 and 31-jan-2024, ordered by consumption quantity descending.'}"}
{"timestamp": "2025-07-03 16:51:32,842", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 OEM Labour items consumed under repair between 01-jan-2024 and 31-jan-2024, ordered by consumption quantity descending."}
{"timestamp": "2025-07-03 16:51:33,569", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 09:24:24,525", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 09:24:40,029", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 09:29:22,522", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 09:29:27,675", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Dealer Labour under Charging from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 09:29:27,680", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 09:29:27,680", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 09:29:28,727", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the Top 10 consumed Dealer Labour under Charging from 01-Jan-2024 to 31-Dec-2024"}
{"timestamp": "2025-07-04 09:29:29,165", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 09:29:47,046", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 854, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-04 09:29:50,203", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 09:31:51,520", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Give all the parts consumption details for the ros created in between 01-jan-2025 to 02-jan-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 09:31:51,526", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 09:31:51,527", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 09:31:52,437", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all parts consumption details for repair orders created between 01-jan-2025 and 02-jan-2025."}
{"timestamp": "2025-07-04 09:31:52,773", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 09:33:21,863", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 09:33:23,748", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Query is about top 10 dealers, why the LLM is interpreting as "Dealer ZoneS", section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 09:33:23,757", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 09:33:23,758", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 09:33:24,677", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 dealers based on relevant metrics without interpreting Dealer as Dealer Zones."}
{"timestamp": "2025-07-04 09:33:25,044", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 09:34:05,757", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 09:34:09,315", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under    Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 09:34:09,319", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 09:34:09,322", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 09:34:10,293", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption for Repair orders between 01-Jan-2024 and 30-Jun-2025."}
{"timestamp": "2025-07-04 09:34:10,996", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 09:35:49,493", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 09:50:17,491", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed Dealer Labour under Charging from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 09:50:17,496", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 09:50:17,496", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 09:50:18,467", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the Top 10 consumed Dealer Labour under Charging from 01-Jan-2024 to 31-Dec-2024"}
{"timestamp": "2025-07-04 09:50:18,802", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 09:58:30,512", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 09:58:32,590", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under    Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 09:58:32,598", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 09:58:32,599", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 09:58:33,551", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the Top 10 Dealers with the highest OEM part consumption under Repair from 01-Jan-2024 to 30-Jun-2025"}
{"timestamp": "2025-07-04 09:58:33,921", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 09:59:21,109", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 09:59:31,440", "logger": "app", "level": "INFO", "message": "Received /submit request with query: get me the seveice advisor and the technician name, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 09:59:31,447", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 09:59:31,447", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 09:59:32,200", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the service advisor and technician names for repair orders."}
{"timestamp": "2025-07-04 09:59:32,595", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 10:00:52,887", "logger": "app", "level": "INFO", "message": "Received /submit request with query: get all distinct details related to model family desc and dealer details about this, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 10:00:52,893", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the service advisor and technician names for repair orders."}
{"timestamp": "2025-07-04 10:00:52,893", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the service advisor and technician names for repair orders.'}]"}
{"timestamp": "2025-07-04 10:00:53,909", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all distinct details related to model family description and dealer details for repair orders."}
{"timestamp": "2025-07-04 10:00:54,319", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 10:23:00,792", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 10:23:04,066", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 10:23:13,642", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give all the customer verbatim, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 10:23:13,651", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 10:23:13,651", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 10:23:14,398", "logger": "app", "level": "ERROR", "message": "Prompt generation error: Error code: 400 - {'error': {'message': "The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766", 'type': None, 'param': 'prompt', 'code': 'content_filter', 'status': 400, 'innererror': {'code': 'ResponsibleAIPolicyViolation', 'content_filter_result': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': True, 'detected': True}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}}}"}
{"timestamp": "2025-07-04 10:24:16,080", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 10:24:23,728", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give me all customer verbatim, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 10:24:23,728", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 10:24:23,728", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 10:24:24,665", "logger": "app", "level": "ERROR", "message": "Prompt generation error: Error code: 400 - {'error': {'message': "The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766", 'type': None, 'param': 'prompt', 'code': 'content_filter', 'status': 400, 'innererror': {'code': 'ResponsibleAIPolicyViolation', 'content_filter_result': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': True, 'detected': True}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}}}"}
{"timestamp": "2025-07-04 10:26:43,996", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 10:27:05,684", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 10:27:13,154", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give 10 customer verbatim, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 10:27:13,161", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 10:27:13,161", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 10:27:13,892", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve 10 customer verbatim entries from the customer feedback data."}
{"timestamp": "2025-07-04 10:27:14,256", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 10:27:30,901", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 854, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-04 10:27:37,186", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 10:27:48,434", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give 10 customer verbatim, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 10:27:48,442", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 10:27:48,444", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 10:27:49,179", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve 10 customer verbatim entries from the customer feedback data."}
{"timestamp": "2025-07-04 10:27:49,551", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 11:39:37,828", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 11:39:41,175", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 12:06:23,352", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 12:06:26,827", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Give me the service advisor and the technician name for repair order number RO25D000730, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 12:06:26,836", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 12:06:26,836", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 12:06:27,701", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Select the service advisor and technician name for the repair order number 'RO25D000730'."}"}
{"timestamp": "2025-07-04 12:06:27,709", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the service advisor and technician name for the repair order number 'RO25D000730'."}
{"timestamp": "2025-07-04 14:36:33,063", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 14:36:34,208", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 14:36:37,809", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under    Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 14:36:37,809", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 14:36:37,809", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 14:36:38,587", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the Top 10 Dealers with the highest OEM part consumption under Repair between 01-Jan-2024 and 30-Jun-2025.'}"}
{"timestamp": "2025-07-04 14:36:38,589", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption under Repair between 01-Jan-2024 and 30-Jun-2025."}
{"timestamp": "2025-07-04 14:36:39,082", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 14:37:14,618", "logger": "app", "level": "INFO", "message": "Received /submit request with query: can you only show the counts which is greater then 3000, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 14:37:14,624", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 14:37:14,624", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 14:37:15,359", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Show only the records where the count is greater than 3000.'}"}
{"timestamp": "2025-07-04 14:37:15,359", "logger": "app", "level": "INFO", "message": "reframed query after modification: Show only the records where the count is greater than 3000."}
{"timestamp": "2025-07-04 14:42:15,527", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 14:42:18,785", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 14:42:29,082", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 14:42:29,093", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 14:42:29,094", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 14:42:30,067", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption in repair orders from 01-Jan-2024 to 30-Jun-2025."}
{"timestamp": "2025-07-04 14:42:30,455", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 14:42:46,230", "logger": "app", "level": "INFO", "message": "Received /submit request with query: show me greater then 20000, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 14:42:46,231", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 14:42:46,231", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 14:42:47,021", "logger": "app", "level": "INFO", "message": "reframed query after modification: Show all repair orders with amounts greater than 20000"}
{"timestamp": "2025-07-04 14:42:47,720", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 14:46:07,677", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 14:50:17,792", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 14:50:27,438", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 14:50:27,443", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 14:50:27,449", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 14:50:28,169", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the Top 10 Dealers with the highest OEM part consumption under Repair for service dates between 01-Jan-2024 and 30-Jun-2025.'}"}
{"timestamp": "2025-07-04 14:50:28,174", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption under Repair for service dates between 01-Jan-2024 and 30-Jun-2025."}
{"timestamp": "2025-07-04 14:50:28,520", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 14:51:18,741", "logger": "app", "level": "INFO", "message": "Received /submit request with query: only for those where total count is greater than 3000, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 14:51:18,755", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 14:51:18,757", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 14:51:19,369", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve records where the total count is greater than 3000.'}"}
{"timestamp": "2025-07-04 14:51:19,369", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve records where the total count is greater than 3000."}
{"timestamp": "2025-07-04 14:57:24,280", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 14:57:31,475", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 14:57:31,484", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 14:57:31,484", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 14:57:32,529", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption in repair orders from 01-Jan-2024 to 30-Jun-2025."}
{"timestamp": "2025-07-04 14:57:32,961", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 14:58:30,700", "logger": "app", "level": "INFO", "message": "Received /submit request with query: only for those where oem part is greater then 100000, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 14:58:30,707", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 14:58:30,710", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 14:58:31,531", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve repair order details where the OEM part cost is greater than 100000"}
{"timestamp": "2025-07-04 14:58:31,922", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:03:32,380", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 15:03:33,409", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:03:33,422", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:03:33,429", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:03:33,429", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:03:34,611", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption in repair orders from 01-Jan-2024 to 30-Jun-2025."}
{"timestamp": "2025-07-04 15:03:35,010", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:04:18,141", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give me where it is greater then 100000, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:04:18,149", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:04:18,149", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:04:18,954", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve records where a relevant numeric value is greater than 100000"}
{"timestamp": "2025-07-04 15:04:19,396", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:04:24,023", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 855, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-04 15:04:48,645", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:04:53,209", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:04:53,215", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:04:53,217", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:04:54,291", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption in repair orders from 01-Jan-2024 to 30-Jun-2025."}
{"timestamp": "2025-07-04 15:04:54,651", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:05:28,613", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give me where it is greater then 100000, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:05:28,619", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:05:28,619", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:05:29,413", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve records where a relevant numeric value is greater than 100000"}
{"timestamp": "2025-07-04 15:05:29,801", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:16:29,570", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 15:16:35,500", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:16:41,828", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:16:41,838", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:16:41,838", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:16:42,828", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption in repair orders from 01-Jan-2024 to 30-Jun-2025."}
{"timestamp": "2025-07-04 15:16:43,198", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:17:05,778", "logger": "app", "level": "INFO", "message": "Received /submit request with query: only where the oem part consumtion is greater then 30000, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:17:05,786", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:17:05,786", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:17:06,576", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve records where the OEM part consumption is greater than 30000"}
{"timestamp": "2025-07-04 15:17:06,980", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:18:35,225", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 15:28:12,165", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:28:21,594", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Repair from 01-Jan-2024 to 30-Jun-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:28:21,600", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:28:21,600", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:28:22,746", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption in repair orders from 01-Jan-2024 to 30-Jun-2025."}
{"timestamp": "2025-07-04 15:28:23,128", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:29:07,546", "logger": "app", "level": "INFO", "message": "Received /submit request with query: only  give where the oem part consumption is greater then 100000, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:29:07,555", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:29:07,555", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:29:08,464", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve records where the OEM part consumption is greater than 100000"}
{"timestamp": "2025-07-04 15:29:08,888", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:32:22,531", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 15:32:33,080", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 15:40:42,482", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:40:44,348", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:40:46,916", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:40:46,922", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:40:46,922", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:40:47,700", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-04 15:40:47,700", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Charging category from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-04 15:40:48,060", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:43:39,275", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:43:44,368", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:43:52,036", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM Labour under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:43:52,038", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:43:52,038", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:43:52,944", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the top 10 consumed OEM Labour items under Charging from 01-Jan-2024 to 31-Jan-2024.'}"}
{"timestamp": "2025-07-04 15:43:52,948", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the top 10 consumed OEM Labour items under Charging from 01-Jan-2024 to 31-Jan-2024."}
{"timestamp": "2025-07-04 15:43:53,389", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:45:36,029", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:45:38,889", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:45:41,862", "logger": "app", "level": "INFO", "message": "Received /submit request with query: "Give me the Top 5 reported VoC's which repeat the most   for the period 01-Jan-2024 to 31-Mar-2024    ", section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:45:41,872", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:45:41,873", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:45:42,671", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the Top 5 reported Customer Feedback entries with the highest number of repeats for the period from 01-Jan-2024 to 31-Mar-2024.'}"}
{"timestamp": "2025-07-04 15:45:42,675", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 5 reported Customer Feedback entries with the highest number of repeats for the period from 01-Jan-2024 to 31-Mar-2024."}
{"timestamp": "2025-07-04 15:45:43,091", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:50:05,279", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:50:10,694", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Display count of distinct labour descriptions for the RO: RO25D000730, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:50:10,705", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:50:10,705", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:50:11,342", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the count of distinct labour descriptions for the Repair Order Number RO25D000730.'}"}
{"timestamp": "2025-07-04 15:50:11,344", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the count of distinct labour descriptions for the Repair Order Number RO25D000730."}
{"timestamp": "2025-07-04 15:50:12,065", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:52:40,621", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:52:42,074", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Give me the service advisor and the technician name, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:52:42,082", "logger": "app", "level": "INFO", "message": "Chat history: user: Select the count of distinct labour descriptions for the Repair Order Number RO25D000730."}
{"timestamp": "2025-07-04 15:52:42,082", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Select the count of distinct labour descriptions for the Repair Order Number RO25D000730.'}]"}
{"timestamp": "2025-07-04 15:52:42,801", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select the service advisor and technician name for the Repair Order Number RO25D000730.'}"}
{"timestamp": "2025-07-04 15:52:42,802", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the service advisor and technician name for the Repair Order Number RO25D000730."}
{"timestamp": "2025-07-04 15:52:53,839", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:53:12,965", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all dealers in a North  zone along with their Locations, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:53:12,975", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Please rephrase or add more details to your question as I am not able to assess the Intended Use case"}
{"timestamp": "2025-07-04 15:53:12,975", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Select the count of distinct labour descriptions for the Repair Order Number RO25D000730.'}, {'role': 'assistant', 'content': 'Please rephrase or add more details to your question as I am not able to assess the Intended Use case'}]"}
{"timestamp": "2025-07-04 15:53:13,614", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': "Select all dealers and their locations where the Dealer Zone is 'North'."}"}
{"timestamp": "2025-07-04 15:53:13,618", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select all dealers and their locations where the Dealer Zone is 'North'."}
{"timestamp": "2025-07-04 15:53:22,781", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:53:35,827", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show the total labour amount and parts amount for each RO from 01-Jan-2025 to 31-Jan-2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:53:35,837", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Please rephrase or add more details to your question as I am not able to assess the Intended Use case"}
{"timestamp": "2025-07-04 15:53:35,837", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Select the count of distinct labour descriptions for the Repair Order Number RO25D000730.'}, {'role': 'assistant', 'content': 'Please rephrase or add more details to your question as I am not able to assess the Intended Use case'}, {'role': 'assistant', 'content': 'Please rephrase or add more details to your question as I am not able to assess the Intended Use case'}]"}
{"timestamp": "2025-07-04 15:53:36,651", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the total labour amount and total parts amount grouped by Repair Order Number for service dates between 01-Jan-2025 and 31-Jan-2025.'}"}
{"timestamp": "2025-07-04 15:53:36,651", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total labour amount and total parts amount grouped by Repair Order Number for service dates between 01-Jan-2025 and 31-Jan-2025."}
{"timestamp": "2025-07-04 15:53:37,651", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 15:56:57,725", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:56:59,641", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Get all ROs closed within last 180 days, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:56:59,656", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Please rephrase or add more details to your question as I am not able to assess the Intended Use case"}
{"timestamp": "2025-07-04 15:56:59,657", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Select the count of distinct labour descriptions for the Repair Order Number RO25D000730.'}, {'role': 'assistant', 'content': 'Please rephrase or add more details to your question as I am not able to assess the Intended Use case'}, {'role': 'assistant', 'content': 'Please rephrase or add more details to your question as I am not able to assess the Intended Use case'}]"}
{"timestamp": "2025-07-04 15:57:00,350", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve all Repair Order Numbers with Service Date within the last 180 days.'}"}
{"timestamp": "2025-07-04 15:57:00,350", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all Repair Order Numbers with Service Date within the last 180 days."}
{"timestamp": "2025-07-04 15:57:42,678", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 15:57:50,010", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Get all ROs closed within last 180 days, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 15:57:50,017", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 15:57:50,019", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 15:57:50,840", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all repair orders closed within the last 180 days"}
{"timestamp": "2025-07-04 15:57:51,202", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 16:00:24,739", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:00:26,493", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all parts with a discount greater than 10% for the RPs created in Jan'25, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 16:00:26,499", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 16:00:26,499", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 16:00:27,462", "logger": "app", "level": "INFO", "message": "reframed query after modification: List all parts with a discount greater than 10% for repair orders created in January 2025"}
{"timestamp": "2025-07-04 16:00:28,599", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 16:03:10,349", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:03:12,448", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show the number of ROs per dealer for the month of Jan'25, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 16:03:12,455", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-04 16:03:12,455", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-04 16:03:13,339", "logger": "app", "level": "INFO", "message": "reframed query after modification: Count the number of repair orders per dealer for January 2025"}
{"timestamp": "2025-07-04 16:03:13,717", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 16:06:19,657", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:06:22,041", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show the number of ROs per dealer for the month of Jan'25, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 16:06:22,053", "logger": "app", "level": "INFO", "message": "Chat history: user: Count the number of repair orders per dealer for January 2025"}
{"timestamp": "2025-07-04 16:06:22,053", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Count the number of repair orders per dealer for January 2025'}]"}
{"timestamp": "2025-07-04 16:06:22,865", "logger": "app", "level": "INFO", "message": "reframed query after modification: Count the number of repair orders per dealer for January 2025"}
{"timestamp": "2025-07-04 16:06:23,568", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 16:06:27,915", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:06:36,415", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Get all ROs closed within last 180 days, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 16:06:36,425", "logger": "app", "level": "INFO", "message": "Chat history: user: Count the number of repair orders per dealer for January 2025"}
{"timestamp": "2025-07-04 16:06:36,425", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Count the number of repair orders per dealer for January 2025'}]"}
{"timestamp": "2025-07-04 16:06:37,373", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all repair orders closed within the last 180 days and count the number of repair orders per dealer for January 2025"}
{"timestamp": "2025-07-04 16:06:38,168", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 16:07:06,223", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:07:08,881", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:07:23,789", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under "Paid Service"  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 16:07:23,794", "logger": "app", "level": "INFO", "message": "Chat history: user: Count the number of repair orders per dealer for January 2025"}
{"timestamp": "2025-07-04 16:07:23,796", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Count the number of repair orders per dealer for January 2025'}]"}
{"timestamp": "2025-07-04 16:07:24,719", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the Top 10 consumed OEM parts under 'Paid Service' from 01-Jan-2024 to 31-Dec-2024"}
{"timestamp": "2025-07-04 16:07:25,152", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 16:22:28,025", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:23:05,249", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 16:23:14,457", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:23:15,506", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:23:20,166", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 16:23:20,176", "logger": "app", "level": "INFO", "message": "Chat history: user: Count the number of repair orders per dealer for January 2025"}
{"timestamp": "2025-07-04 16:23:20,178", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Count the number of repair orders per dealer for January 2025'}]"}
{"timestamp": "2025-07-04 16:23:21,370", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the Top 10 consumed OEM parts under Repair from 01-Jan-2024 to 31-Jan-2024"}
{"timestamp": "2025-07-04 16:23:21,756", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 16:24:21,164", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 16:24:35,449", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:24:36,502", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:25:02,864", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:25:03,307", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:25:03,564", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:25:05,279", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 16:25:09,444", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 16:25:09,456", "logger": "app", "level": "INFO", "message": "Chat history: user: Count the number of repair orders per dealer for January 2025"}
{"timestamp": "2025-07-04 16:25:09,456", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Count the number of repair orders per dealer for January 2025'}]"}
{"timestamp": "2025-07-04 16:25:10,376", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the Top 10 consumed OEM parts under Repair from 01-Jan-2024 to 31-Jan-2024"}
{"timestamp": "2025-07-04 16:25:10,752", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 16:28:55,853", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 18:20:00,693", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-04 18:20:03,050", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 18:20:07,187", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 18:20:07,654", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-04 18:20:12,635", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 18:20:12,647", "logger": "app", "level": "INFO", "message": "Chat history: user: Find the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-04 18:20:12,648", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Find the top 5 models with the highest seat capacity.'}]"}
{"timestamp": "2025-07-04 18:20:14,850", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-04 18:20:15,249", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-04 18:20:32,787", "logger": "app", "level": "INFO", "message": "Received /submit request with query: where quantitiy greater then 1000, section: Azure-SQL-DB"}
{"timestamp": "2025-07-04 18:20:32,799", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-04 18:20:32,799", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024.'}]"}
{"timestamp": "2025-07-04 18:20:33,574", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024 where quantity is greater than 1000."}
{"timestamp": "2025-07-04 18:20:34,275", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:16:43,313", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 11:17:36,285", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:17:42,962", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:17:46,244", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Display count of distinct labour descriptions for the RO: RO25D000730, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:17:46,251", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024 where quantity is greater than 1000."}
{"timestamp": "2025-07-07 11:17:46,251", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024 where quantity is greater than 1000.'}]"}
{"timestamp": "2025-07-07 11:17:47,056", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of distinct labour descriptions for the Repair Order Number RO25D000730."}
{"timestamp": "2025-07-07 11:17:47,810", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:24:56,697", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:24:58,590", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which models have automatic transmission?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:24:58,594", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of distinct labour descriptions for the Repair Order Number RO25D000730."}
{"timestamp": "2025-07-07 11:24:58,594", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of distinct labour descriptions for the Repair Order Number RO25D000730.'}]"}
{"timestamp": "2025-07-07 11:24:59,290", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of models that have automatic transmission."}
{"timestamp": "2025-07-07 11:24:59,698", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:25:34,510", "logger": "app", "level": "INFO", "message": "Received /submit request with query: list those have not, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:25:34,513", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of models that have automatic transmission."}
{"timestamp": "2025-07-07 11:25:34,516", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of models that have automatic transmission.'}]"}
{"timestamp": "2025-07-07 11:25:35,121", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of models that do not have automatic transmission."}
{"timestamp": "2025-07-07 11:25:35,504", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:26:28,781", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:26:30,293", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all repair orders by chassis number or OEM model code., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:26:30,298", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of models that do not have automatic transmission."}
{"timestamp": "2025-07-07 11:26:30,299", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of models that do not have automatic transmission.'}]"}
{"timestamp": "2025-07-07 11:26:31,196", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of all repair orders including chassis number and OEM model code."}
{"timestamp": "2025-07-07 11:26:31,648", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:28:40,383", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:28:42,101", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the status distribution of repair orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:28:42,101", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of all repair orders including chassis number and OEM model code."}
{"timestamp": "2025-07-07 11:28:42,101", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of all repair orders including chassis number and OEM model code.'}]"}
{"timestamp": "2025-07-07 11:28:42,833", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the status distribution of all repair orders including chassis number and OEM model code."}
{"timestamp": "2025-07-07 11:28:43,217", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:30:17,651", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:30:19,457", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What are the top 10 labour types billed in March 2025 across all dealers, along with total billed amount and discount given, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:30:19,459", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the status distribution of all repair orders including chassis number and OEM model code."}
{"timestamp": "2025-07-07 11:30:19,459", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the status distribution of all repair orders including chassis number and OEM model code.'}]"}
{"timestamp": "2025-07-07 11:30:20,404", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 labour types billed in March 2025 across all dealers, including the total billed amount and discount given for each labour type."}
{"timestamp": "2025-07-07 11:30:20,745", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:30:53,855", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all active dealers under the North Zone with their sales and service email IDs, mobile numbers, and location codes., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:30:53,862", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 labour types billed in March 2025 across all dealers, including the total billed amount and discount given for each labour type."}
{"timestamp": "2025-07-07 11:30:53,863", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 labour types billed in March 2025 across all dealers, including the total billed amount and discount given for each labour type.'}]"}
{"timestamp": "2025-07-07 11:30:54,624", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all active dealers in the North Zone, including their sales and service email IDs, mobile numbers, and location codes."}
{"timestamp": "2025-07-07 11:30:55,046", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:32:49,874", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:32:51,070", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all repair orders from January 2025 where the vehicle had a government tag and was serviced under the Repair category., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:32:51,074", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all active dealers in the North Zone, including their sales and service email IDs, mobile numbers, and location codes."}
{"timestamp": "2025-07-07 11:32:51,074", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all active dealers in the North Zone, including their sales and service email IDs, mobile numbers, and location codes.'}]"}
{"timestamp": "2025-07-07 11:32:52,071", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all repair orders from January 2025 where the vehicle had a government tag and was serviced under the Repair category, including details of active dealers in the North Zone with their sales and service email IDs, mobile numbers, and location codes."}
{"timestamp": "2025-07-07 11:32:52,428", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:33:12,991", "logger": "app", "level": "INFO", "message": "Received /submit request with query: which is not under goverment tag, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:33:12,995", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all repair orders from January 2025 where the vehicle had a government tag and was serviced under the Repair category, including details of active dealers in the North Zone with their sales and service email IDs, mobile numbers, and location codes."}
{"timestamp": "2025-07-07 11:33:12,996", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all repair orders from January 2025 where the vehicle had a government tag and was serviced under the Repair category, including details of active dealers in the North Zone with their sales and service email IDs, mobile numbers, and location codes.'}]"}
{"timestamp": "2025-07-07 11:33:13,895", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all repair orders from January 2025 where the vehicle did not have a government tag and was serviced under the Repair category, including details of active dealers in the North Zone with their sales and service email IDs, mobile numbers, and location codes."}
{"timestamp": "2025-07-07 11:33:14,286", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:33:24,963", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:33:40,518", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all repair orders from January 2025 where the vehicle had a no government tag and was not serviced under the  Repair category., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:33:40,521", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all repair orders from January 2025 where the vehicle did not have a government tag and was serviced under the Repair category, including details of active dealers in the North Zone with their sales and service email IDs, mobile numbers, and location codes."}
{"timestamp": "2025-07-07 11:33:40,521", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all repair orders from January 2025 where the vehicle did not have a government tag and was serviced under the Repair category, including details of active dealers in the North Zone with their sales and service email IDs, mobile numbers, and location codes.'}]"}
{"timestamp": "2025-07-07 11:33:41,329", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all repair orders from January 2025 where the vehicle did not have a government tag and was not serviced under the 'Repair' category."}
{"timestamp": "2025-07-07 11:33:41,813", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:34:41,332", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:34:43,278", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which dealers recorded the highest labour amount billed for repairs in the Mechanical service group during April 2025?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:34:43,283", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all repair orders from January 2025 where the vehicle did not have a government tag and was not serviced under the 'Repair' category."}
{"timestamp": "2025-07-07 11:34:43,283", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': "Retrieve all repair orders from January 2025 where the vehicle did not have a government tag and was not serviced under the 'Repair' category."}]"}
{"timestamp": "2025-07-07 11:34:43,949", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the dealers with the highest labour amount billed for repairs in the Mechanical service group during April 2025."}
{"timestamp": "2025-07-07 11:34:44,362", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:34:59,071", "logger": "app", "level": "INFO", "message": "Received /submit request with query: for january month, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:34:59,076", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the dealers with the highest labour amount billed for repairs in the Mechanical service group during April 2025."}
{"timestamp": "2025-07-07 11:34:59,076", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the dealers with the highest labour amount billed for repairs in the Mechanical service group during April 2025.'}]"}
{"timestamp": "2025-07-07 11:34:59,774", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the dealers with the highest labour amount billed for repairs in the Mechanical service group during January 2025."}
{"timestamp": "2025-07-07 11:35:00,154", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:36:22,393", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:36:24,702", "logger": "app", "level": "INFO", "message": "Received /submit request with query: ow many repeat repairs and revisits were done in March 2025, and what models are they most associated with?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:36:24,708", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the dealers with the highest labour amount billed for repairs in the Mechanical service group during January 2025."}
{"timestamp": "2025-07-07 11:36:24,708", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the dealers with the highest labour amount billed for repairs in the Mechanical service group during January 2025.'}]"}
{"timestamp": "2025-07-07 11:36:25,671", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of repeat repairs and revisits done in March 2025, along with the models most associated with these repeat repairs and revisits."}
{"timestamp": "2025-07-07 11:36:26,042", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:36:42,822", "logger": "app", "level": "INFO", "message": "Received /submit request with query: in 2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:36:42,826", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of repeat repairs and revisits done in March 2025, along with the models most associated with these repeat repairs and revisits."}
{"timestamp": "2025-07-07 11:36:42,826", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of repeat repairs and revisits done in March 2025, along with the models most associated with these repeat repairs and revisits.'}]"}
{"timestamp": "2025-07-07 11:36:43,624", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of repeat repairs and revisits done in the year 2024, along with the models most associated with these repeat repairs and revisits."}
{"timestamp": "2025-07-07 11:36:44,033", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:37:27,841", "logger": "app", "level": "INFO", "message": "Received /submit request with query: where repeat repair count is 1, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:37:27,847", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of repeat repairs and revisits done in the year 2024, along with the models most associated with these repeat repairs and revisits."}
{"timestamp": "2025-07-07 11:37:27,847", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of repeat repairs and revisits done in the year 2024, along with the models most associated with these repeat repairs and revisits.'}]"}
{"timestamp": "2025-07-07 11:37:28,797", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of repeat repairs and revisits done in the year 2024 where the repeat repair count is 1, along with the models most associated with these repeat repairs and revisits."}
{"timestamp": "2025-07-07 11:37:29,171", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:37:46,280", "logger": "app", "level": "INFO", "message": "Received /submit request with query: more then 1, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:37:46,280", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of repeat repairs and revisits done in the year 2024 where the repeat repair count is 1, along with the models most associated with these repeat repairs and revisits."}
{"timestamp": "2025-07-07 11:37:46,280", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of repeat repairs and revisits done in the year 2024 where the repeat repair count is 1, along with the models most associated with these repeat repairs and revisits.'}]"}
{"timestamp": "2025-07-07 11:37:47,323", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of repeat repairs and revisits done in the year 2024 where the repeat repair count is more than 1, along with the models most associated with these repeat repairs and revisits."}
{"timestamp": "2025-07-07 11:37:47,705", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:40:54,571", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:40:58,940", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Whats the average turnaround time (in days) between RO open and RO close for express services in the last 3 months?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:40:58,943", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of repeat repairs and revisits done in the year 2024 where the repeat repair count is more than 1, along with the models most associated with these repeat repairs and revisits."}
{"timestamp": "2025-07-07 11:40:58,943", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of repeat repairs and revisits done in the year 2024 where the repeat repair count is more than 1, along with the models most associated with these repeat repairs and revisits.'}]"}
{"timestamp": "2025-07-07 11:41:00,655", "logger": "app", "level": "INFO", "message": "reframed query after modification: Calculate the average turnaround time in days between Repair Order open and Repair Order close dates for express services in the last 3 months."}
{"timestamp": "2025-07-07 11:41:01,271", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:41:16,563", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:41:24,174", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Whats the average turnaround time (in days) between RO open and RO close for express services in 2024?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:41:24,176", "logger": "app", "level": "INFO", "message": "Chat history: user: Calculate the average turnaround time in days between Repair Order open and Repair Order close dates for express services in the last 3 months."}
{"timestamp": "2025-07-07 11:41:24,176", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Calculate the average turnaround time in days between Repair Order open and Repair Order close dates for express services in the last 3 months.'}]"}
{"timestamp": "2025-07-07 11:41:25,575", "logger": "app", "level": "INFO", "message": "reframed query after modification: Calculate the average turnaround time in days between Repair Order open and Repair Order close dates for express services in the year 2024."}
{"timestamp": "2025-07-07 11:41:26,062", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:42:57,991", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:42:59,338", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total revenue generated from service ROs in the South Zone during Q1 2025, broken down by model group, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:42:59,341", "logger": "app", "level": "INFO", "message": "Chat history: user: Calculate the average turnaround time in days between Repair Order open and Repair Order close dates for express services in the year 2024."}
{"timestamp": "2025-07-07 11:42:59,341", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Calculate the average turnaround time in days between Repair Order open and Repair Order close dates for express services in the year 2024.'}]"}
{"timestamp": "2025-07-07 11:43:00,051", "logger": "app", "level": "INFO", "message": "reframed query after modification: Calculate the total revenue generated from service Repair Orders in the South Zone during Q1 2025, broken down by model group."}
{"timestamp": "2025-07-07 11:43:00,460", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:43:41,766", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:43:43,032", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What are the top 10 labour types billed in March 2025 across all dealers, along with total billed amount and discount given, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:43:43,034", "logger": "app", "level": "INFO", "message": "Chat history: user: Calculate the total revenue generated from service Repair Orders in the South Zone during Q1 2025, broken down by model group."}
{"timestamp": "2025-07-07 11:43:43,034", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Calculate the total revenue generated from service Repair Orders in the South Zone during Q1 2025, broken down by model group.'}]"}
{"timestamp": "2025-07-07 11:43:43,868", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 labour types billed across all dealers in March 2025, including the total billed amount and total discount given for each labour type."}
{"timestamp": "2025-07-07 11:43:44,756", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:44:09,555", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:44:15,194", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What are the top 10 labour types billed in  2025 across all dealers, along with total billed amount and discount given, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:44:15,194", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 labour types billed across all dealers in March 2025, including the total billed amount and total discount given for each labour type."}
{"timestamp": "2025-07-07 11:44:15,194", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 labour types billed across all dealers in March 2025, including the total billed amount and total discount given for each labour type.'}]"}
{"timestamp": "2025-07-07 11:44:16,173", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 labour types billed across all dealers in the year 2025, including the total billed amount and total discount given for each labour type."}
{"timestamp": "2025-07-07 11:44:17,011", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:45:19,211", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:45:20,468", "logger": "app", "level": "INFO", "message": "Received /submit request with query: For the Labour Group 'Engine Repair', whats the average charged hours vs. standard hours across all repair orders in Q1, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:45:20,472", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 labour types billed across all dealers in the year 2025, including the total billed amount and total discount given for each labour type."}
{"timestamp": "2025-07-07 11:45:20,472", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 labour types billed across all dealers in the year 2025, including the total billed amount and total discount given for each labour type.'}]"}
{"timestamp": "2025-07-07 11:45:23,549", "logger": "app", "level": "INFO", "message": "reframed query after modification: For the Labour Group 'Engine Repair', retrieve the average charged hours and average standard hours across all repair orders in Q1 of the year 2025."}
{"timestamp": "2025-07-07 11:45:24,403", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:45:57,131", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:45:58,436", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which locations offered the highest average labour discount amount during warranty repairs in the last financial year, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:45:58,439", "logger": "app", "level": "INFO", "message": "Chat history: user: For the Labour Group 'Engine Repair', retrieve the average charged hours and average standard hours across all repair orders in Q1 of the year 2025."}
{"timestamp": "2025-07-07 11:45:58,439", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': "For the Labour Group 'Engine Repair', retrieve the average charged hours and average standard hours across all repair orders in Q1 of the year 2025."}]"}
{"timestamp": "2025-07-07 11:45:59,695", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the locations that offered the highest average labour discount amount during warranty repairs in the last financial year."}
{"timestamp": "2025-07-07 11:46:00,337", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:46:06,876", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:46:15,067", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which locations offered the highest average labour discount amount during warranty repairs in the last financial year, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:46:15,069", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the locations that offered the highest average labour discount amount during warranty repairs in the last financial year."}
{"timestamp": "2025-07-07 11:46:15,069", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the locations that offered the highest average labour discount amount during warranty repairs in the last financial year.'}]"}
{"timestamp": "2025-07-07 11:46:16,168", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the locations that offered the highest average labour discount amount during warranty repairs in the last financial year."}
{"timestamp": "2025-07-07 11:46:16,603", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:47:28,606", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:47:37,490", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which OEM parts had the highest discount (>15%) =2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:47:37,491", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the locations that offered the highest average labour discount amount during warranty repairs in the last financial year."}
{"timestamp": "2025-07-07 11:47:37,491", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the locations that offered the highest average labour discount amount during warranty repairs in the last financial year.'}]"}
{"timestamp": "2025-07-07 11:47:38,446", "logger": "app", "level": "INFO", "message": "reframed query after modification: List all OEM parts with a discount greater than 15% for repair orders in the year 2025."}
{"timestamp": "2025-07-07 11:47:38,914", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:48:39,651", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:48:41,247", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total consumption (quantity and value) of top 5 common parts for the Diesel segment vehicles in the last quarter, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:48:41,251", "logger": "app", "level": "INFO", "message": "Chat history: user: List all OEM parts with a discount greater than 15% for repair orders in the year 2025."}
{"timestamp": "2025-07-07 11:48:41,251", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'List all OEM parts with a discount greater than 15% for repair orders in the year 2025.'}]"}
{"timestamp": "2025-07-07 11:48:43,196", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total consumption in terms of quantity and value of the top 5 common parts for Diesel segment vehicles in the last quarter."}
{"timestamp": "2025-07-07 11:48:44,262", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:50:00,472", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:50:01,953", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Compare the usage and billing amount of OEM vs Local parts for repair orders in the East Zone during April 2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:50:01,959", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total consumption in terms of quantity and value of the top 5 common parts for Diesel segment vehicles in the last quarter."}
{"timestamp": "2025-07-07 11:50:01,959", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total consumption in terms of quantity and value of the top 5 common parts for Diesel segment vehicles in the last quarter.'}]"}
{"timestamp": "2025-07-07 11:50:02,873", "logger": "app", "level": "INFO", "message": "reframed query after modification: Compare the quantity and billing amount of OEM parts versus Local parts used in repair orders for the Dealer Zone East during the month of April 2025."}
{"timestamp": "2025-07-07 11:50:03,816", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:50:09,982", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:50:17,684", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Compare the usage and billing amount of OEM vs Local parts for repair orders in the East Zone during 2025, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:50:17,688", "logger": "app", "level": "INFO", "message": "Chat history: user: Compare the quantity and billing amount of OEM parts versus Local parts used in repair orders for the Dealer Zone East during the month of April 2025."}
{"timestamp": "2025-07-07 11:50:17,688", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Compare the quantity and billing amount of OEM parts versus Local parts used in repair orders for the Dealer Zone East during the month of April 2025.'}]"}
{"timestamp": "2025-07-07 11:50:18,898", "logger": "app", "level": "INFO", "message": "reframed query after modification: Compare the quantity and billing amount of OEM parts versus Local parts used in repair orders for the Dealer Zone East during the year 2025."}
{"timestamp": "2025-07-07 11:50:19,436", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:51:42,309", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:52:04,066", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What are the most frequently occurring customer complaint groups in repeat repair cases from  2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:52:04,069", "logger": "app", "level": "INFO", "message": "Chat history: user: Compare the quantity and billing amount of OEM parts versus Local parts used in repair orders for the Dealer Zone East during the year 2025."}
{"timestamp": "2025-07-07 11:52:04,069", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Compare the quantity and billing amount of OEM parts versus Local parts used in repair orders for the Dealer Zone East during the year 2025.'}]"}
{"timestamp": "2025-07-07 11:52:05,448", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the most frequently occurring customer complaint groups in repeat repair cases for the year 2024."}
{"timestamp": "2025-07-07 11:52:06,632", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:53:07,630", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:53:56,937", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Give me a summary of all customer verbatims related to 'delay in service' or 'vehicle not ready' across top 10 dealers., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:53:56,941", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the most frequently occurring customer complaint groups in repeat repair cases for the year 2024."}
{"timestamp": "2025-07-07 11:53:56,941", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the most frequently occurring customer complaint groups in repeat repair cases for the year 2024.'}]"}
{"timestamp": "2025-07-07 11:53:57,910", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve a summary of all customer verbatims related to 'delay in service' or 'vehicle not ready' for the top 10 dealers in repeat repair cases for the year 2024."}
{"timestamp": "2025-07-07 11:53:58,669", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:54:51,513", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:55:05,083", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which city and location codes recorded the highest number of negative customer feedback in  2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:55:05,093", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve a summary of all customer verbatims related to 'delay in service' or 'vehicle not ready' for the top 10 dealers in repeat repair cases for the year 2024."}
{"timestamp": "2025-07-07 11:55:05,094", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': "Retrieve a summary of all customer verbatims related to 'delay in service' or 'vehicle not ready' for the top 10 dealers in repeat repair cases for the year 2024."}]"}
{"timestamp": "2025-07-07 11:55:06,006", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the city and location codes that recorded the highest number of negative customer feedback in the year 2024."}
{"timestamp": "2025-07-07 11:55:06,450", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:55:22,598", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:55:25,123", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all active dealers under the North Zone with their sales and service email IDs, mobile numbers, and location codes., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:55:25,126", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the city and location codes that recorded the highest number of negative customer feedback in the year 2024."}
{"timestamp": "2025-07-07 11:55:25,126", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the city and location codes that recorded the highest number of negative customer feedback in the year 2024.'}]"}
{"timestamp": "2025-07-07 11:55:26,032", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all active dealers in the North Zone along with their sales and service email IDs, mobile numbers, and location codes."}
{"timestamp": "2025-07-07 11:55:26,946", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:56:40,124", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:56:46,690", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many dealers in each zone are mapped to the Passenger Vehicle (PV) product division and marked as active in 2025?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:56:46,691", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all active dealers in the North Zone along with their sales and service email IDs, mobile numbers, and location codes."}
{"timestamp": "2025-07-07 11:56:46,691", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all active dealers in the North Zone along with their sales and service email IDs, mobile numbers, and location codes.'}]"}
{"timestamp": "2025-07-07 11:56:47,663", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of active dealers in each Dealer Zone for the year 2025 who are mapped to the Passenger Vehicle (PV) product division."}
{"timestamp": "2025-07-07 11:56:48,166", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:57:04,074", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:57:08,328", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What are the top 5 models by billing revenue (parts + labour) for Petrol vehicles in the last quarter, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:57:08,331", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of active dealers in each Dealer Zone for the year 2025 who are mapped to the Passenger Vehicle (PV) product division."}
{"timestamp": "2025-07-07 11:57:08,331", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of active dealers in each Dealer Zone for the year 2025 who are mapped to the Passenger Vehicle (PV) product division.'}]"}
{"timestamp": "2025-07-07 11:57:09,338", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 models by billing revenue (parts + labour) for Petrol vehicles in the last quarter."}
{"timestamp": "2025-07-07 11:57:09,942", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:57:28,080", "logger": "app", "level": "INFO", "message": "Received /submit request with query: in 2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:57:28,084", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 models by billing revenue (parts + labour) for Petrol vehicles in the last quarter."}
{"timestamp": "2025-07-07 11:57:28,084", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 models by billing revenue (parts + labour) for Petrol vehicles in the last quarter.'}]"}
{"timestamp": "2025-07-07 11:57:30,709", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 models by billing revenue (parts + labour) for Petrol vehicles in the year 2024."}
{"timestamp": "2025-07-07 11:57:31,160", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:59:01,906", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 11:59:04,102", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many different fuel-type models are being serviced under the Accessories category in RO data from Jan to Mar 2025?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 11:59:04,104", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 models by billing revenue (parts + labour) for Petrol vehicles in the year 2024."}
{"timestamp": "2025-07-07 11:59:04,104", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 models by billing revenue (parts + labour) for Petrol vehicles in the year 2024.'}]"}
{"timestamp": "2025-07-07 11:59:04,905", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of distinct fuel-type models being serviced under the Accessories product category in repair order data for service dates from January to March 2025."}
{"timestamp": "2025-07-07 11:59:05,312", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 11:59:55,796", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 12:00:12,865", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Give the model-wise breakdown of service revenue grouped by family and model group for all Diesel vehicles., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 12:00:12,866", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of distinct fuel-type models being serviced under the Accessories product category in repair order data for service dates from January to March 2025."}
{"timestamp": "2025-07-07 12:00:12,866", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of distinct fuel-type models being serviced under the Accessories product category in repair order data for service dates from January to March 2025.'}]"}
{"timestamp": "2025-07-07 12:00:13,631", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the model-wise breakdown of service revenue grouped by family and model group for all Diesel vehicles."}
{"timestamp": "2025-07-07 12:00:14,151", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 12:05:40,120", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 12:13:06,012", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 12:20:40,502", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 12:20:52,075", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 12:21:28,259", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 12:21:39,873", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 12:21:51,642", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 12:23:15,252", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 12:23:36,145", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 12:23:47,028", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:15:29,138", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:16:28,460", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:16:41,072", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:16:49,901", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:16:54,593", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:16:54,602", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the model-wise breakdown of service revenue grouped by family and model group for all Diesel vehicles."}
{"timestamp": "2025-07-07 14:16:54,605", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the model-wise breakdown of service revenue grouped by family and model group for all Diesel vehicles.'}]"}
{"timestamp": "2025-07-07 14:16:55,518", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:16:56,588", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 14:16:56,588", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 857, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 14:17:15,007", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:17:18,083", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:17:22,266", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:17:22,280", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-07 14:17:22,280", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-07 14:17:23,213", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:17:23,614", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 14:17:23,619", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 857, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 14:25:31,653", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:25:41,961", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:25:52,022", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:26:01,430", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:26:30,682", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:27:05,189", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:27:12,236", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:27:13,790", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:27:40,227", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:27:40,238", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-07 14:27:40,238", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-07 14:27:43,400", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:27:48,624", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 14:28:06,865", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 14:28:15,808", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:29:05,144", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:29:11,639", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:29:17,460", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:29:18,013", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:29:23,215", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:29:23,224", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-07 14:29:23,224", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-07 14:29:24,641", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024.'}"}
{"timestamp": "2025-07-07 14:29:24,641", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under Repair from January 1, 2024, to December 31, 2024."}
{"timestamp": "2025-07-07 14:29:28,733", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 14:29:53,464", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:30:12,355", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:30:16,462", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:30:52,899", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:30:52,911", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-07 14:30:52,911", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-07 14:30:53,769", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:30:55,694", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 14:41:58,549", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:42:14,302", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:43:39,045", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:43:47,348", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:43:57,854", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Pre-Sale/PDI from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:43:57,864", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:43:57,866", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024.'}]"}
{"timestamp": "2025-07-07 14:43:58,960", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption under Pre-Sale/PDI for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:43:59,378", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 14:44:35,475", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:20,099", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:20,610", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:20,938", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:21,170", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:21,394", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:21,632", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:21,909", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:22,126", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:22,349", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:22,570", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:45:40,617", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:46:22,692", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under Repair from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:46:22,706", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the Top 10 Dealers with the highest OEM part consumption under Pre-Sale/PDI for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:46:22,709", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the Top 10 Dealers with the highest OEM part consumption under Pre-Sale/PDI for service dates between 01-Jan-2024 and 31-Dec-2024.'}]"}
{"timestamp": "2025-07-07 14:46:23,522", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:46:23,911", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 14:54:25,743", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:54:26,680", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:54:30,635", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:54:37,036", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Give customer verbatim for those ROs which took more than 72 hours, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:54:37,048", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:54:37,051", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024.'}]"}
{"timestamp": "2025-07-07 14:54:37,978", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the customer verbatim for Repair Orders that took more than 72 hours, filtered from the Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:54:38,367", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 14:54:41,502", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 14:54:48,172", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:54:49,495", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:56:11,334", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 14:56:34,489", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:56:53,784", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:57:04,881", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:57:10,679", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:57:11,173", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:57:21,605", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Pre-Sale/PDI from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:57:21,616", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-07 14:57:21,618", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-07 14:57:22,544", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the Top 10 Dealers with the highest OEM part consumption under Pre-Sale/PDI category between 01-Jan-2024 and 31-Dec-2024.'}"}
{"timestamp": "2025-07-07 14:57:22,544", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Top 10 Dealers with the highest OEM part consumption under Pre-Sale/PDI category between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 14:57:22,941", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 14:58:52,771", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:59:20,555", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 14:59:23,304", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Whats the average turnaround time (in days) between RO open and RO close for express services in 2024?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 14:59:23,319", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-07 14:59:23,319", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the customer verbatim for Repair Orders that took more than 72 hours, filtered from the Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-07 14:59:24,240", "logger": "app", "level": "INFO", "message": "reframed query after modification: Calculate the average turnaround time in days between Repair Order open date and close date for express services in the year 2024."}
{"timestamp": "2025-07-07 14:59:24,639", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:11:52,322", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:11:53,364", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:11:55,701", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:11:55,701", "logger": "app", "level": "INFO", "message": "Chat history: user: Calculate the average turnaround time in days between Repair Order open date and close date for express services in the year 2024."}
{"timestamp": "2025-07-07 15:11:55,701", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Calculate the average turnaround time in days between Repair Order open date and close date for express services in the year 2024.'}]"}
{"timestamp": "2025-07-07 15:11:56,649", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-07 15:11:57,102", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:13:41,785", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:13:45,249", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Select Service RO Header SK: Foreign key to MH_RO_HDR_DETAILS, Service RO Bill Header SK: Identifier for the service repair order bill header, Service RO Bill Labour Detail SK: Primary key for MH_RO_LABOUR, Standard Hours: Number of standard hours assigned for the labor task, Service Labour Master SK: Identifier for the service labor master record, Labour Description: Description of the labor task performed, Labour Tax: Tax amount applied to the labor task, Labour Amount: Amount charged for the labor task before discounts and taxes, Labour Rate: Rate per hour or per task for the labor performed, Labour Charged Hours: Number of hours charged for the labor task, Labour Discount Amount: Discount applied to the labor amount, Labour Total Amount: Total amount for labor after applying discounts and taxes, Total Bill Amount: Total bill amount for the labor record, Labour Billable Type Name: Name of the billable type for labor, Labour Type Name: Type or category of the labor performed, Labour Group Name: Group or classification of the labor task, Labour Code: Group or classification of the labor Group from MH_RO_LABOUR table, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:13:45,250", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-07 15:13:45,250", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-07 15:13:46,569", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Select Service RO Header SK, Service RO Bill Header SK, Service RO Bill Labour Detail SK, Standard Hours, Service Labour Master SK, Labour Description, Labour Tax, Labour Amount, Labour Rate, Labour Charged Hours, Labour Discount Amount, Labour Total Amount, Total Bill Amount, Labour Billable Type Name, Labour Type Name, Labour Group Name, and Labour Code from the MH_RO_LABOUR table.'}"}
{"timestamp": "2025-07-07 15:13:46,569", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select Service RO Header SK, Service RO Bill Header SK, Service RO Bill Labour Detail SK, Standard Hours, Service Labour Master SK, Labour Description, Labour Tax, Labour Amount, Labour Rate, Labour Charged Hours, Labour Discount Amount, Labour Total Amount, Total Bill Amount, Labour Billable Type Name, Labour Type Name, Labour Group Name, and Labour Code from the MH_RO_LABOUR table."}
{"timestamp": "2025-07-07 15:13:47,032", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:19:45,869", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 15:22:03,232", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 15:22:12,648", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 15:22:40,798", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:23:06,873", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:23:06,877", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-07 15:23:06,878", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Jan-2024.'}]"}
{"timestamp": "2025-07-07 15:23:07,861", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Charging for service dates between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-07 15:23:08,213", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:23:36,906", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:23:41,025", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:23:41,028", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Top 10 consumed OEM parts under Charging for service dates between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-07 15:23:41,030", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Charging for service dates between 01-Jan-2024 and 31-Jan-2024.'}]"}
{"timestamp": "2025-07-07 15:23:41,859", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Charging for service dates between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-07 15:23:42,251", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:24:23,554", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:24:25,426", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:24:44,675", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Charging  from 01-Jan-2024 to 31-Jan-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:24:44,681", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-07-07 15:24:44,681", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-07-07 15:24:45,582", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Charging category between 01-Jan-2024 and 31-Jan-2024.'}"}
{"timestamp": "2025-07-07 15:24:45,582", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Charging category between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-07 15:24:45,939", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:25:55,255", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:25:56,986", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:26:01,442", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  En-Route  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:26:01,442", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 consumed OEM parts under the Charging category between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-07 15:26:01,442", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 consumed OEM parts under the Charging category between 01-Jan-2024 and 31-Jan-2024.'}]"}
{"timestamp": "2025-07-07 15:26:02,267", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-07 15:26:02,267", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:26:02,690", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:26:25,621", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:26:29,384", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show part descriptions and quantities for RO IDs where parts discount exceeded 200., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:26:29,387", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:26:29,387", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024.'}]"}
{"timestamp": "2025-07-07 15:26:30,334", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve part descriptions and quantities for repair order IDs where the parts discount exceeded 200, filtered within the En-Route category and date range from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-07 15:26:30,335", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve part descriptions and quantities for repair order IDs where the parts discount exceeded 200, filtered within the En-Route category and date range from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:26:30,720", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:27:42,225", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 15:36:35,024", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 15:37:18,192", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:37:23,617", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:37:23,617", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:37:23,621", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024.'}]"}
{"timestamp": "2025-07-07 15:37:24,354", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Repair category from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-07 15:37:24,354", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Repair category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:37:24,769", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:41:42,912", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 15:42:12,908", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:42:21,322", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Pre-Sale/PDI from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:42:21,328", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:42:21,329", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024.'}]"}
{"timestamp": "2025-07-07 15:42:22,258", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 Dealers with the highest OEM part consumption under the Pre-Sale/PDI category from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-07 15:42:22,258", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 Dealers with the highest OEM part consumption under the Pre-Sale/PDI category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:42:22,681", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:42:22,689", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 15:42:52,632", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:42:55,147", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Pre-Sale/PDI from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:42:55,150", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:42:55,150", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024.'}]"}
{"timestamp": "2025-07-07 15:42:56,068", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 Dealers with the highest OEM part consumption under the Pre-Sale/PDI category from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-07 15:42:56,068", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 Dealers with the highest OEM part consumption under the Pre-Sale/PDI category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:42:56,552", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:42:56,556", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 15:43:21,710", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 15:43:26,075", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:43:29,737", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:43:29,742", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:43:29,742", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024.'}]"}
{"timestamp": "2025-07-07 15:43:30,478", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Repair category from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-07 15:43:30,479", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Repair category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:43:30,891", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:43:30,894", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 15:43:55,303", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:43:56,354", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:44:00,543", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:44:00,548", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:44:00,548", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024.'}]"}
{"timestamp": "2025-07-07 15:44:01,319", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Repair category from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-07 15:44:01,319", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Repair category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-07 15:44:01,761", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:44:01,764", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 15:47:20,603", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 15:47:59,085", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:48:03,548", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:48:07,283", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:48:07,286", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Top 10 consumed OEM parts under Charging for service dates between 01-Jan-2024 and 31-Jan-2024."}
{"timestamp": "2025-07-07 15:48:07,286", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Charging for service dates between 01-Jan-2024 and 31-Jan-2024.'}]"}
{"timestamp": "2025-07-07 15:48:08,243", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 15:48:09,026", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:48:09,051", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 15:49:54,558", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:49:55,350", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 15:49:59,417", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List the Top 10 Dealers with highest OEM part consumption under Pre-Sale/PDI from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:49:59,421", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-07 15:49:59,421", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-07 15:50:00,274", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the Top 10 Dealers with the highest OEM part consumption under Pre-Sale/PDI for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 15:50:00,699", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:50:00,703", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 15:50:05,094", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 15:50:05,098", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-07 15:50:05,099", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'List the Top 10 Dealers with the highest OEM part consumption under Pre-Sale/PDI for service dates between 01-Jan-2024 and 31-Dec-2024.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-07 15:50:05,700", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for service dates between 01-Jan-2024 and 31-Dec-2024."}
{"timestamp": "2025-07-07 15:50:05,896", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 15:50:05,900", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 16:15:53,293", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 16:15:56,793", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 16:16:02,263", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 16:16:02,274", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 vehicle models with the highest seat capacity."}
{"timestamp": "2025-07-07 16:16:02,276", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 vehicle models with the highest seat capacity.'}]"}
{"timestamp": "2025-07-07 16:16:03,004", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 vehicle models with the highest seat capacity."}
{"timestamp": "2025-07-07 16:16:03,496", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 16:16:19,853", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 16:16:23,968", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 16:16:27,156", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 16:16:27,165", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-07 16:16:27,165", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 vehicle models with the highest seat capacity.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-07 16:16:27,893", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 16:16:28,241", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 16:16:44,802", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 16:19:42,704", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 16:19:45,765", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 16:19:51,155", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 16:19:51,172", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-07 16:19:51,172", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 models with the highest seat capacity.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-07 16:19:51,903", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 16:19:52,261", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 16:30:34,180", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-07 16:30:46,804", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 16:30:50,716", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 16:30:53,593", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 16:30:53,606", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 16:30:53,607", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 models with the highest seat capacity.'}]"}
{"timestamp": "2025-07-07 16:30:54,328", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 16:30:54,688", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 17:19:03,027", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 17:19:06,515", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 17:19:06,525", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 17:19:06,525", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 models with the highest seat capacity.'}]"}
{"timestamp": "2025-07-07 17:19:07,264", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 17:19:07,617", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 17:50:24,692", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 17:50:27,983", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 17:50:27,993", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 17:50:27,993", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 models with the highest seat capacity.'}]"}
{"timestamp": "2025-07-07 17:50:28,668", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 17:50:29,340", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 17:50:45,638", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 856, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-07 17:50:50,746", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 17:50:57,455", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 17:50:57,463", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-07 17:50:57,463", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 models with the highest seat capacity.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-07 17:50:58,161", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 17:50:58,531", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 17:53:47,069", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 17:53:49,934", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Generate a Word Cloud for the FAMLY_DESC \"XUV700 Diesel AT\, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 17:53:49,934", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 models with the highest seat capacity."}
{"timestamp": "2025-07-07 17:53:49,934", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 models with the highest seat capacity.'}]"}
{"timestamp": "2025-07-07 17:53:50,679", "logger": "app", "level": "INFO", "message": "reframed query after modification: Generate a word cloud for the FAMLY_DESC 'XUV700 Diesel AT'."}
{"timestamp": "2025-07-07 17:53:51,241", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 17:55:59,155", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 17:56:01,382", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 17:56:05,519", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What are the top 5 models by billing revenue (parts + labour) for Petrol vehicles in 2024?, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 17:56:05,528", "logger": "app", "level": "INFO", "message": "Chat history: user: Generate a word cloud for the FAMLY_DESC 'XUV700 Diesel AT'."}
{"timestamp": "2025-07-07 17:56:05,528", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': "Generate a word cloud for the FAMLY_DESC 'XUV700 Diesel AT'."}]"}
{"timestamp": "2025-07-07 17:56:06,353", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 models by total billing revenue (sum of parts and labour) for Petrol vehicles in the year 2024."}
{"timestamp": "2025-07-07 17:56:06,698", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 17:58:32,845", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 17:58:34,500", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 17:58:40,138", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 17:58:40,146", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 models by total billing revenue (sum of parts and labour) for Petrol vehicles in the year 2024."}
{"timestamp": "2025-07-07 17:58:40,146", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 models by total billing revenue (sum of parts and labour) for Petrol vehicles in the year 2024.'}]"}
{"timestamp": "2025-07-07 17:58:40,944", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 vehicle models with the highest seat capacity."}
{"timestamp": "2025-07-07 17:58:41,371", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-07 18:06:09,421", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 18:06:10,938", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-07 18:06:15,305", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Generate a Word Cloud for the FAMLY_DESC \"XUV700 Diesel AT\, section: Azure-SQL-DB"}
{"timestamp": "2025-07-07 18:06:15,321", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 vehicle models with the highest seat capacity."}
{"timestamp": "2025-07-07 18:06:15,321", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 vehicle models with the highest seat capacity.'}]"}
{"timestamp": "2025-07-07 18:06:16,144", "logger": "app", "level": "INFO", "message": "reframed query after modification: Generate a word cloud for the FAMLY_DESC 'XUV700 Diesel AT'."}
{"timestamp": "2025-07-07 18:06:16,642", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-08 09:31:49,762", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-08 09:31:51,799", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-08 10:06:26,270", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-08 10:25:24,744", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-08 10:32:22,678", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-08 10:33:07,318", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-08 10:33:09,361", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-08 10:33:14,468", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-08 10:33:18,951", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-07-08 10:33:18,953", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-08 10:33:18,953", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 consumed OEM parts under the En-Route category from 01-Jan-2024 to 31-Dec-2024.'}]"}
{"timestamp": "2025-07-08 10:33:19,732", "logger": "app", "level": "INFO", "message": "json output in usecase: {'rephrased_query': 'Retrieve the top 10 consumed OEM parts under the Repair category from 01-Jan-2024 to 31-Dec-2024.'}"}
{"timestamp": "2025-07-08 10:33:19,732", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 consumed OEM parts under the Repair category from 01-Jan-2024 to 31-Dec-2024."}
{"timestamp": "2025-07-08 10:33:20,098", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-08 10:33:20,099", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all parts used in a particular repair order RO25D000730', 'query': "SELECT rp.[part_desc], rp.[part_code] FROM MH_RO_PARTS rp INNER JOIN MH_RO_HDR_DETAILS rohdr ON (rp.[SV_RO_HDR_SK] = rohdr.[SV_RO_HDR_SK]) WHERE rohdr.[ro_id] COLLATE SQL_Latin1_General_CP1_CI_AS = 'RO25D000730' COLLATE SQL_Latin1_General_CP1_CI_AS;"}, {'input': 'List model descriptions and fuel types for all repair orders raised in 2024 with active models only.', 'query': "SELECT mm.[MODL_DESC], mm.[FUEL_TYPE] FROM MH_RO_HDR_DETAILS rohdr INNER JOIN MH_MODEL_MASTER mm ON rohdr.[MODL_CD] = mm.[MODL_CD] WHERE rohdr.[RO_DATE] BETWEEN '2024-01-01' AND '2024-12-31' AND mm.[ACTV_IND] COLLATE SQL_Latin1_General_CP1_CI_AS = 'y' COLLATE SQL_Latin1_General_CP1_CI_AS;"}]"}
{"timestamp": "2025-07-08 10:33:20,107", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 857, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-08 10:34:28,544", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-08 10:34:33,781", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-08 10:34:34,237", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-08 10:34:38,595", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-08 10:34:38,601", "logger": "app", "level": "INFO", "message": "Chat history: user: List all models including their descriptions, model code, model group, and family description."}
{"timestamp": "2025-07-08 10:34:38,601", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'List all models including their descriptions, model code, model group, and family description.'}]"}
{"timestamp": "2025-07-08 10:34:39,482", "logger": "app", "level": "INFO", "message": "reframed query after modification: List the top 5 models with the highest seat capacity, including their descriptions, model code, model group, and family description."}
{"timestamp": "2025-07-08 10:34:39,844", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-08 10:34:39,845", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Give the model-wise breakdown of service revenue grouped by family and model group for all Diesel vehicles.', 'query': {'query': "SELECT DISTINCT mm.[FAMLY_CD], mm.[MODL_GROP_CD], ROUND(SUM(TRY_CAST(rohdr.[parts_totl_amnt] AS FLOAT) + TRY_CAST(rohdr.[labr_totl_amnt] AS FLOAT)), 1) AS [Service_Revenue] FROM MH_RO_HDR_DETAILS AS rohdr INNER JOIN MH_MODEL_MASTER AS mm ON rohdr.[MODL_CD] = mm.[MODL_CD] WHERE mm.[FUEL_TYPE] COLLATE SQL_Latin1_General_CP1_CI_AS = 'Diesel' GROUP BY mm.[FAMLY_CD], mm.[MODL_GROP_CD] ORDER BY mm.[FAMLY_CD], mm.[MODL_GROP_CD]"}}, {'input': 'What are the top 5 models by billing revenue (parts + labour) for Petrol vehicles in 2024?', 'query': {'query': "SELECT TOP 5 mm.[MODL_DESC], ROUND(SUM(TRY_CAST(roh.[parts_totl_amnt] AS FLOAT) + TRY_CAST(roh.[labr_totl_amnt] AS FLOAT)), 1) AS [Total_Billing_Revenue] FROM MH_RO_HDR_DETAILS AS roh INNER JOIN MH_MODEL_MASTER AS mm ON roh.[MODL_CD] = mm.[MODL_CD] WHERE roh.[RO_DATE] BETWEEN '2024-01-01' AND '2024-12-31' AND mm.[FUEL_TYPE] COLLATE SQL_Latin1_General_CP1_CI_AS = 'Petrol' COLLATE SQL_Latin1_General_CP1_CI_AS GROUP BY mm.[MODL_DESC] ORDER BY [Total_Billing_Revenue] DESC;"}}]"}
{"timestamp": "2025-07-08 10:34:56,421", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 857, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-08 10:35:12,524", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-08 10:35:15,118", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-08 10:35:15,123", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-07-08 10:35:15,123", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'List the top 5 models with the highest seat capacity, including their descriptions, model code, model group, and family description.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-07-08 10:35:15,757", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 vehicle models with the highest seat capacity."}
{"timestamp": "2025-07-08 10:35:16,114", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-08 10:35:16,115", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'What are the top 5 models by billing revenue (parts + labour) for Petrol vehicles in 2024?', 'query': {'query': "SELECT TOP 5 mm.[MODL_DESC], ROUND(SUM(TRY_CAST(roh.[parts_totl_amnt] AS FLOAT) + TRY_CAST(roh.[labr_totl_amnt] AS FLOAT)), 1) AS [Total_Billing_Revenue] FROM MH_RO_HDR_DETAILS AS roh INNER JOIN MH_MODEL_MASTER AS mm ON roh.[MODL_CD] = mm.[MODL_CD] WHERE roh.[RO_DATE] BETWEEN '2024-01-01' AND '2024-12-31' AND mm.[FUEL_TYPE] COLLATE SQL_Latin1_General_CP1_CI_AS = 'Petrol' COLLATE SQL_Latin1_General_CP1_CI_AS GROUP BY mm.[MODL_DESC] ORDER BY [Total_Billing_Revenue] DESC;"}}, {'input': 'Give the model-wise breakdown of service revenue grouped by family and model group for all Diesel vehicles.', 'query': {'query': "SELECT DISTINCT mm.[FAMLY_CD], mm.[MODL_GROP_CD], ROUND(SUM(TRY_CAST(rohdr.[parts_totl_amnt] AS FLOAT) + TRY_CAST(rohdr.[labr_totl_amnt] AS FLOAT)), 1) AS [Service_Revenue] FROM MH_RO_HDR_DETAILS AS rohdr INNER JOIN MH_MODEL_MASTER AS mm ON rohdr.[MODL_CD] = mm.[MODL_CD] WHERE mm.[FUEL_TYPE] COLLATE SQL_Latin1_General_CP1_CI_AS = 'Diesel' GROUP BY mm.[FAMLY_CD], mm.[MODL_GROP_CD] ORDER BY mm.[FAMLY_CD], mm.[MODL_GROP_CD]"}}]"}
{"timestamp": "2025-07-08 10:35:54,004", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-08 10:35:54,804", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-07-08 10:35:58,111", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find the top 5 models with the highest seat capacity., section: Azure-SQL-DB"}
{"timestamp": "2025-07-08 10:35:58,115", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top 5 vehicle models with the highest seat capacity."}
{"timestamp": "2025-07-08 10:35:58,115", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 vehicle models with the highest seat capacity.'}]"}
{"timestamp": "2025-07-08 10:35:58,780", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 vehicle models with the highest seat capacity."}
{"timestamp": "2025-07-08 10:35:58,968", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-07-08 10:35:58,969", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'What are the top 5 models by billing revenue (parts + labour) for Petrol vehicles in 2024?', 'query': "SELECT TOP 5 mm.[MODL_DESC], ROUND(SUM(TRY_CAST(roh.[parts_totl_amnt] AS FLOAT) + TRY_CAST(roh.[labr_totl_amnt] AS FLOAT)), 1) AS [Total_Billing_Revenue] FROM MH_RO_HDR_DETAILS AS roh INNER JOIN MH_MODEL_MASTER AS mm ON roh.[MODL_CD] = mm.[MODL_CD] WHERE roh.[RO_DATE] BETWEEN '2024-01-01' AND '2024-12-31' AND mm.[FUEL_TYPE] COLLATE SQL_Latin1_General_CP1_CI_AS = 'Petrol' COLLATE SQL_Latin1_General_CP1_CI_AS GROUP BY mm.[MODL_DESC] ORDER BY [Total_Billing_Revenue] DESC;"}, {'input': 'Give the model-wise breakdown of service revenue grouped by family and model group for all Diesel vehicles.', 'query': "SELECT DISTINCT mm.[FAMLY_CD], mm.[MODL_GROP_CD], ROUND(SUM(TRY_CAST(rohdr.[parts_totl_amnt] AS FLOAT) + TRY_CAST(rohdr.[labr_totl_amnt] AS FLOAT)), 1) AS [Service_Revenue] FROM MH_RO_HDR_DETAILS AS rohdr INNER JOIN MH_MODEL_MASTER AS mm ON rohdr.[MODL_CD] = mm.[MODL_CD] WHERE mm.[FUEL_TYPE] COLLATE SQL_Latin1_General_CP1_CI_AS = 'Diesel' GROUP BY mm.[FAMLY_CD], mm.[MODL_GROP_CD] ORDER BY mm.[FAMLY_CD], mm.[MODL_GROP_CD]"}]"}
{"timestamp": "2025-07-08 10:35:58,973", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 857, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-07-08 10:38:29,350", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-08 10:38:39,599", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-07-08 10:41:04,607", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-11 17:25:09,023", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-11 17:26:25,482", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-11 17:27:37,911", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-11 17:27:38,358", "logger": "app", "level": "ERROR", "message": "file not found table_files/Mahindra-PoC_questions.csv"}
{"timestamp": "2025-12-11 17:27:41,894", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-11 17:27:55,291", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give me all the column name of table DispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-11 17:27:55,296", "logger": "app", "level": "INFO", "message": "Chat history: "}
{"timestamp": "2025-12-11 17:27:55,296", "logger": "app", "level": "INFO", "message": "Messages in session: []"}
{"timestamp": "2025-12-11 17:27:56,043", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all column names from the table DispatchDetails."}
{"timestamp": "2025-12-11 17:27:56,455", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-11 17:27:56,456", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all dispatch lines where OEM parts were dispatched.', 'query': {'query': "SELECT `DD`.* FROM `DISPATCH_DETAILS` AS `DD` WHERE LOWER(`DD`.`oem_part_ind`) = 'y';"}}, {'input': 'Give the total dispatch value by product division.', 'query': {'query': 'SELECT `DD`.`product_division`, SUM(SAFE_CAST(`DD`.`amount` AS FLOAT64)) AS `TOTAL_VALUE` FROM `DISPATCH_DETAILS` AS `DD` GROUP BY `DD`.`product_division`;'}}]"}
{"timestamp": "2025-12-11 17:27:57,644", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-11 17:31:25,024", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-11 17:32:19,062", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-11 17:32:37,023", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-11 17:32:39,823", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give me all the column name of table DispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-11 17:32:39,829", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-11 17:32:39,830", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all column names from the table DispatchDetails.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-11 17:32:40,802", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all column names from the table DispatchDetails."}
{"timestamp": "2025-12-11 17:32:41,167", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-11 17:32:41,168", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all dispatch lines where OEM parts were dispatched.', 'query': {'query': "SELECT `DD`.* FROM `DISPATCH_DETAILS` AS `DD` WHERE LOWER(`DD`.`oem_part_ind`) = 'y';"}}, {'input': 'Give the total dispatch value by product division.', 'query': {'query': 'SELECT `DD`.`product_division`, SUM(SAFE_CAST(`DD`.`amount` AS FLOAT64)) AS `TOTAL_VALUE` FROM `DISPATCH_DETAILS` AS `DD` GROUP BY `DD`.`product_division`;'}}]"}
{"timestamp": "2025-12-11 17:32:42,071", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-11 17:37:48,730", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-11 17:38:01,175", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-11 17:38:03,894", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give me all the column name of table DispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-11 17:38:03,894", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-11 17:38:03,894", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all column names from the table DispatchDetails.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-11 17:38:04,809", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all column names from the table DispatchDetails."}
{"timestamp": "2025-12-11 17:38:05,192", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-11 17:38:05,192", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all dispatch lines where OEM parts were dispatched.', 'query': {'query': "SELECT `DD`.* FROM `DISPATCH_DETAILS` AS `DD` WHERE LOWER(`DD`.`oem_part_ind`) = 'y';"}}, {'input': 'Give the total dispatch value by product division.', 'query': {'query': 'SELECT `DD`.`product_division`, SUM(SAFE_CAST(`DD`.`amount` AS FLOAT64)) AS `TOTAL_VALUE` FROM `DISPATCH_DETAILS` AS `DD` GROUP BY `DD`.`product_division`;'}}]"}
{"timestamp": "2025-12-11 17:38:05,972", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 09:48:44,596", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 09:48:50,397", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 09:48:54,036", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 09:48:55,818", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Provide the list of Top 10 consumed OEM part under  Repair  from 01-Jan-2024 to 31-dec-2024, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 09:48:55,821", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 09:48:55,821", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all column names from the table DispatchDetails.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 09:48:57,199", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Top 10 consumed OEM parts under Repair for the period from 01-Jan-2024 to 31-Dec-2024, including Item Code, Item Description, OEM / Local Indicator, Ordered Quantity, and Shipped Quantity."}
{"timestamp": "2025-12-12 09:48:57,573", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 09:48:57,574", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all dispatch lines where OEM parts were dispatched.', 'query': {'query': "SELECT `DD`.* FROM `DISPATCH_DETAILS` AS `DD` WHERE LOWER(`DD`.`oem_part_ind`) = 'y';"}}, {'input': 'What are the top 10 most frequently dispatched parts?', 'query': {'query': 'SELECT `DD`.`item_code`, COUNT(*) AS `DISPATCH_COUNT` FROM `DISPATCH_DETAILS` AS `DD` GROUP BY `DD`.`item_code` ORDER BY `DISPATCH_COUNT` DESC LIMIT 10;'}}]"}
{"timestamp": "2025-12-12 09:50:31,462", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 09:50:32,403", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 09:50:58,684", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 09:51:25,609", "logger": "app", "level": "INFO", "message": "Received /submit request with query: select 10 records from DispatchDetails table, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 09:51:25,612", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Top 10 consumed OEM parts under Repair for the period from 01-Jan-2024 to 31-Dec-2024, including Item Code, Item Description, OEM / Local Indicator, Ordered Quantity, and Shipped Quantity."}
{"timestamp": "2025-12-12 09:51:25,612", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Top 10 consumed OEM parts under Repair for the period from 01-Jan-2024 to 31-Dec-2024, including Item Code, Item Description, OEM / Local Indicator, Ordered Quantity, and Shipped Quantity.'}]"}
{"timestamp": "2025-12-12 09:51:27,343", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 10 records from the DispatchDetails table including Item Code, Item Description, OEM / Local Indicator, Ordered Quantity, and Shipped Quantity for the period from 01-Jan-2024 to 31-Dec-2024, focusing on Top 10 consumed OEM parts under Repair."}
{"timestamp": "2025-12-12 09:51:27,694", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 09:51:27,694", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all dispatch lines where OEM parts were dispatched.', 'query': {'query': "SELECT `DD`.* FROM `DISPATCH_DETAILS` AS `DD` WHERE LOWER(`DD`.`oem_part_ind`) = 'y';"}}, {'input': 'How many dispatch records used Local parts vs OEM parts?', 'query': {'query': 'SELECT `DD`.`oem_part_ind`, COUNT(*) AS `COUNT_RECORDS` FROM `DISPATCH_DETAILS` AS `DD` GROUP BY `DD`.`oem_part_ind`;'}}]"}
{"timestamp": "2025-12-12 09:51:30,884", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 09:54:27,221", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 09:54:38,653", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 09:54:40,335", "logger": "app", "level": "INFO", "message": "Received /submit request with query: select 10 records from DispatchDetails table, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 09:54:40,339", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 09:54:40,339", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 10 records from the DispatchDetails table including Item Code, Item Description, OEM / Local Indicator, Ordered Quantity, and Shipped Quantity for the period from 01-Jan-2024 to 31-Dec-2024, focusing on Top 10 consumed OEM parts under Repair.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 09:54:41,030", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the first 10 records from the DispatchDetails table."}
{"timestamp": "2025-12-12 09:54:41,407", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 09:54:41,408", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'select 10 records from the table DispatchDetails', 'query': {'query': 'Select * from DispatchDetails;'}}]"}
{"timestamp": "2025-12-12 09:54:42,041", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 10:00:34,529", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 10:00:41,071", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 10:00:43,707", "logger": "app", "level": "INFO", "message": "Received /submit request with query: select 10 records from DispatchDetails table, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 10:00:43,709", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 10:00:43,709", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Select the first 10 records from the DispatchDetails table.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 10:00:44,384", "logger": "app", "level": "INFO", "message": "reframed query after modification: Select the first 10 records from the DispatchDetails table."}
{"timestamp": "2025-12-12 10:00:44,736", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 10:00:44,737", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'select 10 records from the table DispatchDetails', 'query': {'query': 'Select * from DispatchDetails;'}}]"}
{"timestamp": "2025-12-12 10:00:48,103", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 10:04:58,631", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 10:05:09,766", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 10:05:10,076", "logger": "app", "level": "INFO", "message": "Received /submit request with query: select * from DispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 10:05:10,078", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 10:05:10,079", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Select the first 10 records from the DispatchDetails table.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 10:05:10,868", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all columns and records from the DispatchDetails table."}
{"timestamp": "2025-12-12 10:05:11,074", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 10:05:11,075", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'select 10 records from the table DispatchDetails', 'query': {'query': 'Select * from DispatchDetails;'}}]"}
{"timestamp": "2025-12-12 10:05:12,001", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 10:07:41,136", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 10:07:49,170", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 10:07:51,155", "logger": "app", "level": "INFO", "message": "Received /submit request with query: select * from DispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 10:07:51,160", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 10:07:51,160", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all columns and records from the DispatchDetails table.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 10:07:51,864", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all columns and records from the DispatchDetails table."}
{"timestamp": "2025-12-12 10:07:52,199", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 10:07:52,199", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'select 10 records from the table DispatchDetails', 'query': {'query': 'Select * from DispatchDetails;'}}]"}
{"timestamp": "2025-12-12 10:09:34,388", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 10:09:47,041", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 10:09:50,625", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 10:10:10,373", "logger": "app", "level": "INFO", "message": "Received /submit request with query: select all from table DeispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 10:10:10,378", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all columns and records from the DispatchDetails table."}
{"timestamp": "2025-12-12 10:10:10,379", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all columns and records from the DispatchDetails table.'}]"}
{"timestamp": "2025-12-12 10:10:11,067", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all columns and records from the DispatchDetails table."}
{"timestamp": "2025-12-12 10:10:11,409", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 10:10:11,409", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'select 10 records from the table DispatchDetails', 'query': {'query': 'Select * from DispatchDetails;'}}]"}
{"timestamp": "2025-12-12 10:10:12,346", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 10:13:13,128", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 10:13:26,581", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 10:13:28,143", "logger": "app", "level": "INFO", "message": "Received /submit request with query: select all from table DeispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 10:13:28,146", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 10:13:28,146", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all columns and records from the DispatchDetails table.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 10:13:29,153", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all records from the table DeispatchDetails."}
{"timestamp": "2025-12-12 10:13:29,682", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 10:13:29,683", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'select 10 records from the table DispatchDetails', 'query': {'query': 'Select * from DispatchDetails;'}}]"}
{"timestamp": "2025-12-12 10:18:19,689", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 10:18:25,130", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give me all the columns name, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 10:18:25,140", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all records from the table DeispatchDetails."}
{"timestamp": "2025-12-12 10:18:25,140", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all records from the table DeispatchDetails.'}]"}
{"timestamp": "2025-12-12 10:18:26,313", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all column names from the table DeispatchDetails."}
{"timestamp": "2025-12-12 10:18:26,719", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 10:18:26,720", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'select 10 records from the table DispatchDetails', 'query': {'query': 'Select * from DispatchDetails;'}}]"}
{"timestamp": "2025-12-12 10:18:27,554", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 10:19:06,891", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 10:19:08,102", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give me all the columns name, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 10:19:08,110", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 10:19:08,110", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all column names from the table DeispatchDetails.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 10:19:09,182", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the names of all columns available in the dataset."}
{"timestamp": "2025-12-12 10:19:09,570", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 10:19:09,571", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'select 10 records from the table DispatchDetails', 'query': {'query': 'Select * from DispatchDetails;'}}]"}
{"timestamp": "2025-12-12 10:28:02,571", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 10:28:35,256", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Give me the highest sale_quantity and the line id for that, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 10:28:35,265", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the names of all columns available in the dataset."}
{"timestamp": "2025-12-12 10:28:35,267", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the names of all columns available in the dataset.'}]"}
{"timestamp": "2025-12-12 10:28:36,051", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the highest sale_quantity and the corresponding Requisition Line ID from the dataset."}
{"timestamp": "2025-12-12 10:28:36,435", "logger": "app", "level": "INFO", "message": "relationships: {'mh_ro_hdr_details': [], 'MH_RO_PARTS': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_PARTS', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Parts'}], 'MH_CUST_VERBATIM': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_CUST_VERBATIM', 'source_key': 'sv_ro_hdr_sk', 'target_key': 'sv_ro_hdr_sk', 'description': 'Repair Order or RO Header to Customer Verbatim'}], 'MH_MODEL_MASTER': [{'type': 'one_to_many', 'source': 'MH_MODEL_MASTER', 'target': 'MH_RO_HDR_DETAILS', 'source_key': 'MODL_CD', 'target_key': 'MODL_CD', 'description': 'Model Master to Repair Order or RO Header Details'}], 'MH_AD_AI_DIMENSION': [{'type': 'one_to_many', 'source': 'MH_AD_AI_DIMENSION', 'target': 'MH_RO_HDR_DETAILS', 'source_key': ['parnt_grop', 'loctn_cd', 'prodct_divsn'], 'target_key': ['DIV_KEY'], 'description': 'Dealer Master to Repair Order or RO Header Details (composite key)'}], 'MH_RO_LABOUR': [{'type': 'one_to_many', 'source': 'MH_RO_HDR_DETAILS', 'target': 'MH_RO_LABOUR', 'source_key': 'sv_ro_bill_hdr_sk', 'target_key': 'sv_ro_bill_hdr_sk', 'description': 'Repair Order or RO Header to Labour'}]}"}
{"timestamp": "2025-12-12 10:28:36,437", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'select 10 records from the table DispatchDetails', 'query': {'query': 'Select * from DispatchDetails;'}}]"}
{"timestamp": "2025-12-12 10:29:47,281", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 11:51:06,387", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 12:11:36,310", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 12:11:55,364", "logger": "app", "level": "INFO", "message": "Received /submit request with query: find all the columns present in DispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:11:55,370", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the highest sale_quantity and the corresponding Requisition Line ID from the dataset."}
{"timestamp": "2025-12-12 12:11:55,370", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the highest sale_quantity and the corresponding Requisition Line ID from the dataset.'}]"}
{"timestamp": "2025-12-12 12:11:56,182", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of all columns present in the DispatchDetails table."}
{"timestamp": "2025-12-12 12:11:56,628", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:11:56,628", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Show dispatch details with schedule information.', 'query': {'query': 'SELECT D.*, S.Schedule_Date FROM Ponpure_DispatchDetails D LEFT JOIN Ponpure_Schedules S ON D.SaleOrder_No = S.SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 12:12:07,242", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 12:13:46,581", "logger": "app", "level": "INFO", "message": "Received /submit request with query: find all columns present in lead details table, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:13:46,589", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 12:13:46,589", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of all columns present in the DispatchDetails table.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 12:13:47,940", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of all columns present in the lead details table related to lead information, customer lead, new enquiry, enquiry details, contact details, customer email, customer phone, lead date, lead source, CRM lead, follow-up lead, unconverted leads, and leads pending quotation."}
{"timestamp": "2025-12-12 12:13:48,348", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:13:48,348", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 leads with their customer name, email, phone and source.', 'query': {'query': 'SELECT Lead_ID, Customer_Name, Email_ID, Phone_No, Lead_Source, Created_Date FROM Ponpure_LeadDetails ORDER BY Created_Date DESC LIMIT 10;'}}, {'input': "Get lead details for customers whose email contains '@gmail.com'.", 'query': {'query': "SELECT Lead_ID, Customer_Name, Email_ID FROM Ponpure_LeadDetails WHERE Email_ID LIKE '%@gmail.com';"}}]"}
{"timestamp": "2025-12-12 12:14:43,891", "logger": "app", "level": "INFO", "message": "Received /submit request with query: find all the columns present in DispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:14:43,899", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of all columns present in the lead details table related to lead information, customer lead, new enquiry, enquiry details, contact details, customer email, customer phone, lead date, lead source, CRM lead, follow-up lead, unconverted leads, and leads pending quotation."}
{"timestamp": "2025-12-12 12:14:43,901", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of all columns present in the lead details table related to lead information, customer lead, new enquiry, enquiry details, contact details, customer email, customer phone, lead date, lead source, CRM lead, follow-up lead, unconverted leads, and leads pending quotation.'}]"}
{"timestamp": "2025-12-12 12:14:46,248", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of all columns present in the DispatchDetails table, including any of the following if available: Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status."}
{"timestamp": "2025-12-12 12:14:46,739", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:14:46,739", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 12:14:52,516", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 12:15:18,738", "logger": "app", "level": "INFO", "message": "Received /submit request with query: find all the columns present in schedules table, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:15:18,746", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 12:15:18,751", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of all columns present in the DispatchDetails table, including any of the following if available: Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 12:15:19,713", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of all columns present in the schedules table."}
{"timestamp": "2025-12-12 12:15:20,141", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:15:20,143", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all schedules for a specific sale order.', 'query': {'query': "SELECT * FROM Ponpure_Schedules WHERE SaleOrder_No = 'SO1001';"}}, {'input': 'Count number of schedules by sale order.', 'query': {'query': 'SELECT SaleOrder_No, COUNT(*) AS Schedule_Count FROM Ponpure_Schedules GROUP BY SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 12:15:26,517", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 12:18:02,039", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 12:18:02,988", "logger": "app", "level": "INFO", "message": "Received /submit request with query: find all the columns present in schedules table, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:18:03,003", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 12:18:03,005", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of all columns present in the schedules table.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 12:18:03,878", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of all columns present in the schedules table."}
{"timestamp": "2025-12-12 12:18:04,313", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:18:04,313", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all schedules for a specific sale order.', 'query': {'query': "SELECT * FROM Ponpure_Schedules WHERE SaleOrder_No = 'SO1001';"}}, {'input': 'Count number of schedules by sale order.', 'query': {'query': 'SELECT SaleOrder_No, COUNT(*) AS Schedule_Count FROM Ponpure_Schedules GROUP BY SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 12:18:37,959", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 12:18:46,053", "logger": "app", "level": "INFO", "message": "Received /submit request with query: find all the columns present in DispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:18:46,063", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of all columns present in the schedules table."}
{"timestamp": "2025-12-12 12:18:46,063", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of all columns present in the schedules table.'}]"}
{"timestamp": "2025-12-12 12:18:47,369", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of all columns present in the DispatchDetails table."}
{"timestamp": "2025-12-12 12:18:47,916", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:18:47,916", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Show dispatch details with schedule information.', 'query': {'query': 'SELECT D.*, S.Schedule_Date FROM Ponpure_DispatchDetails D LEFT JOIN Ponpure_Schedules S ON D.SaleOrder_No = S.SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 12:20:49,286", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give me only the names of the column, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:20:49,300", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of all columns present in the DispatchDetails table."}
{"timestamp": "2025-12-12 12:20:49,300", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of all columns present in the DispatchDetails table.'}]"}
{"timestamp": "2025-12-12 12:20:50,257", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve only the names of all columns present in the DispatchDetails table."}
{"timestamp": "2025-12-12 12:20:50,701", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:20:50,703", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 12:20:53,383", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 12:22:58,404", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 12:23:11,123", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Give me  all the columns name  present in DispatchDetails, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:23:11,133", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 12:23:11,135", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve only the names of all columns present in the DispatchDetails table.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 12:23:12,241", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of all column names present in the DispatchDetails table."}
{"timestamp": "2025-12-12 12:23:12,667", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:23:12,667", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Show dispatch details with schedule information.', 'query': {'query': 'SELECT D.*, S.Schedule_Date FROM Ponpure_DispatchDetails D LEFT JOIN Ponpure_Schedules S ON D.SaleOrder_No = S.SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 12:24:34,924", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 12:24:54,026", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Give me the line_id where sale category is intact, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:24:54,042", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of all column names present in the DispatchDetails table."}
{"timestamp": "2025-12-12 12:24:54,042", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of all column names present in the DispatchDetails table.'}]"}
{"timestamp": "2025-12-12 12:24:55,270", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the line_id from the DispatchDetails table where the sale category is intact."}
{"timestamp": "2025-12-12 12:24:55,670", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:24:55,670", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}, {'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}]"}
{"timestamp": "2025-12-12 12:30:37,903", "logger": "app", "level": "INFO", "message": "Received /submit request with query: how many total line id you have brought, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:30:37,917", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the line_id from the DispatchDetails table where the sale category is intact."}
{"timestamp": "2025-12-12 12:30:37,917", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the line_id from the DispatchDetails table where the sale category is intact.'}]"}
{"timestamp": "2025-12-12 12:30:38,984", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total count of line_id values from the DispatchDetails table where the sale category is intact."}
{"timestamp": "2025-12-12 12:30:39,411", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:30:39,413", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get total dispatched quantity per sale order.', 'query': {'query': 'SELECT SaleOrder_No, SUM(Dispatch_Quantity) AS Total_Dispatched FROM Ponpure_DispatchDetails GROUP BY SaleOrder_No;'}}, {'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}]"}
{"timestamp": "2025-12-12 12:32:11,090", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all leads along with their quotation numbers and quotation amount., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:32:11,101", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total count of line_id values from the DispatchDetails table where the sale category is intact."}
{"timestamp": "2025-12-12 12:32:11,101", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total count of line_id values from the DispatchDetails table where the sale category is intact.'}]"}
{"timestamp": "2025-12-12 12:32:11,981", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all customer leads along with their quotation numbers and quotation amounts."}
{"timestamp": "2025-12-12 12:32:12,437", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:32:12,437", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Find all leads that came from the website and have not yet received a quotation.', 'query': {'query': "SELECT L.* FROM Ponpure_LeadDetails L LEFT JOIN Ponpure_Quotationhdrs Q ON L.Lead_ID = Q.Lead_ID WHERE L.Lead_Source = 'Website' AND Q.Quotation_No IS NULL;"}}]"}
{"timestamp": "2025-12-12 12:38:06,947", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 12:38:08,476", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all sale orders with corresponding quotation value., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:38:08,491", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all customer leads along with their quotation numbers and quotation amounts."}
{"timestamp": "2025-12-12 12:38:08,491", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all customer leads along with their quotation numbers and quotation amounts.'}]"}
{"timestamp": "2025-12-12 12:38:09,495", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders along with their corresponding quotation values."}
{"timestamp": "2025-12-12 12:38:09,910", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:38:09,910", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}]"}
{"timestamp": "2025-12-12 12:42:04,213", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 12:42:06,464", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show sale orders with all item-level details (product, qty, rate)., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:42:06,477", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale orders along with their corresponding quotation values."}
{"timestamp": "2025-12-12 12:42:06,478", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their corresponding quotation values.'}]"}
{"timestamp": "2025-12-12 12:42:07,678", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders along with their corresponding quotation values, including all item-level details such as product, ordered quantity, and item rate."}
{"timestamp": "2025-12-12 12:42:08,063", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:42:08,070", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Show item-wise details for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_SaleOrderdtls WHERE SaleOrder_No = 'SO12345';"}}]"}
{"timestamp": "2025-12-12 12:43:55,140", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 12:43:57,384", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find sale orders that do NOT have any schedule entries, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:43:57,396", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale orders along with their corresponding quotation values, including all item-level details such as product, ordered quantity, and item rate."}
{"timestamp": "2025-12-12 12:43:57,398", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their corresponding quotation values, including all item-level details such as product, ordered quantity, and item rate.'}]"}
{"timestamp": "2025-12-12 12:43:58,891", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders along with their corresponding quotation values and all item-level details such as product, ordered quantity, and item rate, where the sale orders do NOT have any schedule entries."}
{"timestamp": "2025-12-12 12:43:59,330", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:43:59,330", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Show item-wise details for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_SaleOrderdtls WHERE SaleOrder_No = 'SO12345';"}}]"}
{"timestamp": "2025-12-12 12:44:02,932", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 12:45:28,338", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 12:45:29,969", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find sale orders that do NOT have any schedule entries, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 12:45:29,984", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 12:45:29,987", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their corresponding quotation values and all item-level details such as product, ordered quantity, and item rate, where the sale orders do NOT have any schedule entries.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 12:45:31,037", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders that do NOT have any associated delivery schedule or schedule entries."}
{"timestamp": "2025-12-12 12:45:31,470", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 12:45:31,478", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show sale orders missing schedule entries.', 'query': {'query': 'SELECT S.* FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Schedules C ON S.SaleOrder_No = C.SaleOrder_No WHERE C.Schedule_ID IS NULL;'}}, {'input': 'Show all schedules for a specific sale order.', 'query': {'query': "SELECT * FROM Ponpure_Schedules WHERE SaleOrder_No = 'SO1001';"}}]"}
{"timestamp": "2025-12-12 12:45:49,639", "logger": "app", "level": "ERROR", "message": "Unexpected error: Object of type Decimal is not JSON serializable"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 899, in submit_query
    return JSONResponse(content=convert_dates(response_data))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\env\Lib\site-packages\starlette\responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\env\Lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\env\Lib\site-packages\starlette\responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\simra\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\simra\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\simra\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\simra\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Decimal is not JSON serializable
{"timestamp": "2025-12-12 14:05:48,043", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 14:06:07,081", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all sale orders with corresponding quotation value., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:06:07,092", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 14:06:07,097", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their corresponding quotation values and all item-level details such as product, ordered quantity, and item rate, where the sale orders do NOT have any schedule entries.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 14:06:09,346", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders along with their corresponding quotation values."}
{"timestamp": "2025-12-12 14:06:11,169", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:06:11,172", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}]"}
{"timestamp": "2025-12-12 14:13:36,701", "logger": "app", "level": "INFO", "message": "Received /submit request with query: only show the data for header id 1054320, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:13:36,713", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale orders along with their corresponding quotation values."}
{"timestamp": "2025-12-12 14:13:36,714", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their corresponding quotation values.'}]"}
{"timestamp": "2025-12-12 14:13:39,569", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders along with their corresponding quotation values for the sale order with header id 1054320."}
{"timestamp": "2025-12-12 14:13:40,731", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:13:40,733", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}]"}
{"timestamp": "2025-12-12 14:14:40,151", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 14:14:47,100", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all quotations created this month with total_value above 1 lakh, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:14:47,136", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale orders along with their corresponding quotation values for the sale order with header id 1054320."}
{"timestamp": "2025-12-12 14:14:47,138", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their corresponding quotation values for the sale order with header id 1054320.'}]"}
{"timestamp": "2025-12-12 14:14:48,411", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations created in the current month where the total_value exceeds 100,000."}
{"timestamp": "2025-12-12 14:14:49,403", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:14:49,403", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 14:15:04,686", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 14:15:12,674", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all quotations created this month with total_value above 50000, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:15:12,689", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all quotations created in the current month where the total_value exceeds 100,000."}
{"timestamp": "2025-12-12 14:15:12,689", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations created in the current month where the total_value exceeds 100,000.'}]"}
{"timestamp": "2025-12-12 14:15:14,481", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations created in the current month where the total_value exceeds 50,000."}
{"timestamp": "2025-12-12 14:15:14,975", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:15:14,975", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 14:17:35,469", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 14:17:42,572", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all quotations  with total_value above 50000, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:17:42,586", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all quotations created in the current month where the total_value exceeds 50,000."}
{"timestamp": "2025-12-12 14:17:42,586", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations created in the current month where the total_value exceeds 50,000.'}]"}
{"timestamp": "2025-12-12 14:17:43,646", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations with total_value exceeding 50,000."}
{"timestamp": "2025-12-12 14:17:44,069", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:17:44,069", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 14:17:46,014", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 14:19:02,613", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 14:19:03,922", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all quotations with total_value above 50000, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:19:03,933", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 14:19:03,935", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations with total_value exceeding 50,000.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 14:19:04,896", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations where the total_value is greater than 50000."}
{"timestamp": "2025-12-12 14:19:05,294", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:19:05,294", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 14:19:07,601", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 14:20:25,090", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 14:20:26,567", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all quotations with total_value above 50000, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:20:26,576", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 14:20:26,579", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations where the total_value is greater than 50000.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 14:20:27,623", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations where the total_value is greater than 50000."}
{"timestamp": "2025-12-12 14:20:28,030", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:20:28,030", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 14:20:30,176", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 14:21:15,127", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 14:21:25,488", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 14:21:30,077", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all quotations with total_value above 50000, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:21:30,088", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 14:21:30,090", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations where the total_value is greater than 50000.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 14:21:30,800", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations where the total_value is greater than 50000."}
{"timestamp": "2025-12-12 14:21:31,201", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:21:31,201", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 14:21:33,862", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Users\simra\Documents\GitHub\lzdbquery-v6\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 14:23:43,955", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 14:23:51,986", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 14:23:54,090", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all quotations with total_value above 50000, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:23:54,110", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 14:23:54,110", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations where the total_value is greater than 50000.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 14:23:54,779", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations where the total_value is greater than 50000."}
{"timestamp": "2025-12-12 14:23:55,446", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:23:55,446", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 14:24:08,338", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 14:24:13,997", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all quotations with total_value above 100000, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 14:24:14,016", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all quotations where the total_value is greater than 50000."}
{"timestamp": "2025-12-12 14:24:14,017", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations where the total_value is greater than 50000.'}]"}
{"timestamp": "2025-12-12 14:24:15,236", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations where the total_value is greater than 100000."}
{"timestamp": "2025-12-12 14:24:15,657", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 14:24:15,659", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 14:59:36,924", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 15:00:07,103", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 15:00:37,186", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all sale orders with corresponding quotation value., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:00:37,211", "logger": "app", "level": "INFO", "message": "Chat history: user: Provide a list of all column names related to dispatch details, including key parameters such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status."}
{"timestamp": "2025-12-12 15:00:37,219", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Provide a list of all column names related to dispatch details, including key parameters such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status.'}]"}
{"timestamp": "2025-12-12 15:00:40,933", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders along with their corresponding quotation values, including key details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status, ensuring linkage between sale orders and their quotations."}
{"timestamp": "2025-12-12 15:00:41,980", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:00:41,984", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Get total dispatched quantity per sale order.', 'query': {'query': 'SELECT SaleOrder_No, SUM(Dispatch_Quantity) AS Total_Dispatched FROM Ponpure_DispatchDetails GROUP BY SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 15:00:54,735", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 15:01:35,688", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show 10 columns from Dispatch Details table, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:01:35,737", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 15:01:35,745", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their corresponding quotation values, including key details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status, ensuring linkage between sale orders and their quotations.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 15:01:37,456", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve any 10 columns from the Dispatch Details table."}
{"timestamp": "2025-12-12 15:01:38,366", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:01:38,366", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 15:03:55,228", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all sale orders with corresponding quotation value., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:03:55,283", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve any 10 columns from the Dispatch Details table."}
{"timestamp": "2025-12-12 15:03:55,286", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve any 10 columns from the Dispatch Details table.'}]"}
{"timestamp": "2025-12-12 15:03:56,315", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders along with their corresponding quotation values."}
{"timestamp": "2025-12-12 15:03:57,333", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:03:57,339", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}]"}
{"timestamp": "2025-12-12 15:07:33,948", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:07:34,006", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale orders along with their corresponding quotation values."}
{"timestamp": "2025-12-12 15:07:34,006", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their corresponding quotation values.'}]"}
{"timestamp": "2025-12-12 15:07:36,549", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation, including relevant details such as Dispatch Date, Shipment Status, and Order Status."}
{"timestamp": "2025-12-12 15:07:37,732", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:07:37,732", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}, {'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}]"}
{"timestamp": "2025-12-12 15:07:43,710", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 15:07:57,555", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 15:08:02,900", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:08:02,910", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 15:08:02,911", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation, including relevant details such as Dispatch Date, Shipment Status, and Order Status.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 15:08:04,554", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation."}
{"timestamp": "2025-12-12 15:08:05,504", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:08:05,506", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}, {'input': 'Show all pending sale orders.', 'query': {'query': "SELECT * FROM Ponpure_SaleorderHdrs WHERE Status = 'Pending';"}}]"}
{"timestamp": "2025-12-12 15:09:35,887", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts greater than 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:09:36,159", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation."}
{"timestamp": "2025-12-12 15:09:36,162", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation.'}]"}
{"timestamp": "2025-12-12 15:09:38,644", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders where the discount is greater than 10%."}
{"timestamp": "2025-12-12 15:09:41,717", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:09:41,728", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}]"}
{"timestamp": "2025-12-12 15:29:55,919", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all leads with lead_id, lead_source, lead_status, and created_date., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:29:56,202", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders where the discount is greater than 10%."}
{"timestamp": "2025-12-12 15:29:56,204", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders where the discount is greater than 10%.'}]"}
{"timestamp": "2025-12-12 15:29:59,185", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all customer leads with lead_id, lead_source, lead_status, and created_date."}
{"timestamp": "2025-12-12 15:30:00,276", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:30:00,278", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 leads with their customer name, email, phone and source.', 'query': {'query': 'SELECT Lead_ID, Customer_Name, Email_ID, Phone_No, Lead_Source, Created_Date FROM Ponpure_LeadDetails ORDER BY Created_Date DESC LIMIT 10;'}}, {'input': 'Find all leads that came from the website and have not yet received a quotation.', 'query': {'query': "SELECT L.* FROM Ponpure_LeadDetails L LEFT JOIN Ponpure_Quotationhdrs Q ON L.Lead_ID = Q.Lead_ID WHERE L.Lead_Source = 'Website' AND Q.Quotation_No IS NULL;"}}]"}
{"timestamp": "2025-12-12 15:31:53,009", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Display quotations and corresponding lead owner names., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:31:53,050", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all customer leads with lead_id, lead_source, lead_status, and created_date."}
{"timestamp": "2025-12-12 15:31:53,050", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all customer leads with lead_id, lead_source, lead_status, and created_date.'}]"}
{"timestamp": "2025-12-12 15:31:54,569", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations along with their corresponding lead owner names, including lead information such as lead_id, lead_source, lead_status, and created_date as context from customer leads."}
{"timestamp": "2025-12-12 15:31:55,524", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:31:55,533", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Find all leads that came from the website and have not yet received a quotation.', 'query': {'query': "SELECT L.* FROM Ponpure_LeadDetails L LEFT JOIN Ponpure_Quotationhdrs Q ON L.Lead_ID = Q.Lead_ID WHERE L.Lead_Source = 'Website' AND Q.Quotation_No IS NULL;"}}]"}
{"timestamp": "2025-12-12 15:32:00,998", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 15:34:30,003", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show sale orders with their item details, including order_number, item_code, quantity, and amount., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:34:30,060", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 15:34:30,060", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations along with their corresponding lead owner names, including lead information such as lead_id, lead_source, lead_status, and created_date as context from customer leads.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 15:34:31,790", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders along with their order items, including order_number, item_code, quantity, and amount."}
{"timestamp": "2025-12-12 15:34:32,860", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:34:32,860", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Show item-wise details for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_SaleOrderdtls WHERE SaleOrder_No = 'SO12345';"}}]"}
{"timestamp": "2025-12-12 15:36:02,950", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts greater than 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:36:02,973", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders along with their order items, including order_number, item_code, quantity, and amount."}
{"timestamp": "2025-12-12 15:36:02,973", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders along with their order items, including order_number, item_code, quantity, and amount.'}]"}
{"timestamp": "2025-12-12 15:36:04,398", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders along with their order items where the discount on any item is greater than 10%, including order_number, item_code, quantity, and amount."}
{"timestamp": "2025-12-12 15:36:05,077", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:36:05,077", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Show item-wise details for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_SaleOrderdtls WHERE SaleOrder_No = 'SO12345';"}}]"}
{"timestamp": "2025-12-12 15:39:08,290", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts greater than or equal to 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 15:39:08,316", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders along with their order items where the discount on any item is greater than 10%, including order_number, item_code, quantity, and amount."}
{"timestamp": "2025-12-12 15:39:08,316", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders along with their order items where the discount on any item is greater than 10%, including order_number, item_code, quantity, and amount.'}]"}
{"timestamp": "2025-12-12 15:39:10,049", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders along with their order items where the discount on any item is greater than or equal to 10%, including order_number, item_code, quantity, and amount."}
{"timestamp": "2025-12-12 15:39:16,822", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 15:39:16,825", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}]"}
{"timestamp": "2025-12-12 16:03:12,496", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all leads that have not been followed up within the last 7 days, section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:03:12,530", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders along with their order items where the discount on any item is greater than or equal to 10%, including order_number, item_code, quantity, and amount."}
{"timestamp": "2025-12-12 16:03:12,530", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders along with their order items where the discount on any item is greater than or equal to 10%, including order_number, item_code, quantity, and amount.'}]"}
{"timestamp": "2025-12-12 16:03:13,900", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all customer leads with their lead information and enquiry details where the leads have not been followed up within the last 7 days."}
{"timestamp": "2025-12-12 16:03:14,341", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:03:14,342", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find all leads that came from the website and have not yet received a quotation.', 'query': {'query': "SELECT L.* FROM Ponpure_LeadDetails L LEFT JOIN Ponpure_Quotationhdrs Q ON L.Lead_ID = Q.Lead_ID WHERE L.Lead_Source = 'Website' AND Q.Quotation_No IS NULL;"}}, {'input': 'Show the latest 10 leads with their customer name, email, phone and source.', 'query': {'query': 'SELECT Lead_ID, Customer_Name, Email_ID, Phone_No, Lead_Source, Created_Date FROM Ponpure_LeadDetails ORDER BY Created_Date DESC LIMIT 10;'}}]"}
{"timestamp": "2025-12-12 16:04:56,076", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show quotations pending customer approval along with expected closing dates., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:04:56,093", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all customer leads with their lead information and enquiry details where the leads have not been followed up within the last 7 days."}
{"timestamp": "2025-12-12 16:04:56,093", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all customer leads with their lead information and enquiry details where the leads have not been followed up within the last 7 days.'}]"}
{"timestamp": "2025-12-12 16:04:57,007", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations pending customer approval along with their expected closing dates."}
{"timestamp": "2025-12-12 16:04:57,445", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:04:57,447", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 16:05:28,560", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List quotations that expired or remain unclosed for more than 30 days., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:05:28,566", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all quotations pending customer approval along with their expected closing dates."}
{"timestamp": "2025-12-12 16:05:28,566", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations pending customer approval along with their expected closing dates.'}]"}
{"timestamp": "2025-12-12 16:05:29,679", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations with quotation status indicating expired or unclosed for more than 30 days, including their quotation date and quotation approval status."}
{"timestamp": "2025-12-12 16:05:30,069", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:05:30,071", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}, {'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}]"}
{"timestamp": "2025-12-12 16:05:33,670", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:06:14,589", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 16:06:41,328", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 16:06:45,013", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List quotations that expired or remain unclosed for more than 30 days., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:06:45,027", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:06:45,030", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations with quotation status indicating expired or unclosed for more than 30 days, including their quotation date and quotation approval status.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:06:46,208", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that have either expired or remain unclosed for more than 30 days, including relevant details such as quotation date, quotation status, quotation validity, quote number, quote value, and billing status."}
{"timestamp": "2025-12-12 16:06:46,591", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:06:46,592", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all quotations created in the last 7 days with amount and customer info.', 'query': {'query': 'SELECT Q.Quotation_No, Q.Quotation_Date, Q.Total_Amount, L.Customer_Name FROM Ponpure_Quotationhdrs Q JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID WHERE Q.Quotation_Date >= CURRENT_DATE - INTERVAL 7 DAY;'}}, {'input': 'Find quotations above 50,000 that have not converted to sale orders.', 'query': {'query': 'SELECT Q.* FROM Ponpure_Quotationhdrs Q LEFT JOIN Ponpure_SaleorderHdrs S ON Q.Quotation_No = S.Quotation_No WHERE Q.Total_Amount > 50000 AND S.SaleOrder_No IS NULL;'}}]"}
{"timestamp": "2025-12-12 16:06:51,046", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:13:18,550", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 16:13:41,377", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all missed or rescheduled customer visits with reasons., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:13:41,380", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:13:41,381", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that have either expired or remain unclosed for more than 30 days, including relevant details such as quotation date, quotation status, quotation validity, quote number, quote value, and billing status.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:13:42,771", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all customer visits that were either missed or rescheduled, including the reasons for each missed or rescheduled visit."}
{"timestamp": "2025-12-12 16:13:43,306", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:13:43,308", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find overdue schedules.', 'query': {'query': "SELECT * FROM Ponpure_Schedules WHERE Schedule_Date < CURRENT_DATE AND Status <> 'Completed';"}}, {'input': 'Find all leads that came from the website and have not yet received a quotation.', 'query': {'query': "SELECT L.* FROM Ponpure_LeadDetails L LEFT JOIN Ponpure_Quotationhdrs Q ON L.Lead_ID = Q.Lead_ID WHERE L.Lead_Source = 'Website' AND Q.Quotation_No IS NULL;"}}]"}
{"timestamp": "2025-12-12 16:16:35,401", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show cancelled sale orders with reasons., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:16:35,401", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all customer visits that were either missed or rescheduled, including the reasons for each missed or rescheduled visit."}
{"timestamp": "2025-12-12 16:16:35,401", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all customer visits that were either missed or rescheduled, including the reasons for each missed or rescheduled visit.'}]"}
{"timestamp": "2025-12-12 16:16:36,531", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all cancelled sale orders along with the reasons for cancellation."}
{"timestamp": "2025-12-12 16:16:36,975", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:16:36,975", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all pending sale orders.', 'query': {'query': "SELECT * FROM Ponpure_SaleorderHdrs WHERE Status = 'Pending';"}}, {'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}]"}
{"timestamp": "2025-12-12 16:17:00,169", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List dispatches created by a specific user with timestamps., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:17:00,173", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all cancelled sale orders along with the reasons for cancellation."}
{"timestamp": "2025-12-12 16:17:00,173", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all cancelled sale orders along with the reasons for cancellation.'}]"}
{"timestamp": "2025-12-12 16:17:01,016", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of dispatches created by a specific user, including their timestamps."}
{"timestamp": "2025-12-12 16:17:01,496", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:17:01,498", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}, {'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}]"}
{"timestamp": "2025-12-12 16:17:19,960", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:17:19,968", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of dispatches created by a specific user, including their timestamps."}
{"timestamp": "2025-12-12 16:17:19,969", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of dispatches created by a specific user, including their timestamps.'}]"}
{"timestamp": "2025-12-12 16:17:20,723", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of pending dispatches including their reason for delay."}
{"timestamp": "2025-12-12 16:17:21,155", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:17:21,156", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 16:17:24,979", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:17:53,272", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 16:18:05,763", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 16:18:09,269", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:18:09,280", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:18:09,280", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of pending dispatches including their reason for delay.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:18:10,505", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all pending dispatches including the reason for delay, along with relevant details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Aging, Shipment Status, and Dispatch Value."}
{"timestamp": "2025-12-12 16:18:10,949", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:18:10,950", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 16:18:15,826", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:21:58,504", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 16:23:10,737", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 16:23:21,706", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:23:21,709", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:23:21,710", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all pending dispatches including the reason for delay, along with relevant details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Aging, Shipment Status, and Dispatch Value.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:23:22,564", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all pending dispatches including the reason for delay, with relevant details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging."}
{"timestamp": "2025-12-12 16:23:22,970", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:23:22,971", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 16:23:26,998", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:25:44,460", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Display dispatches grouped by vehicle_number with dispatch_date and driver name., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:25:44,475", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:25:44,476", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all pending dispatches including the reason for delay, with relevant details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:25:45,542", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve dispatch records grouped by vehicle_number, including dispatch_date and driver name for each dispatch."}
{"timestamp": "2025-12-12 16:25:45,979", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:25:45,980", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List dispatches where vehicle number is missing.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE Vehicle_No IS NULL OR Vehicle_No = '';"}}, {'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}]"}
{"timestamp": "2025-12-12 16:25:46,821", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:26:10,292", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 16:26:11,670", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 16:26:15,857", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Display dispatches grouped by vehicle_number with dispatch_date and driver name., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:26:15,863", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:26:15,863", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve dispatch records grouped by vehicle_number, including dispatch_date and driver name for each dispatch.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:26:16,830", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve dispatch records grouped by vehicle_number, including dispatch_date and driver name for each dispatch."}
{"timestamp": "2025-12-12 16:26:17,243", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:26:17,245", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List dispatches where vehicle number is missing.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE Vehicle_No IS NULL OR Vehicle_No = '';"}}, {'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}]"}
{"timestamp": "2025-12-12 16:26:19,231", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:26:51,539", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show item-wise sale order details with item_code, quantity, rate, and amount., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:26:51,557", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:26:51,558", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve dispatch records grouped by vehicle_number, including dispatch_date and driver name for each dispatch.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:26:52,668", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve item-wise sale order details including item_code, quantity, rate, and amount from the sale order items."}
{"timestamp": "2025-12-12 16:26:53,113", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:26:53,113", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show item-wise details for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_SaleOrderdtls WHERE SaleOrder_No = 'SO12345';"}}, {'input': 'Retrieve all sale orders with customer name and quotation amount.', 'query': {'query': 'SELECT S.SaleOrder_No, S.SaleOrder_Date, L.Customer_Name, Q.Total_Amount FROM Ponpure_SaleorderHdrs S LEFT JOIN Ponpure_Quotationhdrs Q ON S.Quotation_No = Q.Quotation_No LEFT JOIN Ponpure_LeadDetails L ON Q.Lead_ID = L.Lead_ID;'}}]"}
{"timestamp": "2025-12-12 16:27:20,186", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all items sold in a particular sale order with uom and total line value., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:27:20,186", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve item-wise sale order details including item_code, quantity, rate, and amount from the sale order items."}
{"timestamp": "2025-12-12 16:27:20,186", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve item-wise sale order details including item_code, quantity, rate, and amount from the sale order items.'}]"}
{"timestamp": "2025-12-12 16:27:21,138", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the item_code, uom, and total line value for all items sold in a specified sale order from the sale order items."}
{"timestamp": "2025-12-12 16:27:21,538", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:27:21,539", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show item-wise details for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_SaleOrderdtls WHERE SaleOrder_No = 'SO12345';"}}, {'input': 'Calculate total order amount for each sale order.', 'query': {'query': 'SELECT SaleOrder_No, SUM(Quantity * Rate) AS Total_Amount FROM Ponpure_SaleOrderdtls GROUP BY SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 16:27:24,229", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:27:38,359", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Display sale order details filtered by product category., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:27:38,370", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:27:38,371", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the item_code, uom, and total line value for all items sold in a specified sale order from the sale order items.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:27:39,749", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale order details including Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Inventory Organization, Product Division, Dispatch Value, Shipment Status, and other relevant fields, filtered by the specified product category."}
{"timestamp": "2025-12-12 16:27:40,169", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:27:40,171", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show item-wise details for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_SaleOrderdtls WHERE SaleOrder_No = 'SO12345';"}}, {'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}]"}
{"timestamp": "2025-12-12 16:27:43,188", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:27:55,771", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show sale order lines grouped by item_code with total quantity., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:27:55,777", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:27:55,777", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale order details including Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Inventory Organization, Product Division, Dispatch Value, Shipment Status, and other relevant fields, filtered by the specified product category.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:27:57,353", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale order lines grouped by Item Code, including the total Ordered Quantity for each Item Code."}
{"timestamp": "2025-12-12 16:27:57,774", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:27:57,776", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Calculate total order amount for each sale order.', 'query': {'query': 'SELECT SaleOrder_No, SUM(Quantity * Rate) AS Total_Amount FROM Ponpure_SaleOrderdtls GROUP BY SaleOrder_No;'}}, {'input': 'Get total dispatched quantity per sale order.', 'query': {'query': 'SELECT SaleOrder_No, SUM(Dispatch_Quantity) AS Total_Dispatched FROM Ponpure_DispatchDetails GROUP BY SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 16:28:14,433", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:28:14,440", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale order lines grouped by Item Code, including the total Ordered Quantity for each Item Code."}
{"timestamp": "2025-12-12 16:28:14,440", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale order lines grouped by Item Code, including the total Ordered Quantity for each Item Code.'}]"}
{"timestamp": "2025-12-12 16:28:15,351", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Ordered Quantity, Shipped Quantity, Dispatch Aging, Shipment Status, and Dispatch Value."}
{"timestamp": "2025-12-12 16:28:15,732", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:28:15,732", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Get total dispatched quantity per sale order.', 'query': {'query': 'SELECT SaleOrder_No, SUM(Dispatch_Quantity) AS Total_Dispatched FROM Ponpure_DispatchDetails GROUP BY SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 16:28:19,143", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:40:51,968", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show sale order lines grouped by item_code with total quantity., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:40:52,033", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:40:52,033", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Ordered Quantity, Shipped Quantity, Dispatch Aging, Shipment Status, and Dispatch Value.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:40:53,720", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale order lines grouped by Item Code, including the total Ordered Quantity for each Item Code."}
{"timestamp": "2025-12-12 16:40:54,443", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:40:54,445", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Calculate total order amount for each sale order.', 'query': {'query': 'SELECT SaleOrder_No, SUM(Quantity * Rate) AS Total_Amount FROM Ponpure_SaleOrderdtls GROUP BY SaleOrder_No;'}}, {'input': 'Get total dispatched quantity per sale order.', 'query': {'query': 'SELECT SaleOrder_No, SUM(Dispatch_Quantity) AS Total_Dispatched FROM Ponpure_DispatchDetails GROUP BY SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 16:41:06,192", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:41:06,203", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale order lines grouped by Item Code, including the total Ordered Quantity for each Item Code."}
{"timestamp": "2025-12-12 16:41:06,204", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale order lines grouped by Item Code, including the total Ordered Quantity for each Item Code.'}]"}
{"timestamp": "2025-12-12 16:41:07,449", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Ordered Quantity, Shipped Quantity, Dispatch Aging, Shipment Status, and Dispatch Value."}
{"timestamp": "2025-12-12 16:41:07,849", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:41:07,850", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Get total dispatched quantity per sale order.', 'query': {'query': 'SELECT SaleOrder_No, SUM(Dispatch_Quantity) AS Total_Dispatched FROM Ponpure_DispatchDetails GROUP BY SaleOrder_No;'}}]"}
{"timestamp": "2025-12-12 16:41:12,540", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:46:31,353", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:46:31,370", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:46:31,370", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Ordered Quantity, Shipped Quantity, Dispatch Aging, Shipment Status, and Dispatch Value.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:46:32,322", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging."}
{"timestamp": "2025-12-12 16:46:32,948", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:46:32,949", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 16:46:33,132", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 16:52:16,957", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 16:52:22,342", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 16:52:46,348", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 16:52:46,355", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 16:52:46,355", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 16:52:47,701", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, Dispatch Aging, and any relevant delay reasons."}
{"timestamp": "2025-12-12 16:52:48,110", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'Lead_ID', 'target_key': 'Lead_ID', 'description': 'A lead can have multiple quotations; some leads may have none.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'Quotation_No', 'target_key': 'Quotation_No', 'description': 'A quotation may convert into a sale order; not all quotations convert.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'A sale order can have multiple line-item details.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple schedules or sometimes none.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'SaleOrder_No', 'target_key': 'SaleOrder_No', 'description': 'Sale order may have multiple dispatch events based on actual deliveries.'}]}"}
{"timestamp": "2025-12-12 16:52:48,112", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 16:52:53,336", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 17:52:44,971", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 17:53:07,694", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 17:53:14,771", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 17:53:19,537", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 17:53:19,546", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 17:53:19,548", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, Dispatch Aging, and any relevant delay reasons.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 17:53:20,794", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all pending dispatches including the reason for delay, with available details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging."}
{"timestamp": "2025-12-12 17:53:21,223", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [], 'Ponpure_Schedules': [], 'Ponpure_Quotationhdrs': [], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}]}"}
{"timestamp": "2025-12-12 17:53:21,224", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 17:53:24,685", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 17:54:30,446", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 17:54:39,416", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 17:54:48,460", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 17:54:48,474", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 17:54:48,476", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all pending dispatches including the reason for delay, with available details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 17:54:49,672", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging."}
{"timestamp": "2025-12-12 17:54:50,060", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [], 'Ponpure_Schedules': [], 'Ponpure_Quotationhdrs': [], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}]}"}
{"timestamp": "2025-12-12 17:54:50,061", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 17:54:50,133", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 17:58:06,978", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 17:58:23,795", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 17:58:38,022", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 17:58:38,031", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 17:58:38,032", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 17:58:39,426", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging."}
{"timestamp": "2025-12-12 17:58:39,818", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [], 'Ponpure_Schedules': [], 'Ponpure_Quotationhdrs': [], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}]}"}
{"timestamp": "2025-12-12 17:58:39,820", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show last 10 dispatches with sale order number and quantity.', 'query': {'query': 'SELECT Dispatch_ID, SaleOrder_No, Dispatch_Quantity, Dispatch_Date FROM Ponpure_DispatchDetails ORDER BY Dispatch_Date DESC LIMIT 10;'}}, {'input': 'Find dispatches for a given sale order.', 'query': {'query': "SELECT * FROM Ponpure_DispatchDetails WHERE SaleOrder_No = 'SO5002';"}}]"}
{"timestamp": "2025-12-12 17:58:43,514", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-12 18:14:07,226", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-12 18:14:36,511", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-12 18:14:42,928", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show the most recent 10 quotations., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 18:14:42,931", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-12 18:14:42,933", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all pending dispatches including the reason for delay, with details such as Dispatch Date, Item Code, Item Description, Shipment Status, and Dispatch Aging.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-12 18:14:44,095", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the most recent 10 quotations with all relevant quotation details including quote number, quotation date, quotation status, quotation approval, quotation linked to lead, and quote value."}
{"timestamp": "2025-12-12 18:14:44,501", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [], 'Ponpure_Schedules': [], 'Ponpure_Quotationhdrs': [], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}]}"}
{"timestamp": "2025-12-12 18:14:44,501", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}, {'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-12 18:16:43,090", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending dispatches with reason for delay., section: Azure-SQL-DB"}
{"timestamp": "2025-12-12 18:16:43,110", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the most recent 10 quotations with all relevant quotation details including quote number, quotation date, quotation status, quotation approval, quotation linked to lead, and quote value."}
{"timestamp": "2025-12-12 18:16:43,111", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the most recent 10 quotations with all relevant quotation details including quote number, quotation date, quotation status, quotation approval, quotation linked to lead, and quote value.'}]"}
{"timestamp": "2025-12-12 18:16:45,236", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all pending dispatches including all relevant dispatch details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, Billing Status, along with the reason for delay."}
{"timestamp": "2025-12-12 18:16:45,627", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [], 'Ponpure_Schedules': [], 'Ponpure_Quotationhdrs': [], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}]}"}
{"timestamp": "2025-12-12 18:16:45,628", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show the last 10 dispatch records.', 'query': {'query': 'SELECT TOP 10 sale_order_header_id, sale_order_detail_line_id, schedule_quantity, sale_quantity, total_value, schedule_date FROM Ponpure_DispatchDetails ORDER BY schedule_date DESC;'}}]"}
{"timestamp": "2025-12-13 20:13:43,719", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all sale orders that are delayed beyond their expected dispatch date along with the delay days., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 20:13:43,796", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all pending dispatches including all relevant dispatch details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, Billing Status, along with the reason for delay."}
{"timestamp": "2025-12-13 20:13:43,808", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all pending dispatches including all relevant dispatch details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, Billing Status, along with the reason for delay.'}]"}
{"timestamp": "2025-12-13 20:13:47,353", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders where the shipment status indicates a delay beyond the expected dispatch date, including the delay days, along with the following dispatch details: Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, Billing Status, and the reason for delay."}
{"timestamp": "2025-12-13 20:13:48,469", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [], 'Ponpure_Schedules': [], 'Ponpure_Quotationhdrs': [], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}]}"}
{"timestamp": "2025-12-13 20:13:48,472", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-13 20:13:55,830", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-13 20:22:04,363", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-13 20:22:09,628", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show the latest 5 sale orders., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 20:22:09,646", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-13 20:22:09,647", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders where the shipment status indicates a delay beyond the expected dispatch date, including the delay days, along with the following dispatch details: Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, Billing Status, and the reason for delay.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-13 20:22:10,936", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the latest 5 sale orders including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dealer Name, Dispatch Value, Shipment Status, and Order Type."}
{"timestamp": "2025-12-13 20:22:11,603", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [], 'Ponpure_Schedules': [], 'Ponpure_Quotationhdrs': [], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'Each sale order header contains multiple sale order detail line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch entries linked by sale_order_header_id.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleOrderdtls', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'sale_order_detail_line_id', 'description': 'Each sale order line can generate multiple dispatch line entries.'}]}"}
{"timestamp": "2025-12-13 20:22:11,603", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-13 20:22:16,099", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-13 20:36:55,502", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-13 21:21:57,914", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-13 21:22:09,399", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-13 21:22:52,761", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all leads created this month with their email and phone number, section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:22:52,774", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-13 21:22:52,777", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the latest 5 sale orders including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dealer Name, Dispatch Value, Shipment Status, and Order Type.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-13 21:22:54,020", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all customer leads created in the current month, including their customer email and customer phone contact details."}
{"timestamp": "2025-12-13 21:22:56,380", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:22:56,383", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 leads.', 'query': {'query': 'SELECT TOP 10 lead_id, created_by, creation_date FROM Ponpure_LeadDetails ORDER BY creation_date DESC;'}}, {'input': 'List leads created by a specific employee.', 'query': {'query': 'SELECT lead_id, creation_date FROM Ponpure_LeadDetails WHERE created_by = 55;'}}]"}
{"timestamp": "2025-12-13 21:23:36,050", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-13 21:24:48,967", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show dispatch details for the last 10 dispatch transactions., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:24:48,982", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-13 21:24:48,982", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all customer leads created in the current month, including their customer email and customer phone contact details.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-13 21:24:50,536", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve dispatch details including Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status for the last 10 dispatch transactions."}
{"timestamp": "2025-12-13 21:24:55,366", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:24:55,369", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show the last 10 dispatch records.', 'query': {'query': 'SELECT TOP 10 sale_order_header_id, sale_order_detail_line_id, schedule_quantity, sale_quantity, total_value, schedule_date FROM Ponpure_DispatchDetails ORDER BY schedule_date DESC;'}}]"}
{"timestamp": "2025-12-13 21:29:15,556", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all leads that have at least one quotation, section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:29:15,592", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve dispatch details including Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status for the last 10 dispatch transactions."}
{"timestamp": "2025-12-13 21:29:15,592", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve dispatch details including Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status for the last 10 dispatch transactions.'}]"}
{"timestamp": "2025-12-13 21:29:33,276", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all lead information for customer leads that have at least one quotation linked to the lead, including enquiry details, contact details, customer email, customer phone, lead date, lead source, and quotation details such as quote number, quote value, quote status, and quotation date."}
{"timestamp": "2025-12-13 21:29:45,944", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:29:45,944", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 leads.', 'query': {'query': 'SELECT TOP 10 lead_id, created_by, creation_date FROM Ponpure_LeadDetails ORDER BY creation_date DESC;'}}]"}
{"timestamp": "2025-12-13 21:31:01,458", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List sale orders and their total ordered quantity, section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:31:01,472", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all lead information for customer leads that have at least one quotation linked to the lead, including enquiry details, contact details, customer email, customer phone, lead date, lead source, and quotation details such as quote number, quote value, quote status, and quotation date."}
{"timestamp": "2025-12-13 21:31:01,472", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all lead information for customer leads that have at least one quotation linked to the lead, including enquiry details, contact details, customer email, customer phone, lead date, lead source, and quotation details such as quote number, quote value, quote status, and quotation date.'}]"}
{"timestamp": "2025-12-13 21:31:08,182", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders along with their total ordered quantity, including details such as order number and total ordered quantity aggregated from order items."}
{"timestamp": "2025-12-13 21:31:16,186", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:31:16,194", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-13 21:33:33,223", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-13 21:39:33,678", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List sale orders and their total ordered quantity, section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:39:33,760", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-13 21:39:33,760", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders along with their total ordered quantity, including details such as order number and total ordered quantity aggregated from order items.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-13 21:39:35,791", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders along with their total ordered quantity."}
{"timestamp": "2025-12-13 21:39:36,683", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:39:36,683", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-13 21:50:21,414", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show sale orders that have dispatch entries., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:50:21,496", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders along with their total ordered quantity."}
{"timestamp": "2025-12-13 21:50:21,496", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders along with their total ordered quantity.'}]"}
{"timestamp": "2025-12-13 21:50:22,730", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders along with their total ordered quantity, filtered to include only those sale orders that have associated dispatch entries."}
{"timestamp": "2025-12-13 21:50:23,651", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:50:23,652", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-13 21:52:06,790", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all leads that have been converted to quotations., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:52:06,792", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders along with their total ordered quantity, filtered to include only those sale orders that have associated dispatch entries."}
{"timestamp": "2025-12-13 21:52:06,804", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders along with their total ordered quantity, filtered to include only those sale orders that have associated dispatch entries.'}]"}
{"timestamp": "2025-12-13 21:52:08,530", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all lead information for customer leads that have been converted to quotations, including enquiry details, contact details, customer email, customer phone, lead date, lead source, quotation number, quote value, quote amount, quote status, quotation date, quotation approval, and ensure the quotations are linked to the leads."}
{"timestamp": "2025-12-13 21:52:09,585", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:52:09,590", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 leads.', 'query': {'query': 'SELECT TOP 10 lead_id, created_by, creation_date FROM Ponpure_LeadDetails ORDER BY creation_date DESC;'}}]"}
{"timestamp": "2025-12-13 21:52:59,322", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all sale orders with their total ordered quantity., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:52:59,343", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all lead information for customer leads that have been converted to quotations, including enquiry details, contact details, customer email, customer phone, lead date, lead source, quotation number, quote value, quote amount, quote status, quotation date, quotation approval, and ensure the quotations are linked to the leads."}
{"timestamp": "2025-12-13 21:52:59,343", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all lead information for customer leads that have been converted to quotations, including enquiry details, contact details, customer email, customer phone, lead date, lead source, quotation number, quote value, quote amount, quote status, quotation date, quotation approval, and ensure the quotations are linked to the leads.'}]"}
{"timestamp": "2025-12-13 21:53:00,623", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders along with their total ordered quantity."}
{"timestamp": "2025-12-13 21:53:01,398", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:53:01,405", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-13 21:55:32,954", "logger": "app", "level": "INFO", "message": "Received /submit request with query: only those where total ordered quantity is more than 100., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:55:32,981", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale orders along with their total ordered quantity."}
{"timestamp": "2025-12-13 21:55:32,981", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their total ordered quantity.'}]"}
{"timestamp": "2025-12-13 21:55:34,341", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders along with their total ordered quantity, only including those where the total ordered quantity is more than 100."}
{"timestamp": "2025-12-13 21:55:35,056", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:55:35,065", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-13 21:58:39,569", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-13 21:58:43,309", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-13 21:58:48,123", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List customers with the number of sale orders they placed., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:58:48,138", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale orders along with their total ordered quantity, only including those where the total ordered quantity is more than 100."}
{"timestamp": "2025-12-13 21:58:48,140", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders along with their total ordered quantity, only including those where the total ordered quantity is more than 100.'}]"}
{"timestamp": "2025-12-13 21:58:54,443", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers along with the count of sale orders they have placed."}
{"timestamp": "2025-12-13 21:58:55,513", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:58:55,521", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-13 21:59:17,909", "logger": "app", "level": "INFO", "message": "Received /submit request with query: give the names of customers too, section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 21:59:17,922", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customers along with the count of sale orders they have placed."}
{"timestamp": "2025-12-13 21:59:17,922", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers along with the count of sale orders they have placed.'}]"}
{"timestamp": "2025-12-13 21:59:19,418", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers along with their names and the count of sale orders they have placed."}
{"timestamp": "2025-12-13 21:59:25,153", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 21:59:25,157", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-13 21:59:30,674", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-13 22:00:17,860", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show only the top 5 customers., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 22:00:17,886", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-13 22:00:17,886", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers along with their names and the count of sale orders they have placed.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-13 22:00:19,521", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top 5 customers based on relevant criteria such as Dispatch Value or Shipped Quantity."}
{"timestamp": "2025-12-13 22:00:20,854", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 22:00:20,854", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the last 10 dispatch records.', 'query': {'query': 'SELECT TOP 10 sale_order_header_id, sale_order_detail_line_id, schedule_quantity, sale_quantity, total_value, schedule_date FROM Ponpure_DispatchDetails ORDER BY schedule_date DESC;'}}]"}
{"timestamp": "2025-12-13 22:00:24,219", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-13 22:01:22,758", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-13 22:01:29,524", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List customers with the number of sale orders they placed., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 22:01:29,538", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-13 22:01:29,538", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top 5 customers based on relevant criteria such as Dispatch Value or Shipped Quantity.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-13 22:01:30,688", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve a list of customers along with the count of sale orders they have placed."}
{"timestamp": "2025-12-13 22:01:31,328", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 22:01:31,337", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-13 22:09:05,999", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show total dispatched quantity for these customers., section: Azure-SQL-DB"}
{"timestamp": "2025-12-13 22:09:06,075", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve a list of customers along with the count of sale orders they have placed."}
{"timestamp": "2025-12-13 22:09:06,075", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve a list of customers along with the count of sale orders they have placed.'}]"}
{"timestamp": "2025-12-13 22:09:07,991", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total dispatched quantity for the list of customers along with the count of sale orders they have placed."}
{"timestamp": "2025-12-13 22:09:09,034", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-13 22:09:09,034", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-13 22:09:12,957", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-13 23:49:05,905", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 00:14:51,433", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 12:14:19,804", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 12:15:32,285", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 12:15:38,071", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all customers who have raised sale orders., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:15:38,076", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-14 12:15:38,076", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total dispatched quantity for the list of customers along with the count of sale orders they have placed.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-14 12:15:39,472", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all customers who have raised sale orders, including their customer details and associated sale order information."}
{"timestamp": "2025-12-14 12:15:40,564", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:15:40,569", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-14 12:15:54,341", "logger": "app", "level": "ERROR", "message": "Data processing error: unsupported format string passed to Series.__format__"}
{"timestamp": "2025-12-14 12:16:17,673", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 12:16:21,350", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all customers who have raised sale orders, section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:16:21,366", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all customers who have raised sale orders, including their customer details and associated sale order information."}
{"timestamp": "2025-12-14 12:16:21,367", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all customers who have raised sale orders, including their customer details and associated sale order information.'}]"}
{"timestamp": "2025-12-14 12:16:24,303", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all customers who have raised sale orders, including their customer details and associated sale order information."}
{"timestamp": "2025-12-14 12:16:25,281", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:16:25,281", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-14 12:16:48,932", "logger": "app", "level": "ERROR", "message": "Unexpected error: Object of type Decimal is not JSON serializable"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 899, in submit_query
    return JSONResponse(content=convert_dates(response_data))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Decimal is not JSON serializable
{"timestamp": "2025-12-14 12:17:28,302", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-14 12:17:46,176", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 12:17:50,047", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show all customers who have raised sale orders, section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:17:50,059", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all customers who have raised sale orders, including their customer details and associated sale order information."}
{"timestamp": "2025-12-14 12:17:50,061", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all customers who have raised sale orders, including their customer details and associated sale order information.'}]"}
{"timestamp": "2025-12-14 12:17:51,441", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all customers who have raised sale orders, including their customer details and associated sale order information."}
{"timestamp": "2025-12-14 12:17:52,157", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:17:52,157", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-14 12:18:04,153", "logger": "app", "level": "ERROR", "message": "Data processing error: unsupported format string passed to Series.__format__"}
{"timestamp": "2025-12-14 12:18:25,553", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all quotation numbers created., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:18:25,572", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all customers who have raised sale orders, including their customer details and associated sale order information."}
{"timestamp": "2025-12-14 12:18:25,572", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all customers who have raised sale orders, including their customer details and associated sale order information.'}]"}
{"timestamp": "2025-12-14 12:18:26,564", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotation numbers created, including their quotation details."}
{"timestamp": "2025-12-14 12:18:27,165", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:18:27,165", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-14 12:20:05,935", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show only quotations with total_value greater than 10,000., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:20:05,959", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all quotation numbers created, including their quotation details."}
{"timestamp": "2025-12-14 12:20:05,959", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotation numbers created, including their quotation details.'}]"}
{"timestamp": "2025-12-14 12:20:07,328", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotation numbers and their quotation details where the total_value is greater than 10,000."}
{"timestamp": "2025-12-14 12:20:13,132", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:20:13,139", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Find line items with unit price above 1000.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price FROM Ponpure_SaleOrderdtls WHERE unit_price > 1000;'}}]"}
{"timestamp": "2025-12-14 12:21:00,982", "logger": "app", "level": "INFO", "message": "Received /submit request with query: For these quotations, show the related sale orders., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:21:00,993", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all quotation numbers and their quotation details where the total_value is greater than 10,000."}
{"timestamp": "2025-12-14 12:21:00,993", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotation numbers and their quotation details where the total_value is greater than 10,000.'}]"}
{"timestamp": "2025-12-14 12:21:02,511", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the related sale orders for all quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:21:03,241", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:21:03,241", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-14 12:23:14,699", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 12:23:22,218", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show total ordered quantity per customer., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:23:22,232", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the related sale orders for all quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:23:22,232", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the related sale orders for all quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details.'}]"}
{"timestamp": "2025-12-14 12:23:23,620", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total ordered quantity grouped by customer for all sale orders linked to quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:23:24,449", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:23:24,449", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-14 12:24:26,187", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customer has the highest total ordered quantity?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:24:26,197", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total ordered quantity grouped by customer for all sale orders linked to quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:24:26,197", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total ordered quantity grouped by customer for all sale orders linked to quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details.'}]"}
{"timestamp": "2025-12-14 12:24:27,832", "logger": "app", "level": "INFO", "message": "reframed query after modification: Identify the customer with the highest total ordered quantity from all sale orders linked to quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:24:28,858", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:24:28,860", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 12:25:10,056", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show item-wise ordered quantity for this customer., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:25:10,077", "logger": "app", "level": "INFO", "message": "Chat history: user: Identify the customer with the highest total ordered quantity from all sale orders linked to quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:25:10,079", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Identify the customer with the highest total ordered quantity from all sale orders linked to quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details.'}]"}
{"timestamp": "2025-12-14 12:25:11,655", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the item-wise ordered quantity for the customer identified as having the highest total ordered quantity from all sale orders linked to quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:25:12,477", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:25:12,488", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 12:25:50,476", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show dispatched quantity for these items., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:25:50,493", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the item-wise ordered quantity for the customer identified as having the highest total ordered quantity from all sale orders linked to quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:25:50,497", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the item-wise ordered quantity for the customer identified as having the highest total ordered quantity from all sale orders linked to quotations where the total_value is greater than 10,000, including quotation numbers and their quotation details.'}]"}
{"timestamp": "2025-12-14 12:25:51,797", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the dispatched quantity for the items ordered by the customer with the highest total ordered quantity from all sale orders linked to quotations where the total_value exceeds 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:25:52,751", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:25:52,751", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 12:28:02,557", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 12:28:09,353", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show sale orders where total sales price per item exceeds 50,000., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:28:09,361", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the dispatched quantity for the items ordered by the customer with the highest total ordered quantity from all sale orders linked to quotations where the total_value exceeds 10,000, including quotation numbers and their quotation details."}
{"timestamp": "2025-12-14 12:28:09,361", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the dispatched quantity for the items ordered by the customer with the highest total ordered quantity from all sale orders linked to quotations where the total_value exceeds 10,000, including quotation numbers and their quotation details.'}]"}
{"timestamp": "2025-12-14 12:28:10,962", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders and their order items where the total sales price per item exceeds 50,000, including relevant details such as Item Code, Item Description, Ordered Quantity, and Dispatch Value."}
{"timestamp": "2025-12-14 12:28:11,726", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:28:11,728", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-14 12:29:04,886", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show only those items where discount_percentage > 0., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:29:04,902", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders and their order items where the total sales price per item exceeds 50,000, including relevant details such as Item Code, Item Description, Ordered Quantity, and Dispatch Value."}
{"timestamp": "2025-12-14 12:29:04,906", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders and their order items where the total sales price per item exceeds 50,000, including relevant details such as Item Code, Item Description, Ordered Quantity, and Dispatch Value.'}]"}
{"timestamp": "2025-12-14 12:29:06,368", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders and their order items where the total sales price per item exceeds 50,000 and discount_percentage is greater than 0, including Item Code, Item Description, Ordered Quantity, and Dispatch Value."}
{"timestamp": "2025-12-14 12:29:07,201", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:29:07,201", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 12:30:06,966", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 12:30:15,592", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show the number of sale orders per organization_id., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:30:15,602", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders and their order items where the total sales price per item exceeds 50,000 and discount_percentage is greater than 0, including Item Code, Item Description, Ordered Quantity, and Dispatch Value."}
{"timestamp": "2025-12-14 12:30:15,605", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders and their order items where the total sales price per item exceeds 50,000 and discount_percentage is greater than 0, including Item Code, Item Description, Ordered Quantity, and Dispatch Value.'}]"}
{"timestamp": "2025-12-14 12:30:17,118", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of sale orders grouped by organization_id."}
{"timestamp": "2025-12-14 12:30:29,122", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:30:29,122", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-14 12:30:56,552", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show total dispatches for these organizations., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:30:56,575", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of sale orders grouped by organization_id."}
{"timestamp": "2025-12-14 12:30:56,579", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of sale orders grouped by organization_id.'}]"}
{"timestamp": "2025-12-14 12:30:57,762", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total dispatches grouped by organization_id for the organizations with sale orders."}
{"timestamp": "2025-12-14 12:30:58,596", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:30:58,596", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-14 12:33:14,942", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show item groups dispatched for each organization., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:33:14,968", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total dispatches grouped by organization_id for the organizations with sale orders."}
{"timestamp": "2025-12-14 12:33:14,968", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total dispatches grouped by organization_id for the organizations with sale orders.'}]"}
{"timestamp": "2025-12-14 12:33:15,896", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the item groups dispatched for each organization that has sale orders."}
{"timestamp": "2025-12-14 12:33:16,670", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:33:16,675", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-14 12:34:34,210", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show schedules pending dispatch for these organizations., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:34:34,217", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the item groups dispatched for each organization that has sale orders."}
{"timestamp": "2025-12-14 12:34:34,217", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the item groups dispatched for each organization that has sale orders.'}]"}
{"timestamp": "2025-12-14 12:34:35,751", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the schedules pending dispatch for organizations that have sale orders, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, and Dispatch Aging."}
{"timestamp": "2025-12-14 12:34:36,476", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:34:36,476", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-14 12:46:34,705", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 12:46:38,276", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show customer-wise total ordered quantity, scheduled quantity, and dispatched quantity., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 12:46:38,288", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the schedules pending dispatch for organizations that have sale orders, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, and Dispatch Aging."}
{"timestamp": "2025-12-14 12:46:38,288", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the schedules pending dispatch for organizations that have sale orders, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, and Dispatch Aging.'}]"}
{"timestamp": "2025-12-14 12:46:39,954", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total ordered quantity, total scheduled quantity, and total dispatched quantity grouped by customer for organizations that have sale orders, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, and Dispatch Aging."}
{"timestamp": "2025-12-14 12:46:45,785", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 12:46:45,786", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-14 12:46:54,682", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-14 19:12:10,201", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 19:25:20,574", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show total ordered quantity per customer, section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 19:25:20,625", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-14 19:25:20,635", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total ordered quantity, total scheduled quantity, and total dispatched quantity grouped by customer for organizations that have sale orders, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, and Dispatch Aging.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-14 19:25:24,237", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:25:25,386", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 19:25:25,386", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 19:31:33,042", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customer has the highest total ordered quantity?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 19:31:33,092", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:31:33,092", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total Ordered Quantity grouped by each customer.'}]"}
{"timestamp": "2025-12-14 19:31:34,753", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the customer with the highest total Ordered Quantity by aggregating the Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:31:35,719", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 19:31:35,723", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 19:32:38,963", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 19:32:42,500", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 19:33:49,152", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show total ordered quantity per customer., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 19:33:49,171", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the customer with the highest total Ordered Quantity by aggregating the Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:33:49,178", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the customer with the highest total Ordered Quantity by aggregating the Ordered Quantity grouped by each customer.'}]"}
{"timestamp": "2025-12-14 19:33:50,154", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:33:55,911", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 19:33:55,920", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 19:36:45,996", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customer has the highest total ordered quantity?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 19:36:46,010", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:36:46,010", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total Ordered Quantity grouped by each customer.'}]"}
{"timestamp": "2025-12-14 19:36:47,413", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the customer with the highest total Ordered Quantity by aggregating the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:36:48,962", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 19:36:48,962", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 19:55:05,756", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 19:56:29,607", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show total ordered quantity per customer., section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 19:56:29,624", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the customer with the highest total Ordered Quantity by aggregating the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:56:29,624", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the customer with the highest total Ordered Quantity by aggregating the total Ordered Quantity grouped by each customer.'}]"}
{"timestamp": "2025-12-14 19:56:31,989", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:56:33,241", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 19:56:33,241", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 19:59:44,712", "logger": "app", "level": "INFO", "message": "Received /submit request with query: which customer has the highest order, section: Azure-SQL-DB"}
{"timestamp": "2025-12-14 19:59:44,732", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:59:44,732", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total Ordered Quantity grouped by each customer.'}]"}
{"timestamp": "2025-12-14 19:59:51,974", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the customer with the highest total Ordered Quantity based on the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-14 19:59:52,975", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-14 19:59:52,975", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-14 20:00:21,631", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-14 20:00:24,695", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 09:41:23,347", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 09:41:25,205", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 09:57:22,803", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show schedules with their related sale order header information., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 09:57:22,822", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the customer with the highest total Ordered Quantity based on the total Ordered Quantity grouped by each customer."}
{"timestamp": "2025-12-15 09:57:22,833", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the customer with the highest total Ordered Quantity based on the total Ordered Quantity grouped by each customer.'}]"}
{"timestamp": "2025-12-15 09:57:25,055", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve schedules along with their related sale order header information, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status."}
{"timestamp": "2025-12-15 09:57:25,635", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 09:57:25,637", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 09:57:31,070", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 09:58:24,877", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 09:58:28,053", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List all sale order headers with their item_ids from sale order details., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 09:58:28,066", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 09:58:28,067", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve schedules along with their related sale order header information, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 09:58:28,949", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale order headers along with their corresponding item_ids from the sale order details."}
{"timestamp": "2025-12-15 09:58:29,424", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 09:58:29,426", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 10:05:42,150", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show item groups for these items., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:05:42,202", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale order headers along with their corresponding item_ids from the sale order details."}
{"timestamp": "2025-12-15 10:05:42,203", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale order headers along with their corresponding item_ids from the sale order details.'}]"}
{"timestamp": "2025-12-15 10:05:43,433", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the item groups for all item_ids associated with the sale order headers and their corresponding sale order details."}
{"timestamp": "2025-12-15 10:05:44,183", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:05:44,198", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 10:08:48,469", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show dispatched quantities for these sale order items., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:08:48,474", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the item groups for all item_ids associated with the sale order headers and their corresponding sale order details."}
{"timestamp": "2025-12-15 10:08:48,474", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the item groups for all item_ids associated with the sale order headers and their corresponding sale order details.'}]"}
{"timestamp": "2025-12-15 10:08:49,403", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the dispatched quantities for all sale order items associated with the sale order headers and their corresponding sale order details, including item groups for all item_ids."}
{"timestamp": "2025-12-15 10:08:51,130", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:08:51,131", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 10:10:33,730", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show the item where dispatched quantity is the highest, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:10:33,741", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the dispatched quantities for all sale order items associated with the sale order headers and their corresponding sale order details, including item groups for all item_ids."}
{"timestamp": "2025-12-15 10:10:33,741", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the dispatched quantities for all sale order items associated with the sale order headers and their corresponding sale order details, including item groups for all item_ids.'}]"}
{"timestamp": "2025-12-15 10:10:35,057", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale order items along with their sale order headers, sale order details, and item groups for all item_ids, and identify the item with the highest dispatched quantity."}
{"timestamp": "2025-12-15 10:10:36,862", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:10:36,863", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 10:11:29,968", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show only those sale orders where quantity > 100., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:11:29,971", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale order items along with their sale order headers, sale order details, and item groups for all item_ids, and identify the item with the highest dispatched quantity."}
{"timestamp": "2025-12-15 10:11:29,971", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale order items along with their sale order headers, sale order details, and item groups for all item_ids, and identify the item with the highest dispatched quantity.'}]"}
{"timestamp": "2025-12-15 10:11:31,503", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale order items along with their sale order headers, sale order details, and item groups for all item_ids, including only those sale orders where the quantity is greater than 100, and identify the item with the highest dispatched quantity."}
{"timestamp": "2025-12-15 10:11:32,004", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:11:32,006", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 10:13:49,581", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:14:09,901", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have placed the highest number of sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:14:09,911", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale order items along with their sale order headers, sale order details, and item groups for all item_ids, including only those sale orders where the quantity is greater than 100, and identify the item with the highest dispatched quantity."}
{"timestamp": "2025-12-15 10:14:09,915", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale order items along with their sale order headers, sale order details, and item groups for all item_ids, including only those sale orders where the quantity is greater than 100, and identify the item with the highest dispatched quantity.'}]"}
{"timestamp": "2025-12-15 10:14:10,861", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers who have placed the highest number of sale orders, including their customer details and the count of sale orders placed."}
{"timestamp": "2025-12-15 10:14:11,841", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:14:11,842", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 10:14:15,167", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 10:14:58,909", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:15:02,364", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations have not yet converted into sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:15:02,378", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 10:15:02,379", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers who have placed the highest number of sale orders, including their customer details and the count of sale orders placed.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 10:15:06,178", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations that have not yet been converted into sale orders, including details such as quote number, quotation date, quotation status, and quotation linked to lead."}
{"timestamp": "2025-12-15 10:15:07,046", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:15:07,049", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 10:15:12,845", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 10:15:32,503", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:15:37,073", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have not been fully dispatched yet?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:15:37,090", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 10:15:37,090", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations that have not yet been converted into sale orders, including details such as quote number, quotation date, quotation status, and quotation linked to lead.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 10:15:38,422", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders where the shipped quantity is less than the ordered quantity, indicating sale orders that have not been fully dispatched yet, including details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Shipment Status, and Dispatch Value."}
{"timestamp": "2025-12-15 10:15:38,967", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:15:38,968", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 10:19:01,184", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Compare dispatched vs ordered quantity for these customers., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:19:01,223", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders where the shipped quantity is less than the ordered quantity, indicating sale orders that have not been fully dispatched yet, including details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Shipment Status, and Dispatch Value."}
{"timestamp": "2025-12-15 10:19:01,223", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders where the shipped quantity is less than the ordered quantity, indicating sale orders that have not been fully dispatched yet, including details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Shipment Status, and Dispatch Value.'}]"}
{"timestamp": "2025-12-15 10:19:02,476", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve and compare the dispatched (shipped) quantity versus the ordered quantity for sale orders where the shipped quantity is less than the ordered quantity, including details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Shipment Status, and Dispatch Value."}
{"timestamp": "2025-12-15 10:19:02,937", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:19:02,937", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 10:19:06,350", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 10:19:12,791", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:19:25,122", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have not been fully dispatched yet?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:19:25,133", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 10:19:25,133", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve and compare the dispatched (shipped) quantity versus the ordered quantity for sale orders where the shipped quantity is less than the ordered quantity, including details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Shipment Status, and Dispatch Value.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 10:19:26,099", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating that these sale orders have not been fully dispatched yet."}
{"timestamp": "2025-12-15 10:19:26,605", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:19:26,606", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 10:19:42,518", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending quantity per item., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:19:42,524", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating that these sale orders have not been fully dispatched yet."}
{"timestamp": "2025-12-15 10:19:42,526", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating that these sale orders have not been fully dispatched yet.'}]"}
{"timestamp": "2025-12-15 10:19:43,697", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating pending dispatch, and show the pending quantity per item including Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity."}
{"timestamp": "2025-12-15 10:19:46,321", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:19:46,326", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 10:21:08,420", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which schedules are associated with these pending orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:21:08,430", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating pending dispatch, and show the pending quantity per item including Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity."}
{"timestamp": "2025-12-15 10:21:08,430", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating pending dispatch, and show the pending quantity per item including Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity.'}]"}
{"timestamp": "2025-12-15 10:21:10,344", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the schedules associated with sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating pending dispatch. Include Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity per item."}
{"timestamp": "2025-12-15 10:21:10,859", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:21:10,861", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 10:22:27,571", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers are impacted?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:22:27,574", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the schedules associated with sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating pending dispatch. Include Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity per item."}
{"timestamp": "2025-12-15 10:22:27,574", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the schedules associated with sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating pending dispatch. Include Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity per item.'}]"}
{"timestamp": "2025-12-15 10:22:29,309", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers impacted by sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating pending dispatch. Include customer details along with Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity per item."}
{"timestamp": "2025-12-15 10:22:30,103", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:22:30,104", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 10:23:47,087", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:23:55,980", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Who are our top customers based on dispatched quantity?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:23:55,987", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customers impacted by sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating pending dispatch. Include customer details along with Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity per item."}
{"timestamp": "2025-12-15 10:23:55,989", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers impacted by sale orders where the Ordered Quantity is greater than the Shipped Quantity, indicating pending dispatch. Include customer details along with Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity per item.'}]"}
{"timestamp": "2025-12-15 10:23:57,778", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of top customers based on the total dispatched (shipped) quantity, including customer details along with Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity per item where Ordered Quantity is greater than Shipped Quantity indicating pending dispatch."}
{"timestamp": "2025-12-15 10:23:58,802", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:23:58,802", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 10:24:03,985", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 10:24:58,953", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:25:02,558", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items are selling the most based on sale order detail quantity?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:25:02,568", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 10:25:02,571", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of top customers based on the total dispatched (shipped) quantity, including customer details along with Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, and the calculated pending quantity per item where Ordered Quantity is greater than Shipped Quantity indicating pending dispatch.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 10:25:04,323", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description."}
{"timestamp": "2025-12-15 10:25:06,579", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:25:06,581", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 10:28:32,222", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show their schedule quantities., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:28:32,226", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description."}
{"timestamp": "2025-12-15 10:28:32,226", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 10:28:34,344", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the scheduled quantities for the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description."}
{"timestamp": "2025-12-15 10:28:34,887", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:28:34,888", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 10:53:40,796", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show dispatch quantities., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:53:40,834", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the scheduled quantities for the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description."}
{"timestamp": "2025-12-15 10:53:40,834", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the scheduled quantities for the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 10:58:03,293", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-15 10:58:36,739", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:58:37,608", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:58:37,974", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:58:54,558", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 10:59:52,774", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items are selling the most based on sale order detail quantity?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 10:59:52,783", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the scheduled quantities for the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description."}
{"timestamp": "2025-12-15 10:59:52,784", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the scheduled quantities for the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 10:59:54,775", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description."}
{"timestamp": "2025-12-15 10:59:55,444", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 10:59:55,448", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 11:00:45,027", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show their schedule quantities., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:00:45,032", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description."}
{"timestamp": "2025-12-15 11:00:45,032", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 11:00:46,466", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the scheduled quantities for the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description."}
{"timestamp": "2025-12-15 11:00:47,304", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:00:47,305", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:01:03,994", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show dispatch quantities., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:01:03,998", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the scheduled quantities for the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description."}
{"timestamp": "2025-12-15 11:01:03,998", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the scheduled quantities for the list of items with the highest sold quantities based on sale order detail item quantity, including Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 11:01:05,231", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the dispatch quantities including Dispatch Date, Item Code, and Item Description for the list of items with the highest sold quantities based on sale order detail item quantity."}
{"timestamp": "2025-12-15 11:01:17,322", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:01:17,324", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:04:01,209", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Identify items with frequent schedule rescheduling., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:04:01,214", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the dispatch quantities including Dispatch Date, Item Code, and Item Description for the list of items with the highest sold quantities based on sale order detail item quantity."}
{"timestamp": "2025-12-15 11:04:01,216", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the dispatch quantities including Dispatch Date, Item Code, and Item Description for the list of items with the highest sold quantities based on sale order detail item quantity.'}]"}
{"timestamp": "2025-12-15 11:04:02,008", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of items with frequent schedule rescheduling based on delivery schedule and planned delivery changes."}
{"timestamp": "2025-12-15 11:04:02,464", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:04:02,465", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List schedules on a given date.', 'query': {'query': "SELECT schedule_id, assigned_to FROM Ponpure_Schedules WHERE schedule_date = '2025-01-01';"}}, {'input': 'Show upcoming schedules.', 'query': {'query': 'SELECT schedule_id, schedule_date, assigned_to FROM Ponpure_Schedules WHERE schedule_date >= GETDATE();'}}]"}
{"timestamp": "2025-12-15 11:04:05,107", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 11:05:18,987", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:05:22,321", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders faced multiple schedule changes (rescheduling)?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:05:22,326", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 11:05:22,326", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of items with frequent schedule rescheduling based on delivery schedule and planned delivery changes.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 11:05:23,615", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that experienced multiple schedule changes or rescheduling events."}
{"timestamp": "2025-12-15 11:05:24,650", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:05:24,650", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 11:05:45,204", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the reschedule reason distribution?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:05:45,208", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that experienced multiple schedule changes or rescheduling events."}
{"timestamp": "2025-12-15 11:05:45,208", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that experienced multiple schedule changes or rescheduling events.'}]"}
{"timestamp": "2025-12-15 11:05:46,792", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the distribution of reschedule reasons for sale orders that experienced multiple schedule changes or rescheduling events."}
{"timestamp": "2025-12-15 11:05:47,635", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:05:47,636", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:06:25,312", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Did these orders experience delayed dispatch?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:06:25,348", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the distribution of reschedule reasons for sale orders that experienced multiple schedule changes or rescheduling events."}
{"timestamp": "2025-12-15 11:06:25,348", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the distribution of reschedule reasons for sale orders that experienced multiple schedule changes or rescheduling events.'}]"}
{"timestamp": "2025-12-15 11:06:33,523", "logger": "app", "level": "INFO", "message": "reframed query after modification: For sale orders that experienced multiple schedule changes or rescheduling events, determine whether these orders experienced delayed dispatch by analyzing the Dispatch Date and Dispatch Aging."}
{"timestamp": "2025-12-15 11:06:34,520", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:06:34,521", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:06:38,165", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 11:06:54,529", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers are impacted most by rescheduling?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:06:54,535", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 11:06:54,536", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'For sale orders that experienced multiple schedule changes or rescheduling events, determine whether these orders experienced delayed dispatch by analyzing the Dispatch Date and Dispatch Aging.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 11:06:57,072", "logger": "app", "level": "INFO", "message": "reframed query after modification: Identify the customers most impacted by rescheduling based on dispatch and shipment data, including relevant details such as Customer Segment, Dealer Name, Dispatch Date, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Quantity Variance, and Dispatch Aging."}
{"timestamp": "2025-12-15 11:06:59,720", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:06:59,721", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:08:31,570", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:08:34,595", "logger": "app", "level": "INFO", "message": "Received /submit request with query: For each customer, what is the total order value vs the total dispatched value?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:08:34,608", "logger": "app", "level": "INFO", "message": "Chat history: user: Identify the customers most impacted by rescheduling based on dispatch and shipment data, including relevant details such as Customer Segment, Dealer Name, Dispatch Date, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Quantity Variance, and Dispatch Aging."}
{"timestamp": "2025-12-15 11:08:34,608", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Identify the customers most impacted by rescheduling based on dispatch and shipment data, including relevant details such as Customer Segment, Dealer Name, Dispatch Date, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Quantity Variance, and Dispatch Aging.'}]"}
{"timestamp": "2025-12-15 11:08:36,519", "logger": "app", "level": "INFO", "message": "reframed query after modification: For each customer identified as most impacted by rescheduling based on dispatch and shipment data, retrieve the total order value compared to the total dispatched value, including relevant details such as Customer Segment, Dealer Name, Dispatch Date, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Quantity Variance, and Dispatch Aging."}
{"timestamp": "2025-12-15 11:08:38,695", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:08:38,695", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 11:08:44,909", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 11:08:57,432", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:09:10,389", "logger": "app", "level": "INFO", "message": "Received /submit request with query: For each customer, give the total order value vs the total dispatched value?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:09:10,393", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 11:09:10,394", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'For each customer identified as most impacted by rescheduling based on dispatch and shipment data, retrieve the total order value compared to the total dispatched value, including relevant details such as Customer Segment, Dealer Name, Dispatch Date, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Quantity Variance, and Dispatch Aging.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 11:09:13,467", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total order value and total dispatch value grouped by each customer."}
{"timestamp": "2025-12-15 11:09:14,009", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:09:14,012", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 11:10:05,016", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Identify customers with high order value but low dispatch., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:10:05,023", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total order value and total dispatch value grouped by each customer."}
{"timestamp": "2025-12-15 11:10:05,023", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total order value and total dispatch value grouped by each customer.'}]"}
{"timestamp": "2025-12-15 11:10:06,670", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve customers who have a high total order value but a low total dispatch value, based on the total order value and total dispatch value grouped by each customer."}
{"timestamp": "2025-12-15 11:10:07,459", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:10:07,460", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 11:10:40,908", "logger": "app", "level": "INFO", "message": "Received /submit request with query: among these which customer has the lowest dispatch, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:10:40,914", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve customers who have a high total order value but a low total dispatch value, based on the total order value and total dispatch value grouped by each customer."}
{"timestamp": "2025-12-15 11:10:40,916", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve customers who have a high total order value but a low total dispatch value, based on the total order value and total dispatch value grouped by each customer.'}]"}
{"timestamp": "2025-12-15 11:10:42,324", "logger": "app", "level": "INFO", "message": "reframed query after modification: From the customers who have a high total order value but a low total dispatch value based on the total order value and total dispatch value grouped by each customer, identify the customer with the lowest total dispatch value."}
{"timestamp": "2025-12-15 11:10:43,547", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:10:43,550", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 11:12:10,579", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:12:13,780", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations resulted in high-value sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:12:13,790", "logger": "app", "level": "INFO", "message": "Chat history: user: From the customers who have a high total order value but a low total dispatch value based on the total order value and total dispatch value grouped by each customer, identify the customer with the lowest total dispatch value."}
{"timestamp": "2025-12-15 11:12:13,790", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'From the customers who have a high total order value but a low total dispatch value based on the total order value and total dispatch value grouped by each customer, identify the customer with the lowest total dispatch value.'}]"}
{"timestamp": "2025-12-15 11:12:14,850", "logger": "app", "level": "INFO", "message": "reframed query after modification: Identify the quotations that resulted in sale orders with high order value."}
{"timestamp": "2025-12-15 11:12:15,631", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:12:15,632", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 11:12:37,993", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:12:41,030", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Identify items where scheduled quantity exceeds dispatched quantity., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:12:41,030", "logger": "app", "level": "INFO", "message": "Chat history: user: Identify the quotations that resulted in sale orders with high order value."}
{"timestamp": "2025-12-15 11:12:41,030", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Identify the quotations that resulted in sale orders with high order value.'}]"}
{"timestamp": "2025-12-15 11:12:42,639", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve items where the scheduled quantity is greater than the dispatched quantity, including details such as Item Code, Item Description, Scheduled Quantity, and Dispatched Quantity."}
{"timestamp": "2025-12-15 11:12:44,740", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:12:44,740", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 11:13:14,384", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show pending quantities per item per order., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:13:14,389", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve items where the scheduled quantity is greater than the dispatched quantity, including details such as Item Code, Item Description, Scheduled Quantity, and Dispatched Quantity."}
{"timestamp": "2025-12-15 11:13:14,390", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve items where the scheduled quantity is greater than the dispatched quantity, including details such as Item Code, Item Description, Scheduled Quantity, and Dispatched Quantity.'}]"}
{"timestamp": "2025-12-15 11:13:16,238", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the Item Code, Item Description, Scheduled Quantity, Dispatched Quantity, and calculate the pending quantity (Scheduled Quantity minus Dispatched Quantity) per item per order, where the Scheduled Quantity is greater than the Dispatched Quantity."}
{"timestamp": "2025-12-15 11:13:17,456", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:13:17,458", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 11:14:08,837", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Show customers who are impacted by this backlog?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:14:08,850", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the Item Code, Item Description, Scheduled Quantity, Dispatched Quantity, and calculate the pending quantity (Scheduled Quantity minus Dispatched Quantity) per item per order, where the Scheduled Quantity is greater than the Dispatched Quantity."}
{"timestamp": "2025-12-15 11:14:08,851", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the Item Code, Item Description, Scheduled Quantity, Dispatched Quantity, and calculate the pending quantity (Scheduled Quantity minus Dispatched Quantity) per item per order, where the Scheduled Quantity is greater than the Dispatched Quantity.'}]"}
{"timestamp": "2025-12-15 11:14:15,746", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the customers impacted by the backlog where the Scheduled Quantity is greater than the Dispatched Quantity, including their details along with Item Code, Item Description, Scheduled Quantity, Dispatched Quantity, and the calculated pending quantity (Scheduled Quantity minus Dispatched Quantity) per item per order."}
{"timestamp": "2025-12-15 11:14:16,748", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:14:16,751", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:15:13,860", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 11:17:32,634", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:17:35,908", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:17:35,917", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 11:17:35,919", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the customers impacted by the backlog where the Scheduled Quantity is greater than the Dispatched Quantity, including their details along with Item Code, Item Description, Scheduled Quantity, Dispatched Quantity, and the calculated pending quantity (Scheduled Quantity minus Dispatched Quantity) per item per order.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 11:17:37,679", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation."}
{"timestamp": "2025-12-15 11:17:38,115", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:17:38,115", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:17:41,502", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 11:18:13,630", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:18:16,729", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:18:16,739", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 11:18:16,740", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 11:18:17,642", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation."}
{"timestamp": "2025-12-15 11:18:18,450", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:18:18,452", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:18:21,124", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 11:19:45,475", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:20:10,498", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts greater than 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:20:10,511", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 11:20:10,511", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 11:20:14,931", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve orders where the discount applied is greater than 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type."}
{"timestamp": "2025-12-15 11:20:17,009", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:20:17,011", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:20:30,967", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 11:20:41,053", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:20:52,932", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts equal to 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:20:52,939", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 11:20:52,939", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve orders where the discount applied is greater than 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 11:20:55,596", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve orders where the discount is exactly 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, Order Type, and Billing Status."}
{"timestamp": "2025-12-15 11:20:59,182", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:20:59,184", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 11:21:04,745", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 11:22:04,839", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts greater than or equal to 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:22:04,847", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 11:22:04,848", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve orders where the discount is exactly 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, Order Type, and Billing Status.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 11:22:07,272", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve orders where the discount is greater than or equal to 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type."}
{"timestamp": "2025-12-15 11:22:10,115", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 11:22:10,116", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 11:27:26,074", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-15 11:28:58,364", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:29:18,639", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts greater than or  equal to 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:29:18,642", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve orders where the discount is greater than or equal to 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type."}
{"timestamp": "2025-12-15 11:29:18,642", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve orders where the discount is greater than or equal to 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type.'}]"}
{"timestamp": "2025-12-15 11:29:36,372", "logger": "app", "level": "ERROR", "message": "Prompt generation error: Request timed out."}
{"timestamp": "2025-12-15 11:30:02,176", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 11:30:35,222", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts greater than or equal to 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 11:30:35,231", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Prompt generation failed: Request timed out."}
{"timestamp": "2025-12-15 11:30:35,231", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve orders where the discount is greater than or equal to 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type.'}, {'role': 'assistant', 'content': 'Error: Prompt generation failed: Request timed out.'}]"}
{"timestamp": "2025-12-15 11:30:47,778", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve orders where the discount is greater than or equal to 10%."}
{"timestamp": "2025-12-15 11:31:26,014", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: Request timed out."}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpx\_transports\default.py", line 69, in map_httpcore_exceptions
    yield
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpx\_transports\default.py", line 233, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpcore\_sync\connection_pool.py", line 216, in handle_request
    raise exc from None
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpcore\_sync\connection_pool.py", line 196, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpcore\_sync\connection.py", line 99, in handle_request
    raise exc
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpcore\_sync\connection.py", line 76, in handle_request
    stream = self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpcore\_sync\connection.py", line 154, in _connect
    stream = stream.start_tls(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpcore\_backends\sync.py", line 152, in start_tls
    with map_exceptions(exc_map):
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectTimeout: _ssl.c:989: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\openai\_base_client.py", line 951, in _request
    response = self._client.send(
               ^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpx\_client.py", line 914, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpx\_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpx\_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpx\_client.py", line 1015, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpx\_transports\default.py", line 232, in handle_request
    with map_httpcore_exceptions():
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\httpx\_transports\default.py", line 86, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectTimeout: _ssl.c:989: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 836, in submit_query
    examples = get_examples(llm_reframed_query, current_question_type)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\SM_examples.py", line 48, in get_examples
    query_embedding = embed_query(query)
                      ^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\SM_examples.py", line 34, in embed_query
    response = client.embeddings.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\openai\resources\embeddings.py", line 113, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\openai\_base_client.py", line 1233, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\openai\_base_client.py", line 922, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\openai\_base_client.py", line 960, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\openai\_base_client.py", line 1046, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\openai\_base_client.py", line 975, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\openai\_base_client.py", line 1046, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\openai\_base_client.py", line 970, in _request
    raise APITimeoutError(request=request) from err
openai.APITimeoutError: Request timed out.
{"timestamp": "2025-12-15 14:30:41,516", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 14:31:42,589", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts greater than or equal to 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:31:42,608", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: Request timed out."}
{"timestamp": "2025-12-15 14:31:42,608", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve orders where the discount is greater than or equal to 10%.'}, {'role': 'assistant', 'content': 'Error: Query execution failed: Request timed out.'}]"}
{"timestamp": "2025-12-15 14:31:45,508", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve orders where the discount is greater than or equal to 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type."}
{"timestamp": "2025-12-15 14:31:46,587", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:31:46,597", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 14:32:37,157", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts equal to 10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:32:37,170", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve orders where the discount is greater than or equal to 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type."}
{"timestamp": "2025-12-15 14:32:37,170", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve orders where the discount is greater than or equal to 10%, including key details such as Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type.'}]"}
{"timestamp": "2025-12-15 14:32:39,028", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve orders where the discount is exactly 10%, including Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type."}
{"timestamp": "2025-12-15 14:32:40,272", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:32:40,281", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 14:32:46,449", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:32:51,236", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 14:33:04,749", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:33:04,761", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:33:04,761", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve orders where the discount is exactly 10%, including Dispatch Date, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and Order Type.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:33:05,954", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation."}
{"timestamp": "2025-12-15 14:33:06,804", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:33:06,811", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 14:33:11,586", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:37:16,653", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 14:37:21,791", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:37:21,807", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:37:21,807", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:37:23,205", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation."}
{"timestamp": "2025-12-15 14:37:24,147", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:37:24,147", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 14:37:30,299", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:37:56,423", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-15 14:38:08,550", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 14:38:13,258", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:38:13,272", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:38:13,272", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:38:14,803", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation."}
{"timestamp": "2025-12-15 14:38:15,825", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:38:15,825", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 14:38:22,370", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:39:26,596", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-15 14:39:33,970", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 14:39:51,269", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:39:51,282", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:39:51,282", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:39:52,695", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation."}
{"timestamp": "2025-12-15 14:39:54,043", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:39:54,043", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 14:40:04,166", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:40:51,117", "logger": "app", "level": "INFO", "message": "Blob service client initialized successfully."}
{"timestamp": "2025-12-15 14:40:56,761", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 14:41:06,591", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:41:06,600", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:41:06,600", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:41:08,287", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation."}
{"timestamp": "2025-12-15 14:41:09,507", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:41:09,507", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 14:41:17,991", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:42:18,310", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 14:42:25,572", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:42:25,583", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:42:25,584", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders where the shipment status indicates delayed dispatch or the order status is pending confirmation.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:42:28,047", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders where the shipment status indicates delay, including relevant details such as Dispatch Date, Dispatch Month, Dispatch Year, Order Number, Shipment Status, Dispatch Aging, and any other available dispatch or order-related information."}
{"timestamp": "2025-12-15 14:42:29,073", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:42:29,073", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 14:42:36,842", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:43:05,987", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:43:05,993", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:43:05,993", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders where the shipment status indicates delay, including relevant details such as Dispatch Date, Dispatch Month, Dispatch Year, Order Number, Shipment Status, Dispatch Aging, and any other available dispatch or order-related information.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:43:08,487", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders where the order status indicates pending confirmation."}
{"timestamp": "2025-12-15 14:43:09,626", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:43:09,636", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 14:43:14,025", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:43:31,690", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 14:44:43,769", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders belong to walk-in quotations?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:44:43,781", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:44:43,781", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders where the order status indicates pending confirmation.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:44:44,806", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that are created from walk-in quotations, including relevant details such as order number, order date, order status, and any linked quotation information."}
{"timestamp": "2025-12-15 14:44:45,298", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:44:45,306", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 14:45:59,161", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many of them were fully dispatched?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:45:59,178", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that are created from walk-in quotations, including relevant details such as order number, order date, order status, and any linked quotation information."}
{"timestamp": "2025-12-15 14:45:59,178", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that are created from walk-in quotations, including relevant details such as order number, order date, order status, and any linked quotation information.'}]"}
{"timestamp": "2025-12-15 14:46:00,329", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of sale orders created from walk-in quotations that were fully dispatched, including order number, order date, order status, and linked quotation information."}
{"timestamp": "2025-12-15 14:46:01,478", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:46:01,481", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 14:46:09,025", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:48:14,434", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many of them were fully dispatched?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:48:14,442", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:48:14,442", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of sale orders created from walk-in quotations that were fully dispatched, including order number, order date, order status, and linked quotation information.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:48:16,613", "logger": "app", "level": "INFO", "message": "reframed query after modification: Count the number of items that were fully dispatched, where the Shipped Quantity equals the Ordered Quantity."}
{"timestamp": "2025-12-15 14:48:18,573", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:48:18,577", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 14:53:13,063", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers frequently place small-value orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:53:13,079", "logger": "app", "level": "INFO", "message": "Chat history: user: Count the number of items that were fully dispatched, where the Shipped Quantity equals the Ordered Quantity."}
{"timestamp": "2025-12-15 14:53:13,079", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Count the number of items that were fully dispatched, where the Shipped Quantity equals the Ordered Quantity.'}]"}
{"timestamp": "2025-12-15 14:53:15,230", "logger": "app", "level": "INFO", "message": "reframed query after modification: Identify customers who frequently place small-value orders based on their order history, considering key parameters such as Customer Segment, Dealer Name, Order Value, and Order Frequency."}
{"timestamp": "2025-12-15 14:53:16,661", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:53:16,661", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 14:56:32,221", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items face the most dispatch delays?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:56:32,234", "logger": "app", "level": "INFO", "message": "Chat history: user: Identify customers who frequently place small-value orders based on their order history, considering key parameters such as Customer Segment, Dealer Name, Order Value, and Order Frequency."}
{"timestamp": "2025-12-15 14:56:32,237", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Identify customers who frequently place small-value orders based on their order history, considering key parameters such as Customer Segment, Dealer Name, Order Value, and Order Frequency.'}]"}
{"timestamp": "2025-12-15 14:56:33,794", "logger": "app", "level": "INFO", "message": "reframed query after modification: Identify the items facing the most dispatch delays by analyzing dispatch delays using key parameters such as Item Code, Item Description, Dispatch Date, Dispatch Month, Dispatch Year, Dispatch Aging, Shipment Status, Dealer Name, and Customer Segment."}
{"timestamp": "2025-12-15 14:56:34,536", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:56:34,536", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 14:56:43,301", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 14:57:04,324", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which schedules have zero dispatched quantity?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 14:57:04,340", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 14:57:04,342", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Identify the items facing the most dispatch delays by analyzing dispatch delays using key parameters such as Item Code, Item Description, Dispatch Date, Dispatch Month, Dispatch Year, Dispatch Aging, Shipment Status, Dealer Name, and Customer Segment.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 14:57:05,418", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the delivery schedules where the dispatched quantity is zero."}
{"timestamp": "2025-12-15 14:57:06,367", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 14:57:06,368", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 15:38:14,329", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which leads have not yet been converted into quotations?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 15:38:14,397", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the delivery schedules where the dispatched quantity is zero."}
{"timestamp": "2025-12-15 15:38:14,403", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the delivery schedules where the dispatched quantity is zero.'}]"}
{"timestamp": "2025-12-15 15:38:16,615", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of unconverted leads that have not yet been converted into quotations, including lead information and enquiry details."}
{"timestamp": "2025-12-15 15:38:18,044", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 15:38:18,044", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 leads.', 'query': {'query': 'SELECT TOP 10 lead_id, created_by, creation_date FROM Ponpure_LeadDetails ORDER BY creation_date DESC;'}}, {'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 15:38:26,607", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 15:38:50,014", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which lead sources are generating the most quotations?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 15:38:50,031", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 15:38:50,031", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of unconverted leads that have not yet been converted into quotations, including lead information and enquiry details.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 15:38:51,616", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count and total value of quotations grouped by lead source to identify which lead sources are generating the most quotations."}
{"timestamp": "2025-12-15 15:38:54,085", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 15:38:54,085", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Count quotations grouped by status.', 'query': {'query': 'SELECT status_id, COUNT(*) AS quotation_count FROM Ponpure_Quotationhdrs GROUP BY status_id;'}}]"}
{"timestamp": "2025-12-15 15:42:15,145", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 15:42:18,535", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have multiple leads but no orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 15:42:18,552", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count and total value of quotations grouped by lead source to identify which lead sources are generating the most quotations."}
{"timestamp": "2025-12-15 15:42:18,552", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count and total value of quotations grouped by lead source to identify which lead sources are generating the most quotations.'}]"}
{"timestamp": "2025-12-15 15:42:20,720", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers who have multiple leads but have not placed any orders."}
{"timestamp": "2025-12-15 15:42:21,964", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 15:42:21,964", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 leads.', 'query': {'query': 'SELECT TOP 10 lead_id, created_by, creation_date FROM Ponpure_LeadDetails ORDER BY creation_date DESC;'}}]"}
{"timestamp": "2025-12-15 15:56:36,175", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many sale orders exist in the system?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 15:56:36,249", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customers who have multiple leads but have not placed any orders."}
{"timestamp": "2025-12-15 15:56:36,249", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers who have multiple leads but have not placed any orders.'}]"}
{"timestamp": "2025-12-15 15:56:39,487", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total count of sale orders present in the system."}
{"timestamp": "2025-12-15 15:56:40,530", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 15:56:40,535", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 15:57:10,297", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are not linked to any quotation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 15:57:10,314", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total count of sale orders present in the system."}
{"timestamp": "2025-12-15 15:57:10,314", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total count of sale orders present in the system.'}]"}
{"timestamp": "2025-12-15 15:57:11,920", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that are not linked to any quotation."}
{"timestamp": "2025-12-15 15:57:13,155", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 15:57:13,155", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 15:57:23,494", "logger": "app", "level": "ERROR", "message": "Unexpected error: Object of type Decimal is not JSON serializable"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 899, in submit_query
    return JSONResponse(content=convert_dates(response_data))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Decimal is not JSON serializable
{"timestamp": "2025-12-15 15:57:58,834", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List sale orders are not linked to any quotation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 15:57:58,843", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total count of sale orders present in the system."}
{"timestamp": "2025-12-15 15:57:58,843", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total count of sale orders present in the system.'}]"}
{"timestamp": "2025-12-15 15:58:00,961", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that are not linked to any quotation."}
{"timestamp": "2025-12-15 15:58:01,709", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 15:58:01,713", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 15:58:12,380", "logger": "app", "level": "ERROR", "message": "Unexpected error: Object of type Decimal is not JSON serializable"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 899, in submit_query
    return JSONResponse(content=convert_dates(response_data))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Decimal is not JSON serializable
{"timestamp": "2025-12-15 15:58:36,247", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have placed the highest number of sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 15:58:36,260", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total count of sale orders present in the system."}
{"timestamp": "2025-12-15 15:58:36,263", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total count of sale orders present in the system.'}]"}
{"timestamp": "2025-12-15 15:58:37,859", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers who have placed the highest number of sale orders in the system."}
{"timestamp": "2025-12-15 15:58:38,859", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 15:58:38,866", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 15:59:28,967", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are still open or pending?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 15:59:28,980", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customers who have placed the highest number of sale orders in the system."}
{"timestamp": "2025-12-15 15:59:28,980", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers who have placed the highest number of sale orders in the system.'}]"}
{"timestamp": "2025-12-15 15:59:30,172", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders with order status indicating they are still open or pending."}
{"timestamp": "2025-12-15 15:59:31,430", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 15:59:31,431", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 15:59:35,143", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 15:59:48,189", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders were created manually?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 15:59:48,206", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 15:59:48,209", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders with order status indicating they are still open or pending.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 15:59:49,527", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders where the order creation method indicates they were created manually."}
{"timestamp": "2025-12-15 15:59:51,216", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 15:59:51,216", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:13:12,808", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have repeated leads over time?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:13:12,827", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders where the order creation method indicates they were created manually."}
{"timestamp": "2025-12-15 16:13:12,828", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders where the order creation method indicates they were created manually.'}]"}
{"timestamp": "2025-12-15 16:13:14,405", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers who have repeated leads over time, including their lead information and customer lead details."}
{"timestamp": "2025-12-15 16:13:14,903", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:13:14,904", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 leads.', 'query': {'query': 'SELECT TOP 10 lead_id, created_by, creation_date FROM Ponpure_LeadDetails ORDER BY creation_date DESC;'}}, {'input': 'List leads created by a specific employee.', 'query': {'query': 'SELECT lead_id, creation_date FROM Ponpure_LeadDetails WHERE created_by = 55;'}}]"}
{"timestamp": "2025-12-15 16:13:54,175", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which leads have incomplete contact details?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:13:54,185", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customers who have repeated leads over time, including their lead information and customer lead details."}
{"timestamp": "2025-12-15 16:13:54,187", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers who have repeated leads over time, including their lead information and customer lead details.'}]"}
{"timestamp": "2025-12-15 16:13:55,154", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of leads with incomplete contact details, including their lead information and customer lead details."}
{"timestamp": "2025-12-15 16:13:55,656", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:13:55,658", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 leads.', 'query': {'query': 'SELECT TOP 10 lead_id, created_by, creation_date FROM Ponpure_LeadDetails ORDER BY creation_date DESC;'}}, {'input': 'List leads created by a specific employee.', 'query': {'query': 'SELECT lead_id, creation_date FROM Ponpure_LeadDetails WHERE created_by = 55;'}}]"}
{"timestamp": "2025-12-15 16:14:28,472", "logger": "app", "level": "INFO", "message": "Received /submit request with query: List customers who have leads but no follow-up activity., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:14:28,477", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of leads with incomplete contact details, including their lead information and customer lead details."}
{"timestamp": "2025-12-15 16:14:28,477", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of leads with incomplete contact details, including their lead information and customer lead details.'}]"}
{"timestamp": "2025-12-15 16:14:29,529", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers who have lead information but no follow-up lead activity recorded."}
{"timestamp": "2025-12-15 16:14:30,073", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:14:30,074", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 leads.', 'query': {'query': 'SELECT TOP 10 lead_id, created_by, creation_date FROM Ponpure_LeadDetails ORDER BY creation_date DESC;'}}, {'input': 'List leads created by a specific employee.', 'query': {'query': 'SELECT lead_id, creation_date FROM Ponpure_LeadDetails WHERE created_by = 55;'}}]"}
{"timestamp": "2025-12-15 16:14:32,952", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 16:14:44,700", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which leads were converted into orders without quotations?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:14:44,704", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 16:14:44,704", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers who have lead information but no follow-up lead activity recorded.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 16:14:45,636", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customer leads that were converted into sales orders without any associated quotations, including lead information and order details."}
{"timestamp": "2025-12-15 16:14:46,133", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:14:46,135", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:15:01,693", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the average number of quotations generated per lead?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:15:01,698", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customer leads that were converted into sales orders without any associated quotations, including lead information and order details."}
{"timestamp": "2025-12-15 16:15:01,700", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customer leads that were converted into sales orders without any associated quotations, including lead information and order details.'}]"}
{"timestamp": "2025-12-15 16:15:02,587", "logger": "app", "level": "INFO", "message": "reframed query after modification: Calculate the average number of quotations generated per customer lead, considering all leads including those converted into sales orders and those without any associated quotations."}
{"timestamp": "2025-12-15 16:15:03,086", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:15:03,088", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 16:15:05,999", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 16:15:17,672", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have multiple leads but no orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:15:17,678", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 16:15:17,679", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Calculate the average number of quotations generated per customer lead, considering all leads including those converted into sales orders and those without any associated quotations.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 16:15:19,022", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers who have multiple CRM leads or new enquiries but have no associated sale orders or approved orders."}
{"timestamp": "2025-12-15 16:15:19,767", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:15:19,769", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:15:23,781", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 16:15:34,672", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many leads resulted in successful sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:15:34,685", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 16:15:34,686", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers who have multiple CRM leads or new enquiries but have no associated sale orders or approved orders.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 16:15:37,304", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of customer leads that resulted in successful sale orders."}
{"timestamp": "2025-12-15 16:15:37,787", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:15:37,789", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:15:40,653", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 16:15:52,884", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which lead sources are generating the most quotations?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:15:52,889", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 16:15:52,889", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of customer leads that resulted in successful sale orders.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 16:15:54,434", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count and total value of quotations grouped by lead source to identify which lead sources are generating the most quotations."}
{"timestamp": "2025-12-15 16:15:54,992", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:15:54,992", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Count quotations grouped by status.', 'query': {'query': 'SELECT status_id, COUNT(*) AS quotation_count FROM Ponpure_Quotationhdrs GROUP BY status_id;'}}]"}
{"timestamp": "2025-12-15 16:16:13,594", "logger": "app", "level": "INFO", "message": "Question type is: generic"}
{"timestamp": "2025-12-15 16:16:17,661", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations were converted directly into sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:16:17,671", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count and total value of quotations grouped by lead source to identify which lead sources are generating the most quotations."}
{"timestamp": "2025-12-15 16:16:17,672", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count and total value of quotations grouped by lead source to identify which lead sources are generating the most quotations.'}]"}
{"timestamp": "2025-12-15 16:16:18,970", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that were converted directly into sale orders, including relevant details such as quote number, quotation date, order number, order date, and order status."}
{"timestamp": "2025-12-15 16:16:19,513", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:16:19,514", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 16:16:51,533", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations have missing total value information?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:16:51,537", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of quotations that were converted directly into sale orders, including relevant details such as quote number, quotation date, order number, order date, and order status."}
{"timestamp": "2025-12-15 16:16:51,537", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that were converted directly into sale orders, including relevant details such as quote number, quotation date, order number, order date, and order status.'}]"}
{"timestamp": "2025-12-15 16:16:52,476", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that have missing total value information, including details such as quote number and quotation date."}
{"timestamp": "2025-12-15 16:16:52,934", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:16:52,936", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:17:15,017", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations are marked as pre-quotes?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:17:15,020", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of quotations that have missing total value information, including details such as quote number and quotation date."}
{"timestamp": "2025-12-15 16:17:15,020", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that have missing total value information, including details such as quote number and quotation date.'}]"}
{"timestamp": "2025-12-15 16:17:16,498", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that are marked as pre-quotes, including details such as quote number and quotation date."}
{"timestamp": "2025-12-15 16:17:16,967", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:17:16,969", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:17:31,600", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which agents are generating the highest number of quotations?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:17:31,603", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of quotations that are marked as pre-quotes, including details such as quote number and quotation date."}
{"timestamp": "2025-12-15 16:17:31,604", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that are marked as pre-quotes, including details such as quote number and quotation date.'}]"}
{"timestamp": "2025-12-15 16:17:32,911", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of agents along with the count of quotations they have generated, ordered by the highest number of quotations."}
{"timestamp": "2025-12-15 16:17:33,372", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:17:33,373", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:18:06,545", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations are still open and pending approval?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:18:06,549", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of agents along with the count of quotations they have generated, ordered by the highest number of quotations."}
{"timestamp": "2025-12-15 16:18:06,549", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of agents along with the count of quotations they have generated, ordered by the highest number of quotations.'}]"}
{"timestamp": "2025-12-15 16:18:07,385", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that are still open and pending approval, including their quotation status and quotation approval details."}
{"timestamp": "2025-12-15 16:18:07,846", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:18:07,852", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:18:18,794", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many quotations were rejected by customers?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:18:18,801", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of quotations that are still open and pending approval, including their quotation status and quotation approval details."}
{"timestamp": "2025-12-15 16:18:18,802", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that are still open and pending approval, including their quotation status and quotation approval details.'}]"}
{"timestamp": "2025-12-15 16:18:19,692", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of quotations that were rejected by customers, including their quotation status and quotation approval details."}
{"timestamp": "2025-12-15 16:18:24,649", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:18:24,650", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Count quotations grouped by status.', 'query': {'query': 'SELECT status_id, COUNT(*) AS quotation_count FROM Ponpure_Quotationhdrs GROUP BY status_id;'}}]"}
{"timestamp": "2025-12-15 16:18:51,982", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations were revised multiple times?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:18:51,986", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of quotations that were rejected by customers, including their quotation status and quotation approval details."}
{"timestamp": "2025-12-15 16:18:51,987", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of quotations that were rejected by customers, including their quotation status and quotation approval details.'}]"}
{"timestamp": "2025-12-15 16:18:53,189", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that were revised multiple times, including their quotation status and quotation approval details."}
{"timestamp": "2025-12-15 16:18:53,619", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:18:53,620", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:20:07,701", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have the highest quotation values?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:20:07,708", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of quotations that were revised multiple times, including their quotation status and quotation approval details."}
{"timestamp": "2025-12-15 16:20:07,709", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that were revised multiple times, including their quotation status and quotation approval details.'}]"}
{"timestamp": "2025-12-15 16:20:09,433", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers with the highest quotation values, including their quotation status and quotation approval details, based on the quotations that were revised multiple times."}
{"timestamp": "2025-12-15 16:20:10,059", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:20:10,062", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:20:55,847", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 16:29:55,862", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations were revised multiple times?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:29:55,899", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 16:29:55,901", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers with the highest quotation values, including their quotation status and quotation approval details, based on the quotations that were revised multiple times.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 16:29:57,044", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that have been revised multiple times, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval."}
{"timestamp": "2025-12-15 16:29:57,551", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:29:57,552", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:30:34,219", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many quotations were rejected by customers?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:30:34,226", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of quotations that have been revised multiple times, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval."}
{"timestamp": "2025-12-15 16:30:34,227", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that have been revised multiple times, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval.'}]"}
{"timestamp": "2025-12-15 16:30:35,599", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of quotations that were rejected by customers, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval."}
{"timestamp": "2025-12-15 16:30:36,129", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:30:36,130", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Count quotations grouped by status.', 'query': {'query': 'SELECT status_id, COUNT(*) AS quotation_count FROM Ponpure_Quotationhdrs GROUP BY status_id;'}}]"}
{"timestamp": "2025-12-15 16:32:04,626", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have the highest quotation values?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:32:04,634", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of quotations that were rejected by customers, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval."}
{"timestamp": "2025-12-15 16:32:04,634", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of quotations that were rejected by customers, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval.'}]"}
{"timestamp": "2025-12-15 16:32:05,709", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the customers with the highest quotation values, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval."}
{"timestamp": "2025-12-15 16:32:06,434", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:32:06,437", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:32:43,081", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations have not yet been converted to sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:32:43,085", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the customers with the highest quotation values, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval."}
{"timestamp": "2025-12-15 16:32:43,085", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the customers with the highest quotation values, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval.'}]"}
{"timestamp": "2025-12-15 16:32:44,147", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that have not yet been converted to sale orders, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval."}
{"timestamp": "2025-12-15 16:32:44,815", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:32:44,816", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 16:34:22,439", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many quotations were created in total?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:34:22,443", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of quotations that have not yet been converted to sale orders, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval."}
{"timestamp": "2025-12-15 16:34:22,443", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that have not yet been converted to sale orders, including relevant quotation details such as quote number, quotation date, quotation status, and quotation approval.'}]"}
{"timestamp": "2025-12-15 16:34:23,820", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total count of quotations created, including details such as quote number, quotation date, quotation status, and quotation approval, for all quotations whether converted to sale orders or not."}
{"timestamp": "2025-12-15 16:34:24,255", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:34:24,258", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 16:35:22,979", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have credit limit alerts?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:35:22,989", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total count of quotations created, including details such as quote number, quotation date, quotation status, and quotation approval, for all quotations whether converted to sale orders or not."}
{"timestamp": "2025-12-15 16:35:22,990", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total count of quotations created, including details such as quote number, quotation date, quotation status, and quotation approval, for all quotations whether converted to sale orders or not.'}]"}
{"timestamp": "2025-12-15 16:35:23,810", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that have credit limit alerts."}
{"timestamp": "2025-12-15 16:35:24,206", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:35:24,207", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:38:16,548", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many sale orders exist in the system?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:38:16,578", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that have credit limit alerts."}
{"timestamp": "2025-12-15 16:38:16,578", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that have credit limit alerts.'}]"}
{"timestamp": "2025-12-15 16:38:17,899", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total count of sale orders existing in the system."}
{"timestamp": "2025-12-15 16:38:18,656", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:38:18,660", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 16:38:43,689", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are not linked to any quotation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:38:43,699", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total count of sale orders existing in the system."}
{"timestamp": "2025-12-15 16:38:43,700", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total count of sale orders existing in the system.'}]"}
{"timestamp": "2025-12-15 16:38:44,496", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that are not linked to any quotation."}
{"timestamp": "2025-12-15 16:38:45,014", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:38:45,016", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:38:55,105", "logger": "app", "level": "ERROR", "message": "Unexpected error: Object of type Decimal is not JSON serializable"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 899, in submit_query
    return JSONResponse(content=convert_dates(response_data))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Krushna\Work\Ponpure\env\Lib\site-packages\starlette\responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\krushnabaral\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Decimal is not JSON serializable
{"timestamp": "2025-12-15 16:39:07,746", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have placed the highest number of sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:39:07,749", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total count of sale orders existing in the system."}
{"timestamp": "2025-12-15 16:39:07,750", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total count of sale orders existing in the system.'}]"}
{"timestamp": "2025-12-15 16:39:09,047", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers who have placed the highest number of sale orders, including the count of sale orders per customer."}
{"timestamp": "2025-12-15 16:39:09,478", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:39:09,482", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:39:36,059", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are still open or pending?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:39:36,062", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customers who have placed the highest number of sale orders, including the count of sale orders per customer."}
{"timestamp": "2025-12-15 16:39:36,063", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers who have placed the highest number of sale orders, including the count of sale orders per customer.'}]"}
{"timestamp": "2025-12-15 16:39:37,378", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that are still open or pending, including their order status and relevant shipment details."}
{"timestamp": "2025-12-15 16:39:37,845", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:39:37,850", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:39:40,409", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 16:40:16,148", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders were created manually?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:40:16,157", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 16:40:16,158", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that are still open or pending, including their order status and relevant shipment details.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 16:40:17,095", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders where the order creation method indicates they were created manually."}
{"timestamp": "2025-12-15 16:40:17,587", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:40:17,588", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:40:33,520", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have no schedules created?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:40:33,526", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders where the order creation method indicates they were created manually."}
{"timestamp": "2025-12-15 16:40:33,526", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders where the order creation method indicates they were created manually.'}]"}
{"timestamp": "2025-12-15 16:40:34,941", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders created manually where no delivery schedules have been created."}
{"timestamp": "2025-12-15 16:40:35,375", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:40:35,377", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:40:59,274", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have been created but not dispatched yet?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:40:59,282", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders created manually where no delivery schedules have been created."}
{"timestamp": "2025-12-15 16:40:59,282", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders created manually where no delivery schedules have been created.'}]"}
{"timestamp": "2025-12-15 16:41:00,484", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that have been created manually but have no delivery schedules or dispatches recorded yet."}
{"timestamp": "2025-12-15 16:41:00,929", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:41:00,933", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:41:23,083", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders belong to export transactions?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:41:23,091", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that have been created manually but have no delivery schedules or dispatches recorded yet."}
{"timestamp": "2025-12-15 16:41:23,092", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that have been created manually but have no delivery schedules or dispatches recorded yet.'}]"}
{"timestamp": "2025-12-15 16:41:24,141", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that have been created manually with no delivery schedules or dispatches recorded yet, and filter these sale orders to include only those that belong to export transactions."}
{"timestamp": "2025-12-15 16:41:24,629", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:41:24,631", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:42:51,744", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have missing customer PO references?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:42:51,751", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that have been created manually with no delivery schedules or dispatches recorded yet, and filter these sale orders to include only those that belong to export transactions."}
{"timestamp": "2025-12-15 16:42:51,751", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that have been created manually with no delivery schedules or dispatches recorded yet, and filter these sale orders to include only those that belong to export transactions.'}]"}
{"timestamp": "2025-12-15 16:42:53,155", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that have been created manually with no delivery schedules or dispatches recorded yet, belong to export transactions, and have missing customer PO references."}
{"timestamp": "2025-12-15 16:42:53,823", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:42:53,824", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 16:43:16,288", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which products are sold most frequently?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:43:16,302", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that have been created manually with no delivery schedules or dispatches recorded yet, belong to export transactions, and have missing customer PO references."}
{"timestamp": "2025-12-15 16:43:16,303", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that have been created manually with no delivery schedules or dispatches recorded yet, belong to export transactions, and have missing customer PO references.'}]"}
{"timestamp": "2025-12-15 16:43:17,369", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of products sold most frequently from sale orders that have been created manually, belong to export transactions, have no delivery schedules or dispatches recorded yet, and have missing customer PO references."}
{"timestamp": "2025-12-15 16:43:17,939", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:43:17,940", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 16:43:42,023", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders contain the highest number of line items?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:43:42,028", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of products sold most frequently from sale orders that have been created manually, belong to export transactions, have no delivery schedules or dispatches recorded yet, and have missing customer PO references."}
{"timestamp": "2025-12-15 16:43:42,031", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of products sold most frequently from sale orders that have been created manually, belong to export transactions, have no delivery schedules or dispatches recorded yet, and have missing customer PO references.'}]"}
{"timestamp": "2025-12-15 16:43:42,896", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders that contain the highest number of line items."}
{"timestamp": "2025-12-15 16:43:43,411", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:43:43,413", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:44:10,582", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total ordered quantity per sale order?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:44:10,590", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale orders that contain the highest number of line items."}
{"timestamp": "2025-12-15 16:44:10,590", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders that contain the highest number of line items.'}]"}
{"timestamp": "2025-12-15 16:44:11,496", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total ordered quantity grouped by sale order for all sale orders."}
{"timestamp": "2025-12-15 16:44:12,178", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:44:12,180", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:44:38,798", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale order items have discounts applied?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:44:38,805", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total ordered quantity grouped by sale order for all sale orders."}
{"timestamp": "2025-12-15 16:44:38,806", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total ordered quantity grouped by sale order for all sale orders.'}]"}
{"timestamp": "2025-12-15 16:44:40,074", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale order items where discounts have been applied."}
{"timestamp": "2025-12-15 16:44:40,526", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:44:40,528", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 16:45:03,907", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items contribute the highest revenue?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:45:03,919", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale order items where discounts have been applied."}
{"timestamp": "2025-12-15 16:45:03,920", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale order items where discounts have been applied.'}]"}
{"timestamp": "2025-12-15 16:45:05,081", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale order items where discounts have been applied and identify the items that contribute the highest revenue based on Dispatch Value."}
{"timestamp": "2025-12-15 16:45:05,571", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:45:05,575", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 16:45:23,116", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders contain multiple item groups?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:45:23,127", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale order items where discounts have been applied and identify the items that contribute the highest revenue based on Dispatch Value."}
{"timestamp": "2025-12-15 16:45:23,128", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale order items where discounts have been applied and identify the items that contribute the highest revenue based on Dispatch Value.'}]"}
{"timestamp": "2025-12-15 16:45:24,267", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders that contain multiple distinct Parent Groups within their order items."}
{"timestamp": "2025-12-15 16:45:24,784", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:45:24,787", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 16:45:55,568", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have zero or null quantities?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:45:55,588", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders that contain multiple distinct Parent Groups within their order items."}
{"timestamp": "2025-12-15 16:45:55,588", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders that contain multiple distinct Parent Groups within their order items.'}]"}
{"timestamp": "2025-12-15 16:45:57,025", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders where the Ordered Quantity or Shipped Quantity in the order items is zero or null."}
{"timestamp": "2025-12-15 16:45:57,757", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:45:57,764", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 16:46:22,237", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items are sold under promotional price lists?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:46:22,245", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders where the Ordered Quantity or Shipped Quantity in the order items is zero or null."}
{"timestamp": "2025-12-15 16:46:22,245", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders where the Ordered Quantity or Shipped Quantity in the order items is zero or null.'}]"}
{"timestamp": "2025-12-15 16:46:23,559", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of items sold under promotional price lists, including relevant order item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:46:24,579", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:46:24,584", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:46:38,553", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale order lines were auto-closed?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:46:38,564", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of items sold under promotional price lists, including relevant order item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:46:38,564", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of items sold under promotional price lists, including relevant order item details such as Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 16:46:40,135", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale order lines that were auto-closed, including relevant order item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:46:40,865", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:46:40,865", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:47:28,885", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders contain items with different tax percentages?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:47:28,900", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale order lines that were auto-closed, including relevant order item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:47:28,903", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale order lines that were auto-closed, including relevant order item details such as Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 16:47:30,210", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders that contain order items with different tax percentages, including relevant so item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:47:30,915", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:47:30,915", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 16:48:13,318", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have multiple delivery schedules?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:48:13,321", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders that contain order items with different tax percentages, including relevant so item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:48:13,321", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders that contain order items with different tax percentages, including relevant so item details such as Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 16:48:14,860", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders that have multiple delivery schedules, including relevant so item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:48:15,683", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:48:15,683", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 16:48:46,513", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which schedules were rescheduled?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:48:46,540", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders that have multiple delivery schedules, including relevant so item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:48:46,540", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders that have multiple delivery schedules, including relevant so item details such as Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 16:48:48,240", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the delivery schedules that were rescheduled for sale orders having multiple delivery schedules, including relevant so item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:48:48,977", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:48:48,977", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'List schedules on a given date.', 'query': {'query': "SELECT schedule_id, assigned_to FROM Ponpure_Schedules WHERE schedule_date = '2025-01-01';"}}]"}
{"timestamp": "2025-12-15 16:49:33,710", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which schedules are still pending approval?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:49:33,720", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the delivery schedules that were rescheduled for sale orders having multiple delivery schedules, including relevant so item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:49:33,720", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the delivery schedules that were rescheduled for sale orders having multiple delivery schedules, including relevant so item details such as Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 16:49:34,942", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the delivery schedules that were rescheduled for sale orders having multiple delivery schedules, including relevant so item details such as Item Code and Item Description, where the schedules are still pending approval."}
{"timestamp": "2025-12-15 16:49:35,467", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:49:35,467", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show upcoming schedules.', 'query': {'query': 'SELECT schedule_id, schedule_date, assigned_to FROM Ponpure_Schedules WHERE schedule_date >= GETDATE();'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 16:50:13,400", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have scheduled quantity but no dispatch yet?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:50:13,408", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the delivery schedules that were rescheduled for sale orders having multiple delivery schedules, including relevant so item details such as Item Code and Item Description, where the schedules are still pending approval."}
{"timestamp": "2025-12-15 16:50:13,408", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the delivery schedules that were rescheduled for sale orders having multiple delivery schedules, including relevant so item details such as Item Code and Item Description, where the schedules are still pending approval.'}]"}
{"timestamp": "2025-12-15 16:50:15,078", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders that have scheduled quantity in their delivery schedules but have no dispatch recorded yet, including relevant so item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:50:15,701", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:50:15,701", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 16:50:31,540", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which schedules are marked as delayed?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:50:31,548", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders that have scheduled quantity in their delivery schedules but have no dispatch recorded yet, including relevant so item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:50:31,548", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders that have scheduled quantity in their delivery schedules but have no dispatch recorded yet, including relevant so item details such as Item Code and Item Description.'}]"}
{"timestamp": "2025-12-15 16:50:33,198", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the delivery schedules from sale orders that have scheduled quantity in their delivery schedules but no dispatch recorded yet, and identify which of these schedules are marked as delayed, including relevant so item details such as Item Code and Item Description."}
{"timestamp": "2025-12-15 16:50:33,921", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:50:33,921", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 16:56:40,603", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 16:57:23,874", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have the highest number of scheduled deliveries?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:57:23,933", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 16:57:23,939", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the delivery schedules from sale orders that have scheduled quantity in their delivery schedules but no dispatch recorded yet, and identify which of these schedules are marked as delayed, including relevant so item details such as Item Code and Item Description.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 16:57:26,303", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers with the highest number of scheduled deliveries, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, and Delivery Scheduling information."}
{"timestamp": "2025-12-15 16:57:27,447", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:57:27,447", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 16:57:37,763", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 16:57:55,281", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which schedules have partial fulfillment?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 16:57:55,298", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 16:57:55,298", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers with the highest number of scheduled deliveries, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, and Delivery Scheduling information.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 16:57:57,224", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of delivery schedules where the shipped quantity is less than the ordered quantity, indicating partial fulfillment."}
{"timestamp": "2025-12-15 16:57:57,851", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 16:57:57,860", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:00:23,317", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have mismatched order and schedule quantities?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:00:23,328", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of delivery schedules where the shipped quantity is less than the ordered quantity, indicating partial fulfillment."}
{"timestamp": "2025-12-15 17:00:23,328", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of delivery schedules where the shipped quantity is less than the ordered quantity, indicating partial fulfillment.'}]"}
{"timestamp": "2025-12-15 17:00:24,575", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders where the ordered quantity does not match the shipped quantity in the delivery schedule, indicating partial fulfillment or quantity variance."}
{"timestamp": "2025-12-15 17:00:25,613", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:00:25,613", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:01:16,158", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which schedules were created internally vs externally?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:01:16,174", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders where the ordered quantity does not match the shipped quantity in the delivery schedule, indicating partial fulfillment or quantity variance."}
{"timestamp": "2025-12-15 17:01:16,174", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders where the ordered quantity does not match the shipped quantity in the delivery schedule, indicating partial fulfillment or quantity variance.'}]"}
{"timestamp": "2025-12-15 17:01:17,832", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders where the ordered quantity does not match the shipped quantity in the delivery schedule, indicating partial fulfillment or quantity variance, and identify which delivery schedules were created internally versus externally."}
{"timestamp": "2025-12-15 17:01:18,540", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:01:18,552", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:01:59,094", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have schedules but missing delivery dates?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:01:59,109", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders where the ordered quantity does not match the shipped quantity in the delivery schedule, indicating partial fulfillment or quantity variance, and identify which delivery schedules were created internally versus externally."}
{"timestamp": "2025-12-15 17:01:59,109", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders where the ordered quantity does not match the shipped quantity in the delivery schedule, indicating partial fulfillment or quantity variance, and identify which delivery schedules were created internally versus externally.'}]"}
{"timestamp": "2025-12-15 17:02:00,426", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that have delivery schedules but where the delivery dates are missing or null."}
{"timestamp": "2025-12-15 17:02:01,189", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:02:01,189", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:03:13,526", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are delayed or pending confirmation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:03:13,534", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that have delivery schedules but where the delivery dates are missing or null."}
{"timestamp": "2025-12-15 17:03:13,534", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that have delivery schedules but where the delivery dates are missing or null.'}]"}
{"timestamp": "2025-12-15 17:03:16,209", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that are delayed or pending confirmation, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status."}
{"timestamp": "2025-12-15 17:03:17,461", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:03:17,461", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:06:56,510", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Find orders with discounts greater than or equal to10%., section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:06:56,526", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that are delayed or pending confirmation, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status."}
{"timestamp": "2025-12-15 17:06:56,526", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that are delayed or pending confirmation, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status.'}]"}
{"timestamp": "2025-12-15 17:06:59,034", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that are delayed or pending confirmation with discounts greater than or equal to 10%, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status."}
{"timestamp": "2025-12-15 17:07:00,302", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:07:00,303", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:07:08,856", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 17:10:22,344", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many leads have been created so far?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:10:22,369", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that are delayed or pending confirmation, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status."}
{"timestamp": "2025-12-15 17:10:22,369", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that are delayed or pending confirmation, including details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Part Type, OEM / Local Indicator, Ordered Quantity, Shipped Quantity, Requisition Line ID, Inventory Organization, Product Division, Parent Group, Location Code, Dealer Name, Dealer Area, Dealer Region, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, Customer Segment, Vehicle Model Code, Fuel Type, Model Family, Model Group, Quantity Variance, Dispatch Aging, Order Type, and Billing Status.'}]"}
{"timestamp": "2025-12-15 17:10:24,141", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total count of customer leads created so far, including lead information such as lead date, lead source, customer email, customer phone, and enquiry details."}
{"timestamp": "2025-12-15 17:10:25,019", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:10:25,028", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 leads.', 'query': {'query': 'SELECT TOP 10 lead_id, created_by, creation_date FROM Ponpure_LeadDetails ORDER BY creation_date DESC;'}}, {'input': 'List leads created by a specific employee.', 'query': {'query': 'SELECT lead_id, creation_date FROM Ponpure_LeadDetails WHERE created_by = 55;'}}]"}
{"timestamp": "2025-12-15 17:11:02,886", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have raised multiple quotations?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:11:02,897", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total count of customer leads created so far, including lead information such as lead date, lead source, customer email, customer phone, and enquiry details."}
{"timestamp": "2025-12-15 17:11:02,897", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total count of customer leads created so far, including lead information such as lead date, lead source, customer email, customer phone, and enquiry details.'}]"}
{"timestamp": "2025-12-15 17:11:04,191", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers who have raised multiple quotations, including customer contact details such as customer email and customer phone, along with quotation details like quote number, quote value, quotation date, and quotation status."}
{"timestamp": "2025-12-15 17:11:04,842", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:11:04,842", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:11:31,613", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many quotations exist per customer?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:11:31,633", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customers who have raised multiple quotations, including customer contact details such as customer email and customer phone, along with quotation details like quote number, quote value, quotation date, and quotation status."}
{"timestamp": "2025-12-15 17:11:31,635", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers who have raised multiple quotations, including customer contact details such as customer email and customer phone, along with quotation details like quote number, quote value, quotation date, and quotation status.'}]"}
{"timestamp": "2025-12-15 17:11:33,559", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of quotations grouped by each customer, including customer contact details such as customer email and customer phone, along with quotation details like quote number, quote value, quotation date, and quotation status."}
{"timestamp": "2025-12-15 17:11:34,195", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:11:34,195", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 17:12:00,145", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations have not yet converted to sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:12:00,157", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of quotations grouped by each customer, including customer contact details such as customer email and customer phone, along with quotation details like quote number, quote value, quotation date, and quotation status."}
{"timestamp": "2025-12-15 17:12:00,159", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of quotations grouped by each customer, including customer contact details such as customer email and customer phone, along with quotation details like quote number, quote value, quotation date, and quotation status.'}]"}
{"timestamp": "2025-12-15 17:12:02,237", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all quotations that have not yet converted to sale orders, including quotation details such as quote number, quote value, quotation date, and quotation status, along with customer contact details like customer email and customer phone."}
{"timestamp": "2025-12-15 17:12:02,967", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:12:02,967", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:12:32,207", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total quoted value by customer?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:12:32,222", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all quotations that have not yet converted to sale orders, including quotation details such as quote number, quote value, quotation date, and quotation status, along with customer contact details like customer email and customer phone."}
{"timestamp": "2025-12-15 17:12:32,222", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all quotations that have not yet converted to sale orders, including quotation details such as quote number, quote value, quotation date, and quotation status, along with customer contact details like customer email and customer phone.'}]"}
{"timestamp": "2025-12-15 17:12:34,149", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total quoted value grouped by customer for all quotations that have not yet converted to sale orders, including quotation details such as quote number, quote value, quotation date, and quotation status, along with customer contact details like customer email and customer phone."}
{"timestamp": "2025-12-15 17:12:34,923", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:12:34,929", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:12:56,997", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations were revised more than once?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:12:57,005", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total quoted value grouped by customer for all quotations that have not yet converted to sale orders, including quotation details such as quote number, quote value, quotation date, and quotation status, along with customer contact details like customer email and customer phone."}
{"timestamp": "2025-12-15 17:12:57,007", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total quoted value grouped by customer for all quotations that have not yet converted to sale orders, including quotation details such as quote number, quote value, quotation date, and quotation status, along with customer contact details like customer email and customer phone.'}]"}
{"timestamp": "2025-12-15 17:12:58,871", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that have been revised more than once, including quotation details such as quote number, quote value, quotation date, and quotation status, along with customer contact details like customer email and customer phone, for all quotations that have not yet converted to sale orders."}
{"timestamp": "2025-12-15 17:12:59,493", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:12:59,493", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-15 17:13:04,506", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 17:13:18,020", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many quotations are still open versus closed?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:13:18,035", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 17:13:18,035", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that have been revised more than once, including quotation details such as quote number, quote value, quotation date, and quotation status, along with customer contact details like customer email and customer phone, for all quotations that have not yet converted to sale orders.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 17:13:19,753", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of quotations grouped by their quote status, showing how many quotations are still open versus how many are closed."}
{"timestamp": "2025-12-15 17:13:20,585", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:13:20,585", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count quotations grouped by status.', 'query': {'query': 'SELECT status_id, COUNT(*) AS quotation_count FROM Ponpure_Quotationhdrs GROUP BY status_id;'}}, {'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:13:52,263", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have the highest quotation value?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:13:52,271", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of quotations grouped by their quote status, showing how many quotations are still open versus how many are closed."}
{"timestamp": "2025-12-15 17:13:52,271", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of quotations grouped by their quote status, showing how many quotations are still open versus how many are closed.'}]"}
{"timestamp": "2025-12-15 17:13:54,584", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers with the highest quotation value, showing the total quote amount per customer."}
{"timestamp": "2025-12-15 17:13:55,811", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:13:55,825", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 17:14:27,866", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which quotations were rejected by customers?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:14:27,874", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customers with the highest quotation value, showing the total quote amount per customer."}
{"timestamp": "2025-12-15 17:14:27,874", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers with the highest quotation value, showing the total quote amount per customer.'}]"}
{"timestamp": "2025-12-15 17:14:30,110", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of quotations that were rejected by customers, including details such as quote number, quote value, quotation date, and quote status."}
{"timestamp": "2025-12-15 17:14:31,151", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:14:31,151", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'Show the most recent 10 quotations.', 'query': {'query': 'SELECT TOP 10 header_id, quotation_number, quotation_date, customer_id, company_id, status_id FROM Ponpure_Quotationhdrs ORDER BY quotation_date DESC;'}}]"}
{"timestamp": "2025-12-15 17:16:04,467", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many quotations were created per transaction type?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:16:04,483", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of quotations that were rejected by customers, including details such as quote number, quote value, quotation date, and quote status."}
{"timestamp": "2025-12-15 17:16:04,483", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of quotations that were rejected by customers, including details such as quote number, quote value, quotation date, and quote status.'}]"}
{"timestamp": "2025-12-15 17:16:05,960", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of quotations created grouped by transaction type."}
{"timestamp": "2025-12-15 17:16:06,786", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:16:06,786", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count quotations grouped by status.', 'query': {'query': 'SELECT status_id, COUNT(*) AS quotation_count FROM Ponpure_Quotationhdrs GROUP BY status_id;'}}, {'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:17:14,900", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many sale orders exist in total?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:17:14,913", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of quotations created grouped by transaction type."}
{"timestamp": "2025-12-15 17:17:14,914", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of quotations created grouped by transaction type.'}]"}
{"timestamp": "2025-12-15 17:17:16,509", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total count of sale orders."}
{"timestamp": "2025-12-15 17:17:17,332", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:17:17,339", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 17:17:45,089", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have placed the highest number of sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:17:45,091", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total count of sale orders."}
{"timestamp": "2025-12-15 17:17:45,100", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total count of sale orders.'}]"}
{"timestamp": "2025-12-15 17:17:46,530", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of customers who have placed the highest number of sale orders, including the count of sale orders per customer."}
{"timestamp": "2025-12-15 17:17:47,766", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:17:47,766", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:18:13,993", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total order value per customer?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:18:14,000", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of customers who have placed the highest number of sale orders, including the count of sale orders per customer."}
{"timestamp": "2025-12-15 17:18:14,000", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of customers who have placed the highest number of sale orders, including the count of sale orders per customer.'}]"}
{"timestamp": "2025-12-15 17:18:15,394", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total order value grouped by customer for all sale orders."}
{"timestamp": "2025-12-15 17:18:16,521", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:18:16,521", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}]"}
{"timestamp": "2025-12-15 17:18:37,342", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders were created without a quotation?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:18:37,356", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total order value grouped by customer for all sale orders."}
{"timestamp": "2025-12-15 17:18:37,356", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total order value grouped by customer for all sale orders.'}]"}
{"timestamp": "2025-12-15 17:18:38,945", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders that were created without a quotation."}
{"timestamp": "2025-12-15 17:18:39,677", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:18:39,677", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List all quotations for a specific customer.', 'query': {'query': 'SELECT quotation_number, quotation_date, status_id FROM Ponpure_Quotationhdrs WHERE customer_id = 101;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:19:01,611", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many sale orders are pending approval?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:19:01,630", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale orders that were created without a quotation."}
{"timestamp": "2025-12-15 17:19:01,630", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders that were created without a quotation.'}]"}
{"timestamp": "2025-12-15 17:19:03,009", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of sale orders where the order status indicates pending approval."}
{"timestamp": "2025-12-15 17:19:03,735", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:19:03,735", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:19:06,816", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 17:19:47,743", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have remarks entered?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:19:47,750", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 17:19:47,751", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of sale orders where the order status indicates pending approval.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 17:19:49,598", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve all sale orders where remarks have been entered."}
{"timestamp": "2025-12-15 17:19:50,326", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:19:50,326", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:20:32,536", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the distribution of sale orders by transaction type?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:20:32,554", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve all sale orders where remarks have been entered."}
{"timestamp": "2025-12-15 17:20:32,556", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve all sale orders where remarks have been entered.'}]"}
{"timestamp": "2025-12-15 17:20:40,344", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the distribution of sale orders by transaction type for all sale orders where remarks have been entered."}
{"timestamp": "2025-12-15 17:20:41,526", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:20:41,526", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:21:03,636", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which salespersons have created the most sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:21:03,645", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the distribution of sale orders by transaction type for all sale orders where remarks have been entered."}
{"timestamp": "2025-12-15 17:21:03,653", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the distribution of sale orders by transaction type for all sale orders where remarks have been entered.'}]"}
{"timestamp": "2025-12-15 17:21:05,148", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of salespersons ranked by the number of sale orders they have created, including only sale orders where remarks have been entered."}
{"timestamp": "2025-12-15 17:21:13,273", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:21:13,281", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 17:21:17,148", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 17:21:30,056", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many sale orders exist per organization?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:21:30,056", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 17:21:30,056", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of salespersons ranked by the number of sale orders they have created, including only sale orders where remarks have been entered.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 17:21:31,549", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of sale orders grouped by Inventory Organization."}
{"timestamp": "2025-12-15 17:21:32,533", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:21:32,541", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:21:35,284", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 17:21:58,762", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have credit limit alerts?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:21:58,771", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 17:21:58,773", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of sale orders grouped by Inventory Organization.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 17:22:00,898", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that have credit limit alerts."}
{"timestamp": "2025-12-15 17:22:02,319", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:22:02,324", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:23:05,221", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What are the top ordered items by quantity?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:23:05,231", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that have credit limit alerts."}
{"timestamp": "2025-12-15 17:23:05,231", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that have credit limit alerts.'}]"}
{"timestamp": "2025-12-15 17:23:06,522", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the top ordered items by ordered quantity from the sale orders that have credit limit alerts."}
{"timestamp": "2025-12-15 17:23:07,669", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:23:07,669", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 17:24:23,524", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items generate the highest total sales value?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:24:23,539", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the top ordered items by ordered quantity from the sale orders that have credit limit alerts."}
{"timestamp": "2025-12-15 17:24:23,542", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the top ordered items by ordered quantity from the sale orders that have credit limit alerts.'}]"}
{"timestamp": "2025-12-15 17:24:25,286", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the items that generate the highest total sales value from sale orders with credit limit alerts, including Item Code, Item Description, Ordered Quantity, and Dispatch Value."}
{"timestamp": "2025-12-15 17:24:25,954", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:24:25,962", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:25:12,139", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many distinct items are sold per sale order?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:25:12,164", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the items that generate the highest total sales value from sale orders with credit limit alerts, including Item Code, Item Description, Ordered Quantity, and Dispatch Value."}
{"timestamp": "2025-12-15 17:25:12,164", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the items that generate the highest total sales value from sale orders with credit limit alerts, including Item Code, Item Description, Ordered Quantity, and Dispatch Value.'}]"}
{"timestamp": "2025-12-15 17:25:14,212", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of distinct Item Codes sold per sale order from sale orders with credit limit alerts."}
{"timestamp": "2025-12-15 17:25:14,947", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:25:14,947", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Count sale orders per customer.', 'query': {'query': 'SELECT customer_id, COUNT(*) AS total_orders FROM Ponpure_SaleorderHdrs GROUP BY customer_id;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:25:45,157", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have multiple line items?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:25:45,165", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of distinct Item Codes sold per sale order from sale orders with credit limit alerts."}
{"timestamp": "2025-12-15 17:25:45,172", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of distinct Item Codes sold per sale order from sale orders with credit limit alerts.'}]"}
{"timestamp": "2025-12-15 17:25:48,109", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve sale orders from sale orders with credit limit alerts that have multiple line items, indicating more than one distinct Item Code per sale order."}
{"timestamp": "2025-12-15 17:25:50,176", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:25:50,179", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:26:28,205", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the average unit price per item?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:26:28,210", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve sale orders from sale orders with credit limit alerts that have multiple line items, indicating more than one distinct Item Code per sale order."}
{"timestamp": "2025-12-15 17:26:28,210", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve sale orders from sale orders with credit limit alerts that have multiple line items, indicating more than one distinct Item Code per sale order.'}]"}
{"timestamp": "2025-12-15 17:26:29,893", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the average unit price per Item Code for sale orders from sale orders with credit limit alerts that have multiple line items, indicating more than one distinct Item Code per sale order."}
{"timestamp": "2025-12-15 17:26:31,294", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:26:31,294", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Find line items with unit price above 1000.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price FROM Ponpure_SaleOrderdtls WHERE unit_price > 1000;'}}, {'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:26:56,359", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which item groups contribute the most to revenue?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:26:56,361", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the average unit price per Item Code for sale orders from sale orders with credit limit alerts that have multiple line items, indicating more than one distinct Item Code per sale order."}
{"timestamp": "2025-12-15 17:26:56,361", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the average unit price per Item Code for sale orders from sale orders with credit limit alerts that have multiple line items, indicating more than one distinct Item Code per sale order.'}]"}
{"timestamp": "2025-12-15 17:26:58,038", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the item groups that contribute the most to revenue from sale orders with credit limit alerts that have multiple line items, indicating more than one distinct Item Code per sale order."}
{"timestamp": "2025-12-15 17:26:58,768", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:26:58,774", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}, {'input': 'Find line items with unit price above 1000.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price FROM Ponpure_SaleOrderdtls WHERE unit_price > 1000;'}}]"}
{"timestamp": "2025-12-15 17:27:30,658", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders include discounted items?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:27:30,671", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the item groups that contribute the most to revenue from sale orders with credit limit alerts that have multiple line items, indicating more than one distinct Item Code per sale order."}
{"timestamp": "2025-12-15 17:27:30,671", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the item groups that contribute the most to revenue from sale orders with credit limit alerts that have multiple line items, indicating more than one distinct Item Code per sale order.'}]"}
{"timestamp": "2025-12-15 17:27:32,158", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders that include discounted items."}
{"timestamp": "2025-12-15 17:27:33,407", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:27:33,415", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 17:28:00,447", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total quantity sold per item group?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:28:00,454", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale orders that include discounted items."}
{"timestamp": "2025-12-15 17:28:00,454", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders that include discounted items.'}]"}
{"timestamp": "2025-12-15 17:28:01,641", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total ordered quantity and shipped quantity grouped by Parent Group for sale orders that include discounted items."}
{"timestamp": "2025-12-15 17:28:02,465", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:28:02,473", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:28:32,355", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items are sold across multiple sale orders?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:28:32,364", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total ordered quantity and shipped quantity grouped by Parent Group for sale orders that include discounted items."}
{"timestamp": "2025-12-15 17:28:32,364", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total ordered quantity and shipped quantity grouped by Parent Group for sale orders that include discounted items.'}]"}
{"timestamp": "2025-12-15 17:28:33,698", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Item Codes and Item Descriptions that are sold across multiple sale orders."}
{"timestamp": "2025-12-15 17:28:34,624", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:28:34,626", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:29:03,127", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total sales value per item category?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:29:03,135", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Item Codes and Item Descriptions that are sold across multiple sale orders."}
{"timestamp": "2025-12-15 17:29:03,135", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Item Codes and Item Descriptions that are sold across multiple sale orders.'}]"}
{"timestamp": "2025-12-15 17:29:04,516", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total Dispatch Value grouped by Item Category."}
{"timestamp": "2025-12-15 17:29:05,245", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:29:05,245", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:29:59,582", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders do not have any schedules?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:29:59,591", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total Dispatch Value grouped by Item Category."}
{"timestamp": "2025-12-15 17:29:59,591", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total Dispatch Value grouped by Item Category.'}]"}
{"timestamp": "2025-12-15 17:30:01,378", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that do not have any associated delivery schedules or planned deliveries."}
{"timestamp": "2025-12-15 17:30:02,285", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:30:02,287", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show the latest 10 sale orders.', 'query': {'query': 'SELECT TOP 10 header_id, order_number, order_date, customer_id, company_id FROM Ponpure_SaleorderHdrs ORDER BY order_date DESC;'}}]"}
{"timestamp": "2025-12-15 17:30:31,973", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many schedules exist per sale order?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:30:31,983", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that do not have any associated delivery schedules or planned deliveries."}
{"timestamp": "2025-12-15 17:30:31,983", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that do not have any associated delivery schedules or planned deliveries.'}]"}
{"timestamp": "2025-12-15 17:30:33,810", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the count of delivery schedules or planned deliveries grouped by each sale order."}
{"timestamp": "2025-12-15 17:30:34,760", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:30:34,766", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:31:10,851", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items are scheduled multiple times?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:31:10,857", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the count of delivery schedules or planned deliveries grouped by each sale order."}
{"timestamp": "2025-12-15 17:31:10,866", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the count of delivery schedules or planned deliveries grouped by each sale order.'}]"}
{"timestamp": "2025-12-15 17:31:12,125", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Item Codes and Item Descriptions that have multiple delivery schedules or planned deliveries under each sale order."}
{"timestamp": "2025-12-15 17:31:12,949", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:31:12,949", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show all line items for a sale order.', 'query': {'query': 'SELECT line_id, item_id, sale_quantity, unit_price, total_value FROM Ponpure_SaleOrderdtls WHERE header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:32:50,201", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total scheduled quantity per sale order?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:32:50,208", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of Item Codes and Item Descriptions that have multiple delivery schedules or planned deliveries under each sale order."}
{"timestamp": "2025-12-15 17:32:50,210", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of Item Codes and Item Descriptions that have multiple delivery schedules or planned deliveries under each sale order.'}]"}
{"timestamp": "2025-12-15 17:32:51,955", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total scheduled quantity grouped by each sale order for the Item Codes and Item Descriptions that have multiple delivery schedules or planned deliveries under each sale order."}
{"timestamp": "2025-12-15 17:32:52,563", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:32:52,570", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:33:20,270", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which customers have the highest number of schedules?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:33:20,282", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total scheduled quantity grouped by each sale order for the Item Codes and Item Descriptions that have multiple delivery schedules or planned deliveries under each sale order."}
{"timestamp": "2025-12-15 17:33:20,283", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total scheduled quantity grouped by each sale order for the Item Codes and Item Descriptions that have multiple delivery schedules or planned deliveries under each sale order.'}]"}
{"timestamp": "2025-12-15 17:33:21,656", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the customers with the highest number of delivery schedules or planned deliveries grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order."}
{"timestamp": "2025-12-15 17:33:22,617", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:33:22,625", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:33:55,576", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which schedules are marked with reschedule reasons?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:33:55,585", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the customers with the highest number of delivery schedules or planned deliveries grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order."}
{"timestamp": "2025-12-15 17:33:55,587", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the customers with the highest number of delivery schedules or planned deliveries grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order.'}]"}
{"timestamp": "2025-12-15 17:33:56,882", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the delivery schedules marked with reschedule reasons for customers having the highest number of delivery schedules or planned deliveries grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order."}
{"timestamp": "2025-12-15 17:33:57,501", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:33:57,501", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:34:19,913", "logger": "app", "level": "INFO", "message": "Received /submit request with query: How many schedules exist per schedule status?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:34:19,923", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the delivery schedules marked with reschedule reasons for customers having the highest number of delivery schedules or planned deliveries grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order."}
{"timestamp": "2025-12-15 17:34:19,925", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the delivery schedules marked with reschedule reasons for customers having the highest number of delivery schedules or planned deliveries grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order.'}]"}
{"timestamp": "2025-12-15 17:34:22,788", "logger": "app", "level": "INFO", "message": "reframed query after modification: For the delivery schedules marked with reschedule reasons for customers having the highest number of delivery schedules or planned deliveries grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order, retrieve the count of schedules grouped by each schedule status."}
{"timestamp": "2025-12-15 17:34:24,134", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:34:24,134", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'List schedules on a given date.', 'query': {'query': "SELECT schedule_id, assigned_to FROM Ponpure_Schedules WHERE schedule_date = '2025-01-01';"}}]"}
{"timestamp": "2025-12-15 17:40:15,686", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total scheduled quantity per item?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:40:15,711", "logger": "app", "level": "INFO", "message": "Chat history: user: For the delivery schedules marked with reschedule reasons for customers having the highest number of delivery schedules or planned deliveries grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order, retrieve the count of schedules grouped by each schedule status."}
{"timestamp": "2025-12-15 17:40:15,711", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'For the delivery schedules marked with reschedule reasons for customers having the highest number of delivery schedules or planned deliveries grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order, retrieve the count of schedules grouped by each schedule status.'}]"}
{"timestamp": "2025-12-15 17:40:17,400", "logger": "app", "level": "INFO", "message": "reframed query after modification: For delivery schedules marked with reschedule reasons related to customers having the highest number of delivery schedules or planned deliveries, grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order, retrieve the total scheduled quantity per item."}
{"timestamp": "2025-12-15 17:40:18,462", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:40:18,462", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:41:03,093", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which schedules have comments entered?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:41:03,098", "logger": "app", "level": "INFO", "message": "Chat history: user: For delivery schedules marked with reschedule reasons related to customers having the highest number of delivery schedules or planned deliveries, grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order, retrieve the total scheduled quantity per item."}
{"timestamp": "2025-12-15 17:41:03,098", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'For delivery schedules marked with reschedule reasons related to customers having the highest number of delivery schedules or planned deliveries, grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order, retrieve the total scheduled quantity per item.'}]"}
{"timestamp": "2025-12-15 17:41:04,821", "logger": "app", "level": "INFO", "message": "reframed query after modification: For delivery schedules marked with reschedule reasons related to customers having the highest number of delivery schedules or planned deliveries, grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order, retrieve the schedules that have comments entered."}
{"timestamp": "2025-12-15 17:41:05,780", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:41:05,780", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'List schedules on a given date.', 'query': {'query': "SELECT schedule_id, assigned_to FROM Ponpure_Schedules WHERE schedule_date = '2025-01-01';"}}, {'input': 'List sale orders for a specific customer.', 'query': {'query': 'SELECT order_number, order_date FROM Ponpure_SaleorderHdrs WHERE customer_id = 101;'}}]"}
{"timestamp": "2025-12-15 17:41:12,819", "logger": "app", "level": "ERROR", "message": "LangChain invocation error: 'NoneType' object has no attribute 'get'"}
Traceback (most recent call last):
  File "C:\Krushna\Work\Ponpure\main.py", line 859, in submit_query
    response_data["query"] = response.get("query", "")
                             ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
{"timestamp": "2025-12-15 17:41:31,091", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have dispatch records?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:41:31,099", "logger": "app", "level": "INFO", "message": "Chat history: assistant: Error: Query execution failed: 'NoneType' object has no attribute 'get'"}
{"timestamp": "2025-12-15 17:41:31,107", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'For delivery schedules marked with reschedule reasons related to customers having the highest number of delivery schedules or planned deliveries, grouped by each sale order for Item Codes and Item Descriptions that have multiple delivery schedules under each sale order, retrieve the schedules that have comments entered.'}, {'role': 'assistant', 'content': "Error: Query execution failed: 'NoneType' object has no attribute 'get'"}]"}
{"timestamp": "2025-12-15 17:41:32,158", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that have associated dispatch records."}
{"timestamp": "2025-12-15 17:41:32,975", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:41:32,983", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:42:10,448", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total dispatched quantity per sale order?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:42:10,460", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that have associated dispatch records."}
{"timestamp": "2025-12-15 17:42:10,460", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that have associated dispatch records.'}]"}
{"timestamp": "2025-12-15 17:42:13,727", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total dispatched quantity grouped by sale order for sale orders that have associated dispatch records."}
{"timestamp": "2025-12-15 17:42:15,214", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:42:15,222", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:44:43,084", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders are partially dispatched?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:44:43,095", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total dispatched quantity grouped by sale order for sale orders that have associated dispatch records."}
{"timestamp": "2025-12-15 17:44:43,096", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total dispatched quantity grouped by sale order for sale orders that have associated dispatch records.'}]"}
{"timestamp": "2025-12-15 17:44:45,084", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that have associated dispatch records where the shipped quantity is less than the ordered quantity, indicating partial dispatch."}
{"timestamp": "2025-12-15 17:44:45,697", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:44:45,706", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:45:06,209", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items have the highest dispatched quantity?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:45:06,224", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that have associated dispatch records where the shipped quantity is less than the ordered quantity, indicating partial dispatch."}
{"timestamp": "2025-12-15 17:45:06,225", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that have associated dispatch records where the shipped quantity is less than the ordered quantity, indicating partial dispatch.'}]"}
{"timestamp": "2025-12-15 17:45:08,023", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of items with the highest shipped quantity from sale orders that have associated dispatch records where the shipped quantity is less than the ordered quantity, indicating partial dispatch."}
{"timestamp": "2025-12-15 17:45:08,839", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:45:08,839", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:45:39,490", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the total dispatch value per customer?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:45:39,501", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of items with the highest shipped quantity from sale orders that have associated dispatch records where the shipped quantity is less than the ordered quantity, indicating partial dispatch."}
{"timestamp": "2025-12-15 17:45:39,501", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of items with the highest shipped quantity from sale orders that have associated dispatch records where the shipped quantity is less than the ordered quantity, indicating partial dispatch.'}]"}
{"timestamp": "2025-12-15 17:45:41,236", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the total dispatch value grouped by customer for sale orders that have associated dispatch records where the shipped quantity is less than the ordered quantity, indicating partial dispatch."}
{"timestamp": "2025-12-15 17:45:42,440", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:45:42,440", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:46:23,637", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which dispatches have packing costs applied?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:46:23,653", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the total dispatch value grouped by customer for sale orders that have associated dispatch records where the shipped quantity is less than the ordered quantity, indicating partial dispatch."}
{"timestamp": "2025-12-15 17:46:23,653", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the total dispatch value grouped by customer for sale orders that have associated dispatch records where the shipped quantity is less than the ordered quantity, indicating partial dispatch.'}]"}
{"timestamp": "2025-12-15 17:46:25,231", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the dispatch records where packing costs have been applied, including relevant dispatch details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and any other available dispatch attributes."}
{"timestamp": "2025-12-15 17:46:25,845", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:46:25,853", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show the last 10 dispatch records.', 'query': {'query': 'SELECT TOP 10 sale_order_header_id, sale_order_detail_line_id, schedule_quantity, sale_quantity, total_value, schedule_date FROM Ponpure_DispatchDetails ORDER BY schedule_date DESC;'}}]"}
{"timestamp": "2025-12-15 17:46:46,448", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have dispatches but no schedules?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:46:46,455", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the dispatch records where packing costs have been applied, including relevant dispatch details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and any other available dispatch attributes."}
{"timestamp": "2025-12-15 17:46:46,457", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the dispatch records where packing costs have been applied, including relevant dispatch details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, and any other available dispatch attributes.'}]"}
{"timestamp": "2025-12-15 17:46:47,763", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the sale orders that have dispatch records but do not have any associated delivery schedules."}
{"timestamp": "2025-12-15 17:46:49,921", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:46:49,921", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:47:06,422", "logger": "app", "level": "INFO", "message": "Received /submit request with query: What is the difference between scheduled and dispatched quantity per sale order?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:47:06,429", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the sale orders that have dispatch records but do not have any associated delivery schedules."}
{"timestamp": "2025-12-15 17:47:06,429", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the sale orders that have dispatch records but do not have any associated delivery schedules.'}]"}
{"timestamp": "2025-12-15 17:47:07,718", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the difference between scheduled quantity and dispatched quantity for each sale order that has dispatch records but no associated delivery schedules."}
{"timestamp": "2025-12-15 17:47:08,958", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:47:08,966", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}, {'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}]"}
{"timestamp": "2025-12-15 17:47:35,887", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which sale orders have multiple dispatch events?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:47:35,891", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the difference between scheduled quantity and dispatched quantity for each sale order that has dispatch records but no associated delivery schedules."}
{"timestamp": "2025-12-15 17:47:35,891", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the difference between scheduled quantity and dispatched quantity for each sale order that has dispatch records but no associated delivery schedules.'}]"}
{"timestamp": "2025-12-15 17:47:38,140", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of sale orders that have multiple dispatch events, including relevant details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, and other associated dispatch and order parameters."}
{"timestamp": "2025-12-15 17:47:38,656", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:47:38,656", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
{"timestamp": "2025-12-15 17:48:29,822", "logger": "app", "level": "INFO", "message": "Received /submit request with query: Which items are most frequently dispatched?, section: Azure-SQL-DB"}
{"timestamp": "2025-12-15 17:48:29,833", "logger": "app", "level": "INFO", "message": "Chat history: user: Retrieve the list of sale orders that have multiple dispatch events, including relevant details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, and other associated dispatch and order parameters."}
{"timestamp": "2025-12-15 17:48:29,836", "logger": "app", "level": "INFO", "message": "Messages in session: [{'role': 'user', 'content': 'Retrieve the list of sale orders that have multiple dispatch events, including relevant details such as Dispatch Date, Dispatch Month, Dispatch Year, Item Code, Item Description, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, Repeat Dispatch Flag, Revisit Flag, and other associated dispatch and order parameters.'}]"}
{"timestamp": "2025-12-15 17:48:31,706", "logger": "app", "level": "INFO", "message": "reframed query after modification: Retrieve the list of Item Codes and Item Descriptions along with the count of their dispatch events, to identify which items are most frequently dispatched, including relevant details such as Dispatch Date, Dispatch Month, Dispatch Year, Ordered Quantity, Shipped Quantity, Dispatch Value, Shipment Status, Repeat Dispatch Flag, and Revisit Flag."}
{"timestamp": "2025-12-15 17:48:32,421", "logger": "app", "level": "INFO", "message": "relationships: {'Ponpure_LeadDetails': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}], 'Ponpure_Schedules': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}], 'Ponpure_Quotationhdrs': [{'type': 'one_to_many', 'source': 'Ponpure_LeadDetails', 'target': 'Ponpure_Quotationhdrs', 'source_key': 'lead_id', 'target_key': 'lead_id', 'description': 'Each lead can generate multiple quotations.'}, {'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}], 'Ponpure_SaleOrderdtls': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}], 'Ponpure_SaleorderHdrs': [{'type': 'one_to_many', 'source': 'Ponpure_Quotationhdrs', 'target': 'Ponpure_SaleorderHdrs', 'source_key': 'quotation_number', 'target_key': 'quotation_number', 'description': 'A quotation may get converted into one or more sale orders.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_SaleOrderdtls', 'source_key': 'header_id', 'target_key': 'header_id', 'description': 'A sale order header can contain multiple line items.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_Schedules', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple schedule entries for dispatch planning.'}, {'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}], 'Ponpure_DispatchDetails': [{'type': 'one_to_many', 'source': 'Ponpure_SaleorderHdrs', 'target': 'Ponpure_DispatchDetails', 'source_key': 'header_id', 'target_key': 'sale_order_header_id', 'description': 'A sale order may have multiple dispatch events recorded.'}, {'type': 'one_to_many', 'source': 'Ponpure_Schedules', 'target': 'Ponpure_DispatchDetails', 'source_key': 'line_id', 'target_key': 'schedule_line_id', 'description': 'Each schedule line may have one or more dispatches against it.'}]}"}
{"timestamp": "2025-12-15 17:48:32,421", "logger": "app", "level": "INFO", "message": "examples semantic:[{'input': 'Get dispatch summary for a sale order.', 'query': {'query': 'SELECT sale_order_detail_line_id, schedule_quantity, sale_quantity, (schedule_quantity - sale_quantity) AS pending_qty FROM Ponpure_DispatchDetails WHERE sale_order_header_id = 1091149;'}}, {'input': 'Show total dispatched value per sale order.', 'query': {'query': 'SELECT sale_order_header_id, SUM(total_value) AS total_dispatch_value FROM Ponpure_DispatchDetails GROUP BY sale_order_header_id;'}}]"}
